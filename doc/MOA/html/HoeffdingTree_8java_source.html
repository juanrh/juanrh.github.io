<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MOA: main/java/moa/classifiers/trees/HoeffdingTree.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>main/java/moa/classifiers/trees/HoeffdingTree.java</h1><a href="HoeffdingTree_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *    HoeffdingTree.java</span>
<a name="l00003"></a>00003 <span class="comment"> *    Copyright (C) 2007 University of Waikato, Hamilton, New Zealand</span>
<a name="l00004"></a>00004 <span class="comment"> *    @author Richard Kirkby (rkirkby@cs.waikato.ac.nz)</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> *    This program is free software; you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment"> *    it under the terms of the GNU General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment"> *    the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00009"></a>00009 <span class="comment"> *    (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> *    This program is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment"> *    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment"> *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment"> *    GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> *    You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment"> *    along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00018"></a>00018 <span class="comment"> *    </span>
<a name="l00019"></a>00019 <span class="comment"> */</span>
<a name="l00020"></a>00020 <span class="keyword">package </span>moa.classifiers.trees;
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="keyword">import</span> java.util.Arrays;
<a name="l00023"></a>00023 <span class="keyword">import</span> java.util.Comparator;
<a name="l00024"></a>00024 <span class="keyword">import</span> java.util.HashSet;
<a name="l00025"></a>00025 <span class="keyword">import</span> java.util.LinkedList;
<a name="l00026"></a>00026 <span class="keyword">import</span> java.util.List;
<a name="l00027"></a>00027 <span class="keyword">import</span> java.util.Set;
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">import</span> moa.AbstractMOAObject;
<a name="l00030"></a>00030 <span class="keyword">import</span> moa.classifiers.AbstractClassifier;
<a name="l00031"></a>00031 <span class="keyword">import</span> moa.classifiers.bayes.NaiveBayes;
<a name="l00032"></a>00032 <span class="keyword">import</span> moa.classifiers.core.attributeclassobservers.AttributeClassObserver;
<a name="l00033"></a>00033 <span class="keyword">import</span> moa.classifiers.core.AttributeSplitSuggestion;
<a name="l00034"></a>00034 <span class="keyword">import</span> moa.classifiers.core.attributeclassobservers.DiscreteAttributeClassObserver;
<a name="l00035"></a>00035 <span class="keyword">import</span> moa.classifiers.core.conditionaltests.InstanceConditionalTest;
<a name="l00036"></a>00036 <span class="keyword">import</span> moa.classifiers.core.attributeclassobservers.NullAttributeClassObserver;
<a name="l00037"></a>00037 <span class="keyword">import</span> moa.classifiers.core.attributeclassobservers.NumericAttributeClassObserver;
<a name="l00038"></a>00038 <span class="keyword">import</span> moa.classifiers.core.splitcriteria.SplitCriterion;
<a name="l00039"></a>00039 <span class="keyword">import</span> moa.core.AutoExpandVector;
<a name="l00040"></a>00040 <span class="keyword">import</span> moa.core.DoubleVector;
<a name="l00041"></a>00041 <span class="keyword">import</span> moa.core.Measurement;
<a name="l00042"></a>00042 <span class="keyword">import</span> moa.core.StringUtils;
<a name="l00043"></a>00043 <span class="keyword">import</span> moa.options.ClassOption;
<a name="l00044"></a>00044 <span class="keyword">import</span> moa.options.FlagOption;
<a name="l00045"></a>00045 <span class="keyword">import</span> moa.options.FloatOption;
<a name="l00046"></a>00046 <span class="keyword">import</span> moa.options.IntOption;
<a name="l00047"></a>00047 <span class="keyword">import</span> moa.core.SizeOf;
<a name="l00048"></a>00048 <span class="keyword">import</span> moa.options.*;
<a name="l00049"></a>00049 <span class="keyword">import</span> weka.core.Instance;
<a name="l00050"></a>00050 <span class="keyword">import</span> weka.core.Utils;
<a name="l00051"></a>00051 
<a name="l00096"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html">00096</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1classifiers_1_1AbstractClassifier.html" title="Abstract Classifier.">AbstractClassifier</a> {
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ae73003c2293c8b3ee6aee321d2c5fe37">00098</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ae73003c2293c8b3ee6aee321d2c5fe37">serialVersionUID</a> = 1L;
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     @Override
<a name="l00101"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a10408b9aa477cd7e98a4497d05b85a4d">00101</a>     <span class="keyword">public</span> String <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a10408b9aa477cd7e98a4497d05b85a4d" title="Gets the purpose of this object.">getPurposeString</a>() {
<a name="l00102"></a>00102         <span class="keywordflow">return</span> <span class="stringliteral">&quot;Hoeffding Tree or VFDT.&quot;</span>;
<a name="l00103"></a>00103     }
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a12848d8306fe08f8e7ebd4d726c99d38">00105</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a12848d8306fe08f8e7ebd4d726c99d38">maxByteSizeOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(<span class="stringliteral">&quot;maxByteSize&quot;</span>, <span class="charliteral">&apos;m&apos;</span>,
<a name="l00106"></a>00106             <span class="stringliteral">&quot;Maximum memory consumed by the tree.&quot;</span>, 33554432, 0,
<a name="l00107"></a>00107             Integer.MAX_VALUE);
<a name="l00108"></a>00108 
<a name="l00109"></a>00109     <span class="comment">/*</span>
<a name="l00110"></a>00110 <span class="comment">     * public MultiChoiceOption numericEstimatorOption = new MultiChoiceOption(</span>
<a name="l00111"></a>00111 <span class="comment">     * &quot;numericEstimator&quot;, &apos;n&apos;, &quot;Numeric estimator to use.&quot;, new String[]{</span>
<a name="l00112"></a>00112 <span class="comment">     * &quot;GAUSS10&quot;, &quot;GAUSS100&quot;, &quot;GK10&quot;, &quot;GK100&quot;, &quot;GK1000&quot;, &quot;VFML10&quot;, &quot;VFML100&quot;,</span>
<a name="l00113"></a>00113 <span class="comment">     * &quot;VFML1000&quot;, &quot;BINTREE&quot;}, new String[]{ &quot;Gaussian approximation evaluating</span>
<a name="l00114"></a>00114 <span class="comment">     * 10 splitpoints&quot;, &quot;Gaussian approximation evaluating 100 splitpoints&quot;,</span>
<a name="l00115"></a>00115 <span class="comment">     * &quot;Greenwald-Khanna quantile summary with 10 tuples&quot;, &quot;Greenwald-Khanna</span>
<a name="l00116"></a>00116 <span class="comment">     * quantile summary with 100 tuples&quot;, &quot;Greenwald-Khanna quantile summary</span>
<a name="l00117"></a>00117 <span class="comment">     * with 1000 tuples&quot;, &quot;VFML method with 10 bins&quot;, &quot;VFML method with 100</span>
<a name="l00118"></a>00118 <span class="comment">     * bins&quot;, &quot;VFML method with 1000 bins&quot;, &quot;Exhaustive binary tree&quot;}, 0);</span>
<a name="l00119"></a>00119 <span class="comment">     */</span>
<a name="l00120"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a0e24d0d950b6d45b65aeec01dde7a721">00120</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1ClassOption.html" title="Class option.">ClassOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a0e24d0d950b6d45b65aeec01dde7a721">numericEstimatorOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1ClassOption.html" title="Class option.">ClassOption</a>(<span class="stringliteral">&quot;numericEstimator&quot;</span>,
<a name="l00121"></a>00121             <span class="charliteral">&apos;n&apos;</span>, <span class="stringliteral">&quot;Numeric estimator to use.&quot;</span>, <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1NumericAttributeClassObserver.html" title="Interface for observing the class data distribution for a numeric attribute.">NumericAttributeClassObserver</a>.class,
<a name="l00122"></a>00122             <span class="stringliteral">&quot;GaussianNumericAttributeClassObserver&quot;</span>);
<a name="l00123"></a>00123 
<a name="l00124"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a213878c678a076b9605bb60754dd8d4b">00124</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1ClassOption.html" title="Class option.">ClassOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a213878c678a076b9605bb60754dd8d4b">nominalEstimatorOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1ClassOption.html" title="Class option.">ClassOption</a>(<span class="stringliteral">&quot;nominalEstimator&quot;</span>,
<a name="l00125"></a>00125             <span class="charliteral">&apos;d&apos;</span>, <span class="stringliteral">&quot;Nominal estimator to use.&quot;</span>, <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1DiscreteAttributeClassObserver.html" title="Interface for observing the class data distribution for a discrete (nominal) attribute...">DiscreteAttributeClassObserver</a>.class,
<a name="l00126"></a>00126             <span class="stringliteral">&quot;NominalAttributeClassObserver&quot;</span>);
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a50cb1b33d4610a717ece88780d43ab92">00128</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a50cb1b33d4610a717ece88780d43ab92">memoryEstimatePeriodOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(
<a name="l00129"></a>00129             <span class="stringliteral">&quot;memoryEstimatePeriod&quot;</span>, <span class="charliteral">&apos;e&apos;</span>,
<a name="l00130"></a>00130             <span class="stringliteral">&quot;How many instances between memory consumption checks.&quot;</span>, 1000000,
<a name="l00131"></a>00131             0, Integer.MAX_VALUE);
<a name="l00132"></a>00132 
<a name="l00133"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#acc770eb870d8d4e8f7ac3eb4fdea20cf">00133</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#acc770eb870d8d4e8f7ac3eb4fdea20cf">gracePeriodOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(
<a name="l00134"></a>00134             <span class="stringliteral">&quot;gracePeriod&quot;</span>,
<a name="l00135"></a>00135             <span class="charliteral">&apos;g&apos;</span>,
<a name="l00136"></a>00136             <span class="stringliteral">&quot;The number of instances a leaf should observe between split attempts.&quot;</span>,
<a name="l00137"></a>00137             200, 0, Integer.MAX_VALUE);
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a7fa6fb803b0bcf6ad27505b700ba8a01">00139</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1ClassOption.html" title="Class option.">ClassOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a7fa6fb803b0bcf6ad27505b700ba8a01">splitCriterionOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1ClassOption.html" title="Class option.">ClassOption</a>(<span class="stringliteral">&quot;splitCriterion&quot;</span>,
<a name="l00140"></a>00140             <span class="charliteral">&apos;s&apos;</span>, <span class="stringliteral">&quot;Split criterion to use.&quot;</span>, <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1splitcriteria_1_1SplitCriterion.html" title="Interface for computing splitting criteria.">SplitCriterion</a>.class,
<a name="l00141"></a>00141             <span class="stringliteral">&quot;InfoGainSplitCriterion&quot;</span>);
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a8464022fb8594e51d02edbc2be36b167">00143</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a8464022fb8594e51d02edbc2be36b167">splitConfidenceOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a>(
<a name="l00144"></a>00144             <span class="stringliteral">&quot;splitConfidence&quot;</span>,
<a name="l00145"></a>00145             <span class="charliteral">&apos;c&apos;</span>,
<a name="l00146"></a>00146             <span class="stringliteral">&quot;The allowable error in split decision, values closer to 0 will take longer to decide.&quot;</span>,
<a name="l00147"></a>00147             0.0000001, 0.0, 1.0);
<a name="l00148"></a>00148 
<a name="l00149"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ab17cf06fb42a0a1de43579b670a880df">00149</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ab17cf06fb42a0a1de43579b670a880df">tieThresholdOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a>(<span class="stringliteral">&quot;tieThreshold&quot;</span>,
<a name="l00150"></a>00150             <span class="charliteral">&apos;t&apos;</span>, <span class="stringliteral">&quot;Threshold below which a split will be forced to break ties.&quot;</span>,
<a name="l00151"></a>00151             0.05, 0.0, 1.0);
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a2a2afc258555b1c052d4b23742b1ed34">00153</a> <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a2a2afc258555b1c052d4b23742b1ed34">binarySplitsOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a>(<span class="stringliteral">&quot;binarySplits&quot;</span>, <span class="charliteral">&apos;b&apos;</span>,
<a name="l00154"></a>00154         <span class="stringliteral">&quot;Only allow binary splits.&quot;</span>);
<a name="l00155"></a>00155 
<a name="l00156"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a18ede9de82d2b231a13695ec09cf8d6b">00156</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a18ede9de82d2b231a13695ec09cf8d6b">stopMemManagementOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a>(
<a name="l00157"></a>00157             <span class="stringliteral">&quot;stopMemManagement&quot;</span>, <span class="charliteral">&apos;z&apos;</span>,
<a name="l00158"></a>00158             <span class="stringliteral">&quot;Stop growing as soon as memory limit is hit.&quot;</span>);
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a5a7631453712be129cd015a3d958de18">00160</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a5a7631453712be129cd015a3d958de18">removePoorAttsOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a>(<span class="stringliteral">&quot;removePoorAtts&quot;</span>,
<a name="l00161"></a>00161             <span class="charliteral">&apos;r&apos;</span>, <span class="stringliteral">&quot;Disable poor attributes.&quot;</span>);
<a name="l00162"></a>00162 
<a name="l00163"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a5886687fef889f279dd0c566aca05abd">00163</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a5886687fef889f279dd0c566aca05abd">noPrePruneOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a>(<span class="stringliteral">&quot;noPrePrune&quot;</span>, <span class="charliteral">&apos;p&apos;</span>,
<a name="l00164"></a>00164             <span class="stringliteral">&quot;Disable pre-pruning.&quot;</span>);
<a name="l00165"></a>00165 
<a name="l00166"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">00166</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a> {
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a9ebf6089327796a03e866e0534c8f32c">00168</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a9ebf6089327796a03e866e0534c8f32c">node</a>;
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a3a0bc97df237c0096bd605aed30b3fff">00170</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a3a0bc97df237c0096bd605aed30b3fff">parent</a>;
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a6368b90143e995b84b1c8351ae9449c8">00172</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a6368b90143e995b84b1c8351ae9449c8">parentBranch</a>;
<a name="l00173"></a>00173 
<a name="l00174"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a1760af6af55af9e87ec19aaf05aa03b8">00174</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a1760af6af55af9e87ec19aaf05aa03b8">FoundNode</a>(<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a9ebf6089327796a03e866e0534c8f32c">node</a>, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a3a0bc97df237c0096bd605aed30b3fff">parent</a>, <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a6368b90143e995b84b1c8351ae9449c8">parentBranch</a>) {
<a name="l00175"></a>00175             this.node = node;
<a name="l00176"></a>00176             this.parent = parent;
<a name="l00177"></a>00177             this.parentBranch = parentBranch;
<a name="l00178"></a>00178         }
<a name="l00179"></a>00179     }
<a name="l00180"></a>00180 
<a name="l00181"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">00181</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1AbstractMOAObject.html" title="Abstract MOA Object.">AbstractMOAObject</a> {
<a name="l00182"></a>00182 
<a name="l00183"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ad9e94321eb3a51966bfde0e17aec2162">00183</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ad9e94321eb3a51966bfde0e17aec2162">serialVersionUID</a> = 1L;
<a name="l00184"></a>00184 
<a name="l00185"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">00185</a>         <span class="keyword">protected</span> <a class="code" href="classmoa_1_1core_1_1DoubleVector.html" title="Vector of double numbers with some utilities.">DoubleVector</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>;
<a name="l00186"></a>00186 
<a name="l00187"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ab013135c4410c9b0924424252211d466">00187</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ab013135c4410c9b0924424252211d466">Node</a>(<span class="keywordtype">double</span>[] classObservations) {
<a name="l00188"></a>00188             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1DoubleVector.html" title="Vector of double numbers with some utilities.">DoubleVector</a>(classObservations);
<a name="l00189"></a>00189         }
<a name="l00190"></a>00190 
<a name="l00191"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a7c7e4515667f86164b9cedb208783efe">00191</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a7c7e4515667f86164b9cedb208783efe">calcByteSize</a>() {
<a name="l00192"></a>00192             <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) (<a class="code" href="classmoa_1_1core_1_1SizeOf.html" title="Helper class for Maxim Zakharenkov&amp;#39;s SizeOf agent.">SizeOf</a>.sizeOf(<span class="keyword">this</span>) + <a class="code" href="classmoa_1_1core_1_1SizeOf.html" title="Helper class for Maxim Zakharenkov&amp;#39;s SizeOf agent.">SizeOf</a>.fullSizeOf(this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>));
<a name="l00193"></a>00193         }
<a name="l00194"></a>00194 
<a name="l00195"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a2ed305c905d23b1c53578eaaf648e952">00195</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a2ed305c905d23b1c53578eaaf648e952">calcByteSizeIncludingSubtree</a>() {
<a name="l00196"></a>00196             <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a7c7e4515667f86164b9cedb208783efe">calcByteSize</a>();
<a name="l00197"></a>00197         }
<a name="l00198"></a>00198 
<a name="l00199"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a726fbd2e1f229aaa362458a95f872250">00199</a>         <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a726fbd2e1f229aaa362458a95f872250">isLeaf</a>() {
<a name="l00200"></a>00200             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00201"></a>00201         }
<a name="l00202"></a>00202 
<a name="l00203"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a251a69e6f202175390e0ca357dbce90f">00203</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a251a69e6f202175390e0ca357dbce90f">filterInstanceToLeaf</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> parent,
<a name="l00204"></a>00204                 <span class="keywordtype">int</span> parentBranch) {
<a name="l00205"></a>00205             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>(<span class="keyword">this</span>, parent, parentBranch);
<a name="l00206"></a>00206         }
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a3f834197e0bfe00ec042eb9bdab674fe">00208</a>         <span class="keyword">public</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a3f834197e0bfe00ec042eb9bdab674fe">getObservedClassDistribution</a>() {
<a name="l00209"></a>00209             <span class="keywordflow">return</span> this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a6d0ce5fe7346a8d4b4a6ae444750f9c8">getArrayCopy</a>();
<a name="l00210"></a>00210         }
<a name="l00211"></a>00211 
<a name="l00212"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a4ecd808563ce6313822dfff3865bca69">00212</a>         <span class="keyword">public</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a4ecd808563ce6313822dfff3865bca69">getClassVotes</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht) {
<a name="l00213"></a>00213             <span class="keywordflow">return</span> this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a6d0ce5fe7346a8d4b4a6ae444750f9c8">getArrayCopy</a>();
<a name="l00214"></a>00214         }
<a name="l00215"></a>00215 
<a name="l00216"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ae2048e89b6d4929274af17472f7b7a4e">00216</a>         <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ae2048e89b6d4929274af17472f7b7a4e">observedClassDistributionIsPure</a>() {
<a name="l00217"></a>00217             <span class="keywordflow">return</span> this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a3ad01a733f19192a66c93dfba8de697e">numNonZeroEntries</a>() &lt; 2;
<a name="l00218"></a>00218         }
<a name="l00219"></a>00219 
<a name="l00220"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ac383d69f043c6434cffe978d2bb65961">00220</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ac383d69f043c6434cffe978d2bb65961">describeSubtree</a>(<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht, StringBuilder out,
<a name="l00221"></a>00221                 <span class="keywordtype">int</span> indent) {
<a name="l00222"></a>00222             <a class="code" href="classmoa_1_1core_1_1StringUtils.html" title="Class implementing some string utility methods.">StringUtils</a>.appendIndented(out, indent, <span class="stringliteral">&quot;Leaf &quot;</span>);
<a name="l00223"></a>00223             out.append(ht.<a class="code" href="classmoa_1_1classifiers_1_1AbstractClassifier.html#a72753c7231990d4b6e38a686c7d4a967" title="Gets the name of the attribute of the class from the header.">getClassNameString</a>());
<a name="l00224"></a>00224             out.append(<span class="stringliteral">&quot; = &quot;</span>);
<a name="l00225"></a>00225             out.append(ht.<a class="code" href="classmoa_1_1classifiers_1_1AbstractClassifier.html#a469063073ae4bd012619753dba073070" title="Gets the name of a label of the class from the header.">getClassLabelString</a>(<span class="keyword">this</span>.observedClassDistribution.maxIndex()));
<a name="l00226"></a>00226             out.append(<span class="stringliteral">&quot; weights: &quot;</span>);
<a name="l00227"></a>00227             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a2214f643cc3637bd8308c7dba4acc74d">getSingleLineDescription</a>(out,
<a name="l00228"></a>00228                     ht.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a38db455b3c2b7047eb2c0add4cedd69f">treeRoot</a>.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a04cac8fb52824b100578ad4bfef2136a">numValues</a>());
<a name="l00229"></a>00229             <a class="code" href="classmoa_1_1core_1_1StringUtils.html" title="Class implementing some string utility methods.">StringUtils</a>.appendNewline(out);
<a name="l00230"></a>00230         }
<a name="l00231"></a>00231 
<a name="l00232"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#aa322c5f1f674b3c51dc8f871ec65b21c">00232</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#aa322c5f1f674b3c51dc8f871ec65b21c">subtreeDepth</a>() {
<a name="l00233"></a>00233             <span class="keywordflow">return</span> 0;
<a name="l00234"></a>00234         }
<a name="l00235"></a>00235 
<a name="l00236"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a2dd4315a90707c43f3e92a4456f712d8">00236</a>         <span class="keyword">public</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a2dd4315a90707c43f3e92a4456f712d8">calculatePromise</a>() {
<a name="l00237"></a>00237             <span class="keywordtype">double</span> totalSeen = this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#acafa367bb17b33b844486adfa1b2780a">sumOfValues</a>();
<a name="l00238"></a>00238             <span class="keywordflow">return</span> totalSeen &gt; 0.0 ? (totalSeen - this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a0a22580b229225823e9b11ed9d35104a">getValue</a>(this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#aa2e0dfae5cfa2f87fc61a5d50661f2eb">maxIndex</a>()))
<a name="l00239"></a>00239                     : 0.0;
<a name="l00240"></a>00240         }
<a name="l00241"></a>00241 
<a name="l00242"></a>00242         @Override
<a name="l00243"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a059a8a66d2357802c50b3105d352b2fd">00243</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a059a8a66d2357802c50b3105d352b2fd" title="Returns a string representation of this object.">getDescription</a>(StringBuilder sb, <span class="keywordtype">int</span> indent) {
<a name="l00244"></a>00244             <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ac383d69f043c6434cffe978d2bb65961">describeSubtree</a>(null, sb, indent);
<a name="l00245"></a>00245         }
<a name="l00246"></a>00246     }
<a name="l00247"></a>00247 
<a name="l00248"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">00248</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> {
<a name="l00249"></a>00249 
<a name="l00250"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#aa406c82eb62d7bc4a8e16f53fdf0f8c2">00250</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#aa406c82eb62d7bc4a8e16f53fdf0f8c2">serialVersionUID</a> = 1L;
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">00252</a>         <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html" title="Abstract conditional test for instances to use to split nodes in Hoeffding trees...">InstanceConditionalTest</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">splitTest</a>;
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">00254</a>         <span class="keyword">protected</span> AutoExpandVector&lt;Node&gt; <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">children</a>; <span class="comment">// = new AutoExpandVector&lt;Node&gt;();</span>
<a name="l00255"></a>00255 
<a name="l00256"></a>00256         @Override
<a name="l00257"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a70a1b0c0a6ad5c730b5b1ea8b79e26bf">00257</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a70a1b0c0a6ad5c730b5b1ea8b79e26bf">calcByteSize</a>() {
<a name="l00258"></a>00258             <span class="keywordflow">return</span> super.calcByteSize()
<a name="l00259"></a>00259                     + (int) (<a class="code" href="classmoa_1_1core_1_1SizeOf.html" title="Helper class for Maxim Zakharenkov&amp;#39;s SizeOf agent.">SizeOf</a>.sizeOf(<span class="keyword">this</span>.children) + <a class="code" href="classmoa_1_1core_1_1SizeOf.html" title="Helper class for Maxim Zakharenkov&amp;#39;s SizeOf agent.">SizeOf</a>.fullSizeOf(this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">splitTest</a>));
<a name="l00260"></a>00260         }
<a name="l00261"></a>00261 
<a name="l00262"></a>00262         @Override
<a name="l00263"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a247cb42faa011731ef70ed6321920338">00263</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a247cb42faa011731ef70ed6321920338">calcByteSizeIncludingSubtree</a>() {
<a name="l00264"></a>00264             <span class="keywordtype">int</span> byteSize = <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a70a1b0c0a6ad5c730b5b1ea8b79e26bf">calcByteSize</a>();
<a name="l00265"></a>00265             <span class="keywordflow">for</span> (<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> child : this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">children</a>) {
<a name="l00266"></a>00266                 <span class="keywordflow">if</span> (child != null) {
<a name="l00267"></a>00267                     byteSize += child.calcByteSizeIncludingSubtree();
<a name="l00268"></a>00268                 }
<a name="l00269"></a>00269             }
<a name="l00270"></a>00270             <span class="keywordflow">return</span> byteSize;
<a name="l00271"></a>00271         }
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a8676d51c3799eaf968325d637b34f079">00273</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a8676d51c3799eaf968325d637b34f079">SplitNode</a>(<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html" title="Abstract conditional test for instances to use to split nodes in Hoeffding trees...">InstanceConditionalTest</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">splitTest</a>,
<a name="l00274"></a>00274                 <span class="keywordtype">double</span>[] classObservations, <span class="keywordtype">int</span> size) {
<a name="l00275"></a>00275             super(classObservations);
<a name="l00276"></a>00276             this.splitTest = splitTest;
<a name="l00277"></a>00277             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">children</a> = <span class="keyword">new</span> AutoExpandVector&lt;Node&gt;(size);
<a name="l00278"></a>00278         }
<a name="l00279"></a>00279         
<a name="l00280"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a6164218640c508caf4d6350f651d416c">00280</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a8676d51c3799eaf968325d637b34f079">SplitNode</a>(<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html" title="Abstract conditional test for instances to use to split nodes in Hoeffding trees...">InstanceConditionalTest</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">splitTest</a>,
<a name="l00281"></a>00281                 <span class="keywordtype">double</span>[] classObservations) {
<a name="l00282"></a>00282             super(classObservations);
<a name="l00283"></a>00283             this.splitTest = splitTest;
<a name="l00284"></a>00284             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">children</a> = <span class="keyword">new</span> AutoExpandVector&lt;Node&gt;();
<a name="l00285"></a>00285         }
<a name="l00286"></a>00286 
<a name="l00287"></a>00287 
<a name="l00288"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a9edff82f8eceedb3baae2395c959f259">00288</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a9edff82f8eceedb3baae2395c959f259">numChildren</a>() {
<a name="l00289"></a>00289             <span class="keywordflow">return</span> this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">children</a>.size();
<a name="l00290"></a>00290         }
<a name="l00291"></a>00291 
<a name="l00292"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a096ddc519733df2bfbf4f4f7890d2c66">00292</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a096ddc519733df2bfbf4f4f7890d2c66">setChild</a>(<span class="keywordtype">int</span> index, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> child) {
<a name="l00293"></a>00293             <span class="keywordflow">if</span> ((this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">splitTest</a>.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html#adda57438d3e9a6990d6ccb80fe78d6b6" title="Gets the number of maximum branches, -1 if unknown.">maxBranches</a>() &gt;= 0)
<a name="l00294"></a>00294                     &amp;&amp; (index &gt;= this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">splitTest</a>.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html#adda57438d3e9a6990d6ccb80fe78d6b6" title="Gets the number of maximum branches, -1 if unknown.">maxBranches</a>())) {
<a name="l00295"></a>00295                 <span class="keywordflow">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException();
<a name="l00296"></a>00296             }
<a name="l00297"></a>00297             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">children</a>.set(index, child);
<a name="l00298"></a>00298         }
<a name="l00299"></a>00299 
<a name="l00300"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ad22dc2cda35c63546ea4d810e793fd99">00300</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ad22dc2cda35c63546ea4d810e793fd99">getChild</a>(<span class="keywordtype">int</span> index) {
<a name="l00301"></a>00301             <span class="keywordflow">return</span> this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">children</a>.get(index);
<a name="l00302"></a>00302         }
<a name="l00303"></a>00303 
<a name="l00304"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a8f4fb6e3f3827d86b7ef74c5a5b2b6bd">00304</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a8f4fb6e3f3827d86b7ef74c5a5b2b6bd">instanceChildIndex</a>(Instance inst) {
<a name="l00305"></a>00305             <span class="keywordflow">return</span> this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">splitTest</a>.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html#a76dc81c568124d9dc97b08e51506bfe5" title="Returns the number of the branch for an instance, -1 if unknown.">branchForInstance</a>(inst);
<a name="l00306"></a>00306         }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308         @Override
<a name="l00309"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#adb1b545a750a6d83af8f9bc7cf8961b1">00309</a>         <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#adb1b545a750a6d83af8f9bc7cf8961b1">isLeaf</a>() {
<a name="l00310"></a>00310             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00311"></a>00311         }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313         @Override
<a name="l00314"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a126b69af1100b1a85e716b897065b603">00314</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a126b69af1100b1a85e716b897065b603">filterInstanceToLeaf</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> parent,
<a name="l00315"></a>00315                 <span class="keywordtype">int</span> parentBranch) {
<a name="l00316"></a>00316             <span class="keywordtype">int</span> childIndex = <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a8f4fb6e3f3827d86b7ef74c5a5b2b6bd">instanceChildIndex</a>(inst);
<a name="l00317"></a>00317             <span class="keywordflow">if</span> (childIndex &gt;= 0) {
<a name="l00318"></a>00318                 <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> child = <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ad22dc2cda35c63546ea4d810e793fd99">getChild</a>(childIndex);
<a name="l00319"></a>00319                 <span class="keywordflow">if</span> (child != null) {
<a name="l00320"></a>00320                     <span class="keywordflow">return</span> child.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a251a69e6f202175390e0ca357dbce90f">filterInstanceToLeaf</a>(inst, <span class="keyword">this</span>, childIndex);
<a name="l00321"></a>00321                 }
<a name="l00322"></a>00322                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>(null, <span class="keyword">this</span>, childIndex);
<a name="l00323"></a>00323             }
<a name="l00324"></a>00324             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>(<span class="keyword">this</span>, parent, parentBranch);
<a name="l00325"></a>00325         }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327         @Override
<a name="l00328"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a1771abdbfe1ee80f113908623f57707d">00328</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a1771abdbfe1ee80f113908623f57707d">describeSubtree</a>(<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht, StringBuilder out,
<a name="l00329"></a>00329                 <span class="keywordtype">int</span> indent) {
<a name="l00330"></a>00330             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> branch = 0; branch &lt; <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a9edff82f8eceedb3baae2395c959f259">numChildren</a>(); branch++) {
<a name="l00331"></a>00331                 <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> child = <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ad22dc2cda35c63546ea4d810e793fd99">getChild</a>(branch);
<a name="l00332"></a>00332                 <span class="keywordflow">if</span> (child != null) {
<a name="l00333"></a>00333                     <a class="code" href="classmoa_1_1core_1_1StringUtils.html" title="Class implementing some string utility methods.">StringUtils</a>.appendIndented(out, indent, <span class="stringliteral">&quot;if &quot;</span>);
<a name="l00334"></a>00334                     out.append(this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a60a6b39283274fa7704582ae18bd003e">splitTest</a>.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html#add42f603fd27c74a75f5d2d542d233ca" title="Gets the text that describes the condition of a branch.">describeConditionForBranch</a>(branch,
<a name="l00335"></a>00335                             ht.<a class="code" href="classmoa_1_1classifiers_1_1AbstractClassifier.html#a832f7f624c34b64e890c29f6fbeec19b" title="Gets the reference to the header of the data stream.">getModelContext</a>()));
<a name="l00336"></a>00336                     out.append(<span class="stringliteral">&quot;: &quot;</span>);
<a name="l00337"></a>00337                     <a class="code" href="classmoa_1_1core_1_1StringUtils.html" title="Class implementing some string utility methods.">StringUtils</a>.appendNewline(out);
<a name="l00338"></a>00338                     child.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ac383d69f043c6434cffe978d2bb65961">describeSubtree</a>(ht, out, indent + 2);
<a name="l00339"></a>00339                 }
<a name="l00340"></a>00340             }
<a name="l00341"></a>00341         }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343         @Override
<a name="l00344"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#adee9884c76cc0c19643d84148a81c752">00344</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#adee9884c76cc0c19643d84148a81c752">subtreeDepth</a>() {
<a name="l00345"></a>00345             <span class="keywordtype">int</span> maxChildDepth = 0;
<a name="l00346"></a>00346             <span class="keywordflow">for</span> (<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> child : this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ab4cce38b6927b1661dbf2e544d73a1c2">children</a>) {
<a name="l00347"></a>00347                 <span class="keywordflow">if</span> (child != null) {
<a name="l00348"></a>00348                     <span class="keywordtype">int</span> depth = child.subtreeDepth();
<a name="l00349"></a>00349                     <span class="keywordflow">if</span> (depth &gt; maxChildDepth) {
<a name="l00350"></a>00350                         maxChildDepth = depth;
<a name="l00351"></a>00351                     }
<a name="l00352"></a>00352                 }
<a name="l00353"></a>00353             }
<a name="l00354"></a>00354             <span class="keywordflow">return</span> maxChildDepth + 1;
<a name="l00355"></a>00355         }
<a name="l00356"></a>00356     }
<a name="l00357"></a>00357 
<a name="l00358"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">00358</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">abstract</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">LearningNode</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> {
<a name="l00359"></a>00359 
<a name="l00360"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html#adfe564e5eb0865500ee5b59b077e5874">00360</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html#adfe564e5eb0865500ee5b59b077e5874">serialVersionUID</a> = 1L;
<a name="l00361"></a>00361 
<a name="l00362"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html#ab107675f56ca6c731df9da61bec7a9cc">00362</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html#ab107675f56ca6c731df9da61bec7a9cc">LearningNode</a>(<span class="keywordtype">double</span>[] initialClassObservations) {
<a name="l00363"></a>00363             super(initialClassObservations);
<a name="l00364"></a>00364         }
<a name="l00365"></a>00365 
<a name="l00366"></a>00366         <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html#aa53ea059cb605d2680a6522c9b4316da">learnFromInstance</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht);
<a name="l00367"></a>00367     }
<a name="l00368"></a>00368 
<a name="l00369"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html">00369</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html">InactiveLearningNode</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">LearningNode</a> {
<a name="l00370"></a>00370 
<a name="l00371"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html#aa7d63d54c8c8f69021271828ee9a35e0">00371</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html#aa7d63d54c8c8f69021271828ee9a35e0">serialVersionUID</a> = 1L;
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html#a7b3e0ad4766c659cb7bd389782413ed0">00373</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html#a7b3e0ad4766c659cb7bd389782413ed0">InactiveLearningNode</a>(<span class="keywordtype">double</span>[] initialClassObservations) {
<a name="l00374"></a>00374             super(initialClassObservations);
<a name="l00375"></a>00375         }
<a name="l00376"></a>00376 
<a name="l00377"></a>00377         @Override
<a name="l00378"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html#ada21d9bc30c7ccebcf9da43166ca3f5f">00378</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html#ada21d9bc30c7ccebcf9da43166ca3f5f">learnFromInstance</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht) {
<a name="l00379"></a>00379             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a4050209166f4be04dd9f6dac3535d60e">addToValue</a>((<span class="keywordtype">int</span>) inst.classValue(),
<a name="l00380"></a>00380                     inst.weight());
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382     }
<a name="l00383"></a>00383 
<a name="l00384"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">00384</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">LearningNode</a> {
<a name="l00385"></a>00385 
<a name="l00386"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a404189c27fe720c8c5ae1237e02da6e0">00386</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a404189c27fe720c8c5ae1237e02da6e0">serialVersionUID</a> = 1L;
<a name="l00387"></a>00387 
<a name="l00388"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acf0893846f0e913066cc78c0791b1f59">00388</a>         <span class="keyword">protected</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acf0893846f0e913066cc78c0791b1f59">weightSeenAtLastSplitEvaluation</a>;
<a name="l00389"></a>00389 
<a name="l00390"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ad1fee48988c2726e60b92de40600277d">00390</a>         <span class="keyword">protected</span> AutoExpandVector&lt;AttributeClassObserver&gt; <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ad1fee48988c2726e60b92de40600277d">attributeObservers</a> = <span class="keyword">new</span> AutoExpandVector&lt;AttributeClassObserver&gt;();
<a name="l00391"></a>00391         
<a name="l00392"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acfb252b0bf79f41db2bf5794b3e87333">00392</a>         <span class="keyword">protected</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acfb252b0bf79f41db2bf5794b3e87333">isInitialized</a>;
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a426757cd57b6eeb73e4603d83934e9d9">00394</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a426757cd57b6eeb73e4603d83934e9d9">ActiveLearningNode</a>(<span class="keywordtype">double</span>[] initialClassObservations) {
<a name="l00395"></a>00395             super(initialClassObservations);
<a name="l00396"></a>00396             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acf0893846f0e913066cc78c0791b1f59">weightSeenAtLastSplitEvaluation</a> = <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a407cdfb074879e0f84460dee8ae06b04">getWeightSeen</a>();
<a name="l00397"></a>00397             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acfb252b0bf79f41db2bf5794b3e87333">isInitialized</a> = <span class="keyword">false</span>;
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399 
<a name="l00400"></a>00400         @Override
<a name="l00401"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a0f0b0a3e9eaceb68e8c514ae3d30bead">00401</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a0f0b0a3e9eaceb68e8c514ae3d30bead">calcByteSize</a>() {
<a name="l00402"></a>00402             <span class="keywordflow">return</span> super.calcByteSize()
<a name="l00403"></a>00403                     + (int) (<a class="code" href="classmoa_1_1core_1_1SizeOf.html" title="Helper class for Maxim Zakharenkov&amp;#39;s SizeOf agent.">SizeOf</a>.fullSizeOf(<span class="keyword">this</span>.attributeObservers));
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405 
<a name="l00406"></a>00406         @Override
<a name="l00407"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ac5b3cfde80e659fe0ee639be3af002ab">00407</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ac5b3cfde80e659fe0ee639be3af002ab">learnFromInstance</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht) {
<a name="l00408"></a>00408             <span class="keywordflow">if</span> (this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acfb252b0bf79f41db2bf5794b3e87333">isInitialized</a> == <span class="keyword">false</span>) {
<a name="l00409"></a>00409                 this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ad1fee48988c2726e60b92de40600277d">attributeObservers</a> = <span class="keyword">new</span> AutoExpandVector&lt;AttributeClassObserver&gt;(inst.numAttributes());
<a name="l00410"></a>00410                 this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acfb252b0bf79f41db2bf5794b3e87333">isInitialized</a> = <span class="keyword">true</span>;
<a name="l00411"></a>00411             }
<a name="l00412"></a>00412             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a4050209166f4be04dd9f6dac3535d60e">addToValue</a>((<span class="keywordtype">int</span>) inst.classValue(),
<a name="l00413"></a>00413                     inst.weight());
<a name="l00414"></a>00414             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; inst.numAttributes() - 1; i++) {
<a name="l00415"></a>00415                 <span class="keywordtype">int</span> instAttIndex = <a class="code" href="classmoa_1_1classifiers_1_1AbstractClassifier.html#a5cd97fb8e5751d48de011c81f45466d4" title="Gets the index of the attribute in the instance, given the index of the attribute...">modelAttIndexToInstanceAttIndex</a>(i, inst);
<a name="l00416"></a>00416                 <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a> obs = this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ad1fee48988c2726e60b92de40600277d">attributeObservers</a>.get(i);
<a name="l00417"></a>00417                 <span class="keywordflow">if</span> (obs == null) {
<a name="l00418"></a>00418                     obs = inst.attribute(instAttIndex).isNominal() ? ht.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a3df864b09b54a38dc4af72457af2df9a">newNominalClassObserver</a>() : ht.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a43dc714f59552a9e6814c79cb1cff40b">newNumericClassObserver</a>();
<a name="l00419"></a>00419                     this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ad1fee48988c2726e60b92de40600277d">attributeObservers</a>.set(i, obs);
<a name="l00420"></a>00420                 }
<a name="l00421"></a>00421                 obs.<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html#adeb638c64bb2dad4266a7db241398bf5" title="Updates statistics of this observer given an attribute value, a class and the weight...">observeAttributeClass</a>(inst.value(instAttIndex), (int) inst.classValue(), inst.weight());
<a name="l00422"></a>00422             }
<a name="l00423"></a>00423         }
<a name="l00424"></a>00424 
<a name="l00425"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a407cdfb074879e0f84460dee8ae06b04">00425</a>         <span class="keyword">public</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a407cdfb074879e0f84460dee8ae06b04">getWeightSeen</a>() {
<a name="l00426"></a>00426             <span class="keywordflow">return</span> this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#acafa367bb17b33b844486adfa1b2780a">sumOfValues</a>();
<a name="l00427"></a>00427         }
<a name="l00428"></a>00428 
<a name="l00429"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ab9bd87465e305bfbfb632141f4848479">00429</a>         <span class="keyword">public</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ab9bd87465e305bfbfb632141f4848479">getWeightSeenAtLastSplitEvaluation</a>() {
<a name="l00430"></a>00430             <span class="keywordflow">return</span> this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acf0893846f0e913066cc78c0791b1f59">weightSeenAtLastSplitEvaluation</a>;
<a name="l00431"></a>00431         }
<a name="l00432"></a>00432 
<a name="l00433"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ac59198bb4fab83aa3cca200b376270e8">00433</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ac59198bb4fab83aa3cca200b376270e8">setWeightSeenAtLastSplitEvaluation</a>(<span class="keywordtype">double</span> weight) {
<a name="l00434"></a>00434             this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#acf0893846f0e913066cc78c0791b1f59">weightSeenAtLastSplitEvaluation</a> = weight;
<a name="l00435"></a>00435         }
<a name="l00436"></a>00436 
<a name="l00437"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#aafe42fb1a0fc6d17021a314209ca0358">00437</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html" title="Class for computing attribute split suggestions given a split test.">AttributeSplitSuggestion</a>[] <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#aafe42fb1a0fc6d17021a314209ca0358">getBestSplitSuggestions</a>(
<a name="l00438"></a>00438                 <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1splitcriteria_1_1SplitCriterion.html" title="Interface for computing splitting criteria.">SplitCriterion</a> criterion, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht) {
<a name="l00439"></a>00439             List&lt;AttributeSplitSuggestion&gt; bestSuggestions = <span class="keyword">new</span> LinkedList&lt;AttributeSplitSuggestion&gt;();
<a name="l00440"></a>00440             <span class="keywordtype">double</span>[] preSplitDist = this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ade2769ed23bbb13195b5377de583bf9f">observedClassDistribution</a>.<a class="code" href="classmoa_1_1core_1_1DoubleVector.html#a6d0ce5fe7346a8d4b4a6ae444750f9c8">getArrayCopy</a>();
<a name="l00441"></a>00441             <span class="keywordflow">if</span> (!ht.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a5886687fef889f279dd0c566aca05abd">noPrePruneOption</a>.<a class="code" href="classmoa_1_1options_1_1FlagOption.html#ab37cb6ed4d9a2e393b460594f075b0a2">isSet</a>()) {
<a name="l00442"></a>00442                 <span class="comment">// add null split as an option</span>
<a name="l00443"></a>00443                 bestSuggestions.add(<span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html" title="Class for computing attribute split suggestions given a split test.">AttributeSplitSuggestion</a>(null,
<a name="l00444"></a>00444                         <span class="keyword">new</span> <span class="keywordtype">double</span>[0][], criterion.<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1splitcriteria_1_1SplitCriterion.html#a82f5cb7ad49c396d4f50615a55300b36" title="Computes the merit of splitting for a given ditribution before the split and after...">getMeritOfSplit</a>(
<a name="l00445"></a>00445                         preSplitDist,
<a name="l00446"></a>00446                         <span class="keyword">new</span> <span class="keywordtype">double</span>[][]{preSplitDist})));
<a name="l00447"></a>00447             }
<a name="l00448"></a>00448             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ad1fee48988c2726e60b92de40600277d">attributeObservers</a>.size(); i++) {
<a name="l00449"></a>00449                 <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a> obs = this.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ad1fee48988c2726e60b92de40600277d">attributeObservers</a>.get(i);
<a name="l00450"></a>00450                 <span class="keywordflow">if</span> (obs != null) {
<a name="l00451"></a>00451                     <a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html" title="Class for computing attribute split suggestions given a split test.">AttributeSplitSuggestion</a> bestSuggestion = obs.<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html#a989571adba7ae36c8bda51b2d6f87b5b" title="Gets the best split suggestion given a criterion and a class distribution.">getBestEvaluatedSplitSuggestion</a>(criterion,
<a name="l00452"></a>00452                             preSplitDist, i, ht.binarySplitsOption.isSet());
<a name="l00453"></a>00453                     <span class="keywordflow">if</span> (bestSuggestion != null) {
<a name="l00454"></a>00454                         bestSuggestions.add(bestSuggestion);
<a name="l00455"></a>00455                     }
<a name="l00456"></a>00456                 }
<a name="l00457"></a>00457             }
<a name="l00458"></a>00458             <span class="keywordflow">return</span> bestSuggestions.toArray(<span class="keyword">new</span> AttributeSplitSuggestion[bestSuggestions.size()]);
<a name="l00459"></a>00459         }
<a name="l00460"></a>00460 
<a name="l00461"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a69b39f90da169dd44292df54d98adbda">00461</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a69b39f90da169dd44292df54d98adbda">disableAttribute</a>(<span class="keywordtype">int</span> attIndex) {
<a name="l00462"></a>00462             this.attributeObservers.set(attIndex,
<a name="l00463"></a>00463                     <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1NullAttributeClassObserver.html" title="Class for observing the class data distribution for a null attribute.">NullAttributeClassObserver</a>());
<a name="l00464"></a>00464         }
<a name="l00465"></a>00465     }
<a name="l00466"></a>00466 
<a name="l00467"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a38db455b3c2b7047eb2c0add4cedd69f">00467</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> treeRoot;
<a name="l00468"></a>00468 
<a name="l00469"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a8fa182f3214ee44c2be73dace51eb522">00469</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> decisionNodeCount;
<a name="l00470"></a>00470 
<a name="l00471"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a1c8f0808411ec2692b749d99b3e2e75f">00471</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> activeLeafNodeCount;
<a name="l00472"></a>00472 
<a name="l00473"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a650ceca27f9ffc37daec703fdb49e393">00473</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> inactiveLeafNodeCount;
<a name="l00474"></a>00474 
<a name="l00475"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a2ae55e22134948bef212b687076bf03e">00475</a>     <span class="keyword">protected</span> <span class="keywordtype">double</span> inactiveLeafByteSizeEstimate;
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a8c8319f16098fa4baf3380229196fff3">00477</a>     <span class="keyword">protected</span> <span class="keywordtype">double</span> activeLeafByteSizeEstimate;
<a name="l00478"></a>00478 
<a name="l00479"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a2c7139fc8c7069e7e302bbe91a53cbad">00479</a>     <span class="keyword">protected</span> <span class="keywordtype">double</span> byteSizeEstimateOverheadFraction;
<a name="l00480"></a>00480 
<a name="l00481"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a134db729b79c2596b450e09c98e4b546">00481</a>     <span class="keyword">protected</span> <span class="keywordtype">boolean</span> growthAllowed;
<a name="l00482"></a>00482 
<a name="l00483"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a02eae1e84ca29547433c1493a42b96d4">00483</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a02eae1e84ca29547433c1493a42b96d4">calcByteSize</a>() {
<a name="l00484"></a>00484         <span class="keywordtype">int</span> size = (int) <a class="code" href="classmoa_1_1core_1_1SizeOf.html" title="Helper class for Maxim Zakharenkov&amp;#39;s SizeOf agent.">SizeOf</a>.sizeOf(<span class="keyword">this</span>);
<a name="l00485"></a>00485         <span class="keywordflow">if</span> (this.treeRoot != null) {
<a name="l00486"></a>00486             size += this.treeRoot.calcByteSizeIncludingSubtree();
<a name="l00487"></a>00487         }
<a name="l00488"></a>00488         <span class="keywordflow">return</span> size;
<a name="l00489"></a>00489     }
<a name="l00490"></a>00490 
<a name="l00491"></a>00491     @Override
<a name="l00492"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#aaebcba3152efce82222189a1ae3e94d7">00492</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#aaebcba3152efce82222189a1ae3e94d7" title="Gets the memory size of this object.">measureByteSize</a>() {
<a name="l00493"></a>00493         <span class="keywordflow">return</span> calcByteSize();
<a name="l00494"></a>00494     }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496     @Override
<a name="l00497"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a723e3ef22f599a2b2450a1c84db6a989">00497</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a723e3ef22f599a2b2450a1c84db6a989" title="Resets this classifier.">resetLearningImpl</a>() {
<a name="l00498"></a>00498         this.treeRoot = null;
<a name="l00499"></a>00499         this.decisionNodeCount = 0;
<a name="l00500"></a>00500         this.activeLeafNodeCount = 0;
<a name="l00501"></a>00501         this.inactiveLeafNodeCount = 0;
<a name="l00502"></a>00502         this.inactiveLeafByteSizeEstimate = 0.0;
<a name="l00503"></a>00503         this.activeLeafByteSizeEstimate = 0.0;
<a name="l00504"></a>00504         this.byteSizeEstimateOverheadFraction = 1.0;
<a name="l00505"></a>00505         this.growthAllowed = <span class="keyword">true</span>;
<a name="l00506"></a>00506         <span class="keywordflow">if</span> (this.leafpredictionOption.getChosenIndex()&gt;0) { 
<a name="l00507"></a>00507             this.removePoorAttsOption = null;
<a name="l00508"></a>00508         }
<a name="l00509"></a>00509     }
<a name="l00510"></a>00510 
<a name="l00511"></a>00511     @Override
<a name="l00512"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ab13e136d761801002a42fa109b994f28">00512</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ab13e136d761801002a42fa109b994f28" title="Trains this classifier incrementally using the given instance.">trainOnInstanceImpl</a>(Instance inst) {
<a name="l00513"></a>00513         <span class="keywordflow">if</span> (this.treeRoot == null) {
<a name="l00514"></a>00514             this.treeRoot = newLearningNode();
<a name="l00515"></a>00515             this.activeLeafNodeCount = 1;
<a name="l00516"></a>00516         }
<a name="l00517"></a>00517         <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a> foundNode = this.treeRoot.filterInstanceToLeaf(inst, null, -1);
<a name="l00518"></a>00518         <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> leafNode = foundNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a9ebf6089327796a03e866e0534c8f32c">node</a>;
<a name="l00519"></a>00519         <span class="keywordflow">if</span> (leafNode == null) {
<a name="l00520"></a>00520             leafNode = newLearningNode();
<a name="l00521"></a>00521             foundNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a3a0bc97df237c0096bd605aed30b3fff">parent</a>.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a096ddc519733df2bfbf4f4f7890d2c66">setChild</a>(foundNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a6368b90143e995b84b1c8351ae9449c8">parentBranch</a>, leafNode);
<a name="l00522"></a>00522             this.activeLeafNodeCount++;
<a name="l00523"></a>00523         }
<a name="l00524"></a>00524         <span class="keywordflow">if</span> (leafNode instanceof <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">LearningNode</a>) {
<a name="l00525"></a>00525             LearningNode learningNode = (LearningNode) leafNode;
<a name="l00526"></a>00526             learningNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html#aa53ea059cb605d2680a6522c9b4316da">learnFromInstance</a>(inst, <span class="keyword">this</span>);
<a name="l00527"></a>00527             <span class="keywordflow">if</span> (this.growthAllowed
<a name="l00528"></a>00528                     &amp;&amp; (learningNode instanceof <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a>)) {
<a name="l00529"></a>00529                 ActiveLearningNode activeLearningNode = (ActiveLearningNode) learningNode;
<a name="l00530"></a>00530                 <span class="keywordtype">double</span> weightSeen = activeLearningNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a407cdfb074879e0f84460dee8ae06b04">getWeightSeen</a>();
<a name="l00531"></a>00531                 <span class="keywordflow">if</span> (weightSeen
<a name="l00532"></a>00532                         - activeLearningNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ab9bd87465e305bfbfb632141f4848479">getWeightSeenAtLastSplitEvaluation</a>() &gt;= this.gracePeriodOption.getValue()) {
<a name="l00533"></a>00533                     attemptToSplit(activeLearningNode, foundNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a3a0bc97df237c0096bd605aed30b3fff">parent</a>,
<a name="l00534"></a>00534                             foundNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a6368b90143e995b84b1c8351ae9449c8">parentBranch</a>);
<a name="l00535"></a>00535                     activeLearningNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#ac59198bb4fab83aa3cca200b376270e8">setWeightSeenAtLastSplitEvaluation</a>(weightSeen);
<a name="l00536"></a>00536                 }
<a name="l00537"></a>00537             }
<a name="l00538"></a>00538         }
<a name="l00539"></a>00539         <span class="keywordflow">if</span> (this.trainingWeightSeenByModel
<a name="l00540"></a>00540                 % this.memoryEstimatePeriodOption.getValue() == 0) {
<a name="l00541"></a>00541             estimateModelByteSizes();
<a name="l00542"></a>00542         }
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     @Override
<a name="l00546"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a2bcda84a5c9a13d9d8baf06246a25354">00546</a>     <span class="keyword">public</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a2bcda84a5c9a13d9d8baf06246a25354" title="Predicts the class memberships for a given instance.">getVotesForInstance</a>(Instance inst) {
<a name="l00547"></a>00547         <span class="keywordflow">if</span> (this.treeRoot != null) {
<a name="l00548"></a>00548             <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a> foundNode = this.treeRoot.filterInstanceToLeaf(inst,
<a name="l00549"></a>00549                     null, -1);
<a name="l00550"></a>00550             <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> leafNode = foundNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a9ebf6089327796a03e866e0534c8f32c">node</a>;
<a name="l00551"></a>00551             <span class="keywordflow">if</span> (leafNode == null) {
<a name="l00552"></a>00552                 leafNode = foundNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a3a0bc97df237c0096bd605aed30b3fff">parent</a>;
<a name="l00553"></a>00553             }
<a name="l00554"></a>00554             <span class="keywordflow">return</span> leafNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a4ecd808563ce6313822dfff3865bca69">getClassVotes</a>(inst, <span class="keyword">this</span>);
<a name="l00555"></a>00555         }
<a name="l00556"></a>00556         <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">double</span>[0];
<a name="l00557"></a>00557     }
<a name="l00558"></a>00558 
<a name="l00559"></a>00559     @Override
<a name="l00560"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a085ffc26aa24ca5bd311cada7f57f80c">00560</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>[] <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a085ffc26aa24ca5bd311cada7f57f80c" title="Gets the current measurements of this classifier.">getModelMeasurementsImpl</a>() {
<a name="l00561"></a>00561         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>[]{
<a name="l00562"></a>00562                     <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>(<span class="stringliteral">&quot;tree size (nodes)&quot;</span>, this.decisionNodeCount
<a name="l00563"></a>00563                     + this.activeLeafNodeCount + this.inactiveLeafNodeCount),
<a name="l00564"></a>00564                     <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>(<span class="stringliteral">&quot;tree size (leaves)&quot;</span>, this.activeLeafNodeCount
<a name="l00565"></a>00565                     + this.inactiveLeafNodeCount),
<a name="l00566"></a>00566                     <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>(<span class="stringliteral">&quot;active learning leaves&quot;</span>,
<a name="l00567"></a>00567                     this.activeLeafNodeCount),
<a name="l00568"></a>00568                     <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>(<span class="stringliteral">&quot;tree depth&quot;</span>, measureTreeDepth()),
<a name="l00569"></a>00569                     <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>(<span class="stringliteral">&quot;active leaf byte size estimate&quot;</span>,
<a name="l00570"></a>00570                     this.activeLeafByteSizeEstimate),
<a name="l00571"></a>00571                     <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>(<span class="stringliteral">&quot;inactive leaf byte size estimate&quot;</span>,
<a name="l00572"></a>00572                     this.inactiveLeafByteSizeEstimate),
<a name="l00573"></a>00573                     <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1Measurement.html" title="Class for storing an evaluation measurement.">Measurement</a>(<span class="stringliteral">&quot;byte size estimate overhead&quot;</span>,
<a name="l00574"></a>00574                     this.byteSizeEstimateOverheadFraction)};
<a name="l00575"></a>00575     }
<a name="l00576"></a>00576 
<a name="l00577"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ab0dc37f3e597d79f13f4fa03244cb8b6">00577</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ab0dc37f3e597d79f13f4fa03244cb8b6">measureTreeDepth</a>() {
<a name="l00578"></a>00578         <span class="keywordflow">if</span> (this.treeRoot != null) {
<a name="l00579"></a>00579             <span class="keywordflow">return</span> this.treeRoot.subtreeDepth();
<a name="l00580"></a>00580         }
<a name="l00581"></a>00581         <span class="keywordflow">return</span> 0;
<a name="l00582"></a>00582     }
<a name="l00583"></a>00583 
<a name="l00584"></a>00584     @Override
<a name="l00585"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a5afb7cd5b68065d3ad6af6b42b3aea3a">00585</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a5afb7cd5b68065d3ad6af6b42b3aea3a" title="Returns a string representation of the model.">getModelDescription</a>(StringBuilder out, <span class="keywordtype">int</span> indent) {
<a name="l00586"></a>00586         this.treeRoot.describeSubtree(<span class="keyword">this</span>, out, indent);
<a name="l00587"></a>00587     }
<a name="l00588"></a>00588 
<a name="l00589"></a>00589     @Override
<a name="l00590"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a94f1683d7e1ddf82d2c46cc5f9ee0c0e">00590</a>     <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a94f1683d7e1ddf82d2c46cc5f9ee0c0e" title="Gets whether this classifier needs a random seed.">isRandomizable</a>() {
<a name="l00591"></a>00591         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00592"></a>00592     }
<a name="l00593"></a>00593 
<a name="l00594"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a742268cf32558a51a6434bc4cfb4a2d2">00594</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">double</span> computeHoeffdingBound(<span class="keywordtype">double</span> range, <span class="keywordtype">double</span> confidence,
<a name="l00595"></a>00595             <span class="keywordtype">double</span> n) {
<a name="l00596"></a>00596         <span class="keywordflow">return</span> Math.sqrt(((range * range) * Math.log(1.0 / confidence))
<a name="l00597"></a>00597                 / (2.0 * n));
<a name="l00598"></a>00598     }
<a name="l00599"></a>00599 
<a name="l00600"></a>00600     <span class="comment">//Procedure added for Hoeffding Adaptive Trees (ADWIN)</span>
<a name="l00601"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a6fc8c646d4d508ef31e3fd252f0479d2">00601</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> newSplitNode(<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html" title="Abstract conditional test for instances to use to split nodes in Hoeffding trees...">InstanceConditionalTest</a> splitTest,
<a name="l00602"></a>00602             <span class="keywordtype">double</span>[] classObservations, <span class="keywordtype">int</span> size) {
<a name="l00603"></a>00603         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a>(splitTest, classObservations, size);
<a name="l00604"></a>00604     }
<a name="l00605"></a>00605     
<a name="l00606"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a6b0f2baf66d908237c1e0bf9afab0b00">00606</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> newSplitNode(<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html" title="Abstract conditional test for instances to use to split nodes in Hoeffding trees...">InstanceConditionalTest</a> splitTest,
<a name="l00607"></a>00607             <span class="keywordtype">double</span>[] classObservations) {
<a name="l00608"></a>00608         <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a>(splitTest, classObservations);
<a name="l00609"></a>00609     }
<a name="l00610"></a>00610     
<a name="l00611"></a>00611 
<a name="l00612"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a3df864b09b54a38dc4af72457af2df9a">00612</a>     <span class="keyword">protected</span> <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a3df864b09b54a38dc4af72457af2df9a">newNominalClassObserver</a>() {
<a name="l00613"></a>00613         <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a> nominalClassObserver = (<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a>) getPreparedClassOption(this.nominalEstimatorOption);
<a name="l00614"></a>00614         <span class="keywordflow">return</span> (<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a>) nominalClassObserver.<a class="code" href="interfacemoa_1_1options_1_1OptionHandler.html#a96fd6b38c56141192588e19e05e43f17" title="This method produces a copy of this object.">copy</a>();
<a name="l00615"></a>00615     }
<a name="l00616"></a>00616 
<a name="l00617"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a43dc714f59552a9e6814c79cb1cff40b">00617</a>     <span class="keyword">protected</span> <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a43dc714f59552a9e6814c79cb1cff40b">newNumericClassObserver</a>() {
<a name="l00618"></a>00618         <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a> numericClassObserver = (<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a>) getPreparedClassOption(this.numericEstimatorOption);
<a name="l00619"></a>00619         <span class="keywordflow">return</span> (<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1attributeclassobservers_1_1AttributeClassObserver.html" title="Interface for observing the class data distribution for an attribute.">AttributeClassObserver</a>) numericClassObserver.<a class="code" href="interfacemoa_1_1options_1_1OptionHandler.html#a96fd6b38c56141192588e19e05e43f17" title="This method produces a copy of this object.">copy</a>();
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621 
<a name="l00622"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a1167e8f332be16f1b9d07c55d94bd0ac">00622</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> attemptToSplit(<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a> node, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> parent,
<a name="l00623"></a>00623             <span class="keywordtype">int</span> parentIndex) {
<a name="l00624"></a>00624         <span class="keywordflow">if</span> (!node.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#ae2048e89b6d4929274af17472f7b7a4e">observedClassDistributionIsPure</a>()) {
<a name="l00625"></a>00625             <a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1splitcriteria_1_1SplitCriterion.html" title="Interface for computing splitting criteria.">SplitCriterion</a> splitCriterion = (<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1splitcriteria_1_1SplitCriterion.html" title="Interface for computing splitting criteria.">SplitCriterion</a>) getPreparedClassOption(this.splitCriterionOption);
<a name="l00626"></a>00626             <a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html" title="Class for computing attribute split suggestions given a split test.">AttributeSplitSuggestion</a>[] bestSplitSuggestions = node.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#aafe42fb1a0fc6d17021a314209ca0358">getBestSplitSuggestions</a>(splitCriterion, <span class="keyword">this</span>);
<a name="l00627"></a>00627             Arrays.sort(bestSplitSuggestions);
<a name="l00628"></a>00628             <span class="keywordtype">boolean</span> shouldSplit = <span class="keyword">false</span>;
<a name="l00629"></a>00629             <span class="keywordflow">if</span> (bestSplitSuggestions.length &lt; 2) {
<a name="l00630"></a>00630                 shouldSplit = bestSplitSuggestions.length &gt; 0;
<a name="l00631"></a>00631             } <span class="keywordflow">else</span> {
<a name="l00632"></a>00632                 <span class="keywordtype">double</span> hoeffdingBound = computeHoeffdingBound(splitCriterion.<a class="code" href="interfacemoa_1_1classifiers_1_1core_1_1splitcriteria_1_1SplitCriterion.html#af4602783ac8df6d5fed77c9b828aa4b4" title="Computes the range of splitting merit.">getRangeOfMerit</a>(node.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a3f834197e0bfe00ec042eb9bdab674fe">getObservedClassDistribution</a>()),
<a name="l00633"></a>00633                         this.splitConfidenceOption.getValue(), node.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a407cdfb074879e0f84460dee8ae06b04">getWeightSeen</a>());
<a name="l00634"></a>00634                 <a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html" title="Class for computing attribute split suggestions given a split test.">AttributeSplitSuggestion</a> bestSuggestion = bestSplitSuggestions[bestSplitSuggestions.length - 1];
<a name="l00635"></a>00635                 <a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html" title="Class for computing attribute split suggestions given a split test.">AttributeSplitSuggestion</a> secondBestSuggestion = bestSplitSuggestions[bestSplitSuggestions.length - 2];
<a name="l00636"></a>00636                 <span class="keywordflow">if</span> ((bestSuggestion.merit - secondBestSuggestion.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#a4ca19b144787ff01d446355dcb95fcdc">merit</a> &gt; hoeffdingBound)
<a name="l00637"></a>00637                         || (hoeffdingBound &lt; this.tieThresholdOption.getValue())) {
<a name="l00638"></a>00638                     shouldSplit = <span class="keyword">true</span>;
<a name="l00639"></a>00639                 }
<a name="l00640"></a>00640                 <span class="comment">// }</span>
<a name="l00641"></a>00641                 <span class="keywordflow">if</span> ((this.removePoorAttsOption != null)
<a name="l00642"></a>00642                         &amp;&amp; this.removePoorAttsOption.isSet()) {
<a name="l00643"></a>00643                     Set&lt;Integer&gt; poorAtts = <span class="keyword">new</span> HashSet&lt;Integer&gt;();
<a name="l00644"></a>00644                     <span class="comment">// scan 1 - add any poor to set</span>
<a name="l00645"></a>00645                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bestSplitSuggestions.length; i++) {
<a name="l00646"></a>00646                         <span class="keywordflow">if</span> (bestSplitSuggestions[i].splitTest != null) {
<a name="l00647"></a>00647                             <span class="keywordtype">int</span>[] splitAtts = bestSplitSuggestions[i].<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#a5f3ae3a12fdc128e8a86a1fa2ddafffc">splitTest</a>.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html#af3a4e494b9e2e3f981b45a237858f4cd" title="Returns an array with the attributes that the test depends on.">getAttsTestDependsOn</a>();
<a name="l00648"></a>00648                             <span class="keywordflow">if</span> (splitAtts.length == 1) {
<a name="l00649"></a>00649                                 <span class="keywordflow">if</span> (bestSuggestion.merit
<a name="l00650"></a>00650                                         - bestSplitSuggestions[i].<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#a4ca19b144787ff01d446355dcb95fcdc">merit</a> &gt; hoeffdingBound) {
<a name="l00651"></a>00651                                     poorAtts.add(<span class="keyword">new</span> Integer(splitAtts[0]));
<a name="l00652"></a>00652                                 }
<a name="l00653"></a>00653                             }
<a name="l00654"></a>00654                         }
<a name="l00655"></a>00655                     }
<a name="l00656"></a>00656                     <span class="comment">// scan 2 - remove good ones from set</span>
<a name="l00657"></a>00657                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bestSplitSuggestions.length; i++) {
<a name="l00658"></a>00658                         <span class="keywordflow">if</span> (bestSplitSuggestions[i].splitTest != null) {
<a name="l00659"></a>00659                             <span class="keywordtype">int</span>[] splitAtts = bestSplitSuggestions[i].<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#a5f3ae3a12fdc128e8a86a1fa2ddafffc">splitTest</a>.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1conditionaltests_1_1InstanceConditionalTest.html#af3a4e494b9e2e3f981b45a237858f4cd" title="Returns an array with the attributes that the test depends on.">getAttsTestDependsOn</a>();
<a name="l00660"></a>00660                             <span class="keywordflow">if</span> (splitAtts.length == 1) {
<a name="l00661"></a>00661                                 <span class="keywordflow">if</span> (bestSuggestion.merit
<a name="l00662"></a>00662                                         - bestSplitSuggestions[i].<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#a4ca19b144787ff01d446355dcb95fcdc">merit</a> &lt; hoeffdingBound) {
<a name="l00663"></a>00663                                     poorAtts.remove(<span class="keyword">new</span> Integer(splitAtts[0]));
<a name="l00664"></a>00664                                 }
<a name="l00665"></a>00665                             }
<a name="l00666"></a>00666                         }
<a name="l00667"></a>00667                     }
<a name="l00668"></a>00668                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> poorAtt : poorAtts) {
<a name="l00669"></a>00669                         node.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html#a69b39f90da169dd44292df54d98adbda">disableAttribute</a>(poorAtt);
<a name="l00670"></a>00670                     }
<a name="l00671"></a>00671                 }
<a name="l00672"></a>00672             }
<a name="l00673"></a>00673             <span class="keywordflow">if</span> (shouldSplit) {
<a name="l00674"></a>00674                 <a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html" title="Class for computing attribute split suggestions given a split test.">AttributeSplitSuggestion</a> splitDecision = bestSplitSuggestions[bestSplitSuggestions.length - 1];
<a name="l00675"></a>00675                 <span class="keywordflow">if</span> (splitDecision.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#a5f3ae3a12fdc128e8a86a1fa2ddafffc">splitTest</a> == null) {
<a name="l00676"></a>00676                     <span class="comment">// preprune - null wins</span>
<a name="l00677"></a>00677                     deactivateLearningNode(node, parent, parentIndex);
<a name="l00678"></a>00678                 } <span class="keywordflow">else</span> {
<a name="l00679"></a>00679                     <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> newSplit = newSplitNode(splitDecision.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#a5f3ae3a12fdc128e8a86a1fa2ddafffc">splitTest</a>,
<a name="l00680"></a>00680                             node.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a3f834197e0bfe00ec042eb9bdab674fe">getObservedClassDistribution</a>(),splitDecision.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#afcced50eef2981b7a7a30e2a40086e41">numSplits</a>() );
<a name="l00681"></a>00681                     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; splitDecision.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#afcced50eef2981b7a7a30e2a40086e41">numSplits</a>(); i++) {
<a name="l00682"></a>00682                         <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> newChild = newLearningNode(splitDecision.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#ae715b4c66ed0aa5f3d05e5a101c93a61">resultingClassDistributionFromSplit</a>(i));
<a name="l00683"></a>00683                         newSplit.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a096ddc519733df2bfbf4f4f7890d2c66">setChild</a>(i, newChild);
<a name="l00684"></a>00684                     }
<a name="l00685"></a>00685                     this.activeLeafNodeCount--;
<a name="l00686"></a>00686                     this.decisionNodeCount++;
<a name="l00687"></a>00687                     this.activeLeafNodeCount += splitDecision.<a class="code" href="classmoa_1_1classifiers_1_1core_1_1AttributeSplitSuggestion.html#afcced50eef2981b7a7a30e2a40086e41">numSplits</a>();
<a name="l00688"></a>00688                     <span class="keywordflow">if</span> (parent == null) {
<a name="l00689"></a>00689                         this.treeRoot = newSplit;
<a name="l00690"></a>00690                     } <span class="keywordflow">else</span> {
<a name="l00691"></a>00691                         parent.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a096ddc519733df2bfbf4f4f7890d2c66">setChild</a>(parentIndex, newSplit);
<a name="l00692"></a>00692                     }
<a name="l00693"></a>00693                 }
<a name="l00694"></a>00694                 <span class="comment">// manage memory</span>
<a name="l00695"></a>00695                 enforceTrackerLimit();
<a name="l00696"></a>00696             }
<a name="l00697"></a>00697         }
<a name="l00698"></a>00698     }
<a name="l00699"></a>00699 
<a name="l00700"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ad3ce5f45815584286223e5e1280bcbb0">00700</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ad3ce5f45815584286223e5e1280bcbb0">enforceTrackerLimit</a>() {
<a name="l00701"></a>00701         <span class="keywordflow">if</span> ((this.inactiveLeafNodeCount &gt; 0)
<a name="l00702"></a>00702                 || ((this.activeLeafNodeCount * this.activeLeafByteSizeEstimate + this.inactiveLeafNodeCount
<a name="l00703"></a>00703                 * this.inactiveLeafByteSizeEstimate)
<a name="l00704"></a>00704                 * this.byteSizeEstimateOverheadFraction &gt; this.maxByteSizeOption.getValue())) {
<a name="l00705"></a>00705             <span class="keywordflow">if</span> (this.stopMemManagementOption.isSet()) {
<a name="l00706"></a>00706                 this.growthAllowed = <span class="keyword">false</span>;
<a name="l00707"></a>00707                 <span class="keywordflow">return</span>;
<a name="l00708"></a>00708             }
<a name="l00709"></a>00709             <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>[] learningNodes = findLearningNodes();
<a name="l00710"></a>00710             Arrays.sort(learningNodes, <span class="keyword">new</span> Comparator&lt;FoundNode&gt;() {
<a name="l00711"></a>00711 
<a name="l00712"></a>00712                 @Override
<a name="l00713"></a>00713                 <span class="keyword">public</span> <span class="keywordtype">int</span> compare(<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a> fn1, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a> fn2) {
<a name="l00714"></a>00714                     <span class="keywordflow">return</span> Double.compare(fn1.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a9ebf6089327796a03e866e0534c8f32c">node</a>.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a2dd4315a90707c43f3e92a4456f712d8">calculatePromise</a>(), fn2.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html#a9ebf6089327796a03e866e0534c8f32c">node</a>.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a2dd4315a90707c43f3e92a4456f712d8">calculatePromise</a>());
<a name="l00715"></a>00715                 }
<a name="l00716"></a>00716             });
<a name="l00717"></a>00717             <span class="keywordtype">int</span> maxActive = 0;
<a name="l00718"></a>00718             <span class="keywordflow">while</span> (maxActive &lt; learningNodes.length) {
<a name="l00719"></a>00719                 maxActive++;
<a name="l00720"></a>00720                 <span class="keywordflow">if</span> ((maxActive * this.activeLeafByteSizeEstimate + (learningNodes.length - maxActive)
<a name="l00721"></a>00721                         * this.inactiveLeafByteSizeEstimate)
<a name="l00722"></a>00722                         * this.byteSizeEstimateOverheadFraction &gt; this.maxByteSizeOption.getValue()) {
<a name="l00723"></a>00723                     maxActive--;
<a name="l00724"></a>00724                     <span class="keywordflow">break</span>;
<a name="l00725"></a>00725                 }
<a name="l00726"></a>00726             }
<a name="l00727"></a>00727             <span class="keywordtype">int</span> cutoff = learningNodes.length - maxActive;
<a name="l00728"></a>00728             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; cutoff; i++) {
<a name="l00729"></a>00729                 <span class="keywordflow">if</span> (learningNodes[i].node instanceof <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a>) {
<a name="l00730"></a>00730                     deactivateLearningNode(
<a name="l00731"></a>00731                             (ActiveLearningNode) learningNodes[i].node,
<a name="l00732"></a>00732                             learningNodes[i].parent,
<a name="l00733"></a>00733                             learningNodes[i].parentBranch);
<a name="l00734"></a>00734                 }
<a name="l00735"></a>00735             }
<a name="l00736"></a>00736             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = cutoff; i &lt; learningNodes.length; i++) {
<a name="l00737"></a>00737                 <span class="keywordflow">if</span> (learningNodes[i].node instanceof <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html">InactiveLearningNode</a>) {
<a name="l00738"></a>00738                     activateLearningNode(
<a name="l00739"></a>00739                             (InactiveLearningNode) learningNodes[i].node,
<a name="l00740"></a>00740                             learningNodes[i].parent,
<a name="l00741"></a>00741                             learningNodes[i].parentBranch);
<a name="l00742"></a>00742                 }
<a name="l00743"></a>00743             }
<a name="l00744"></a>00744         }
<a name="l00745"></a>00745     }
<a name="l00746"></a>00746 
<a name="l00747"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#acee5c29f3539f6b07e51dbdd22f6ea9f">00747</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#acee5c29f3539f6b07e51dbdd22f6ea9f">estimateModelByteSizes</a>() {
<a name="l00748"></a>00748         <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>[] learningNodes = findLearningNodes();
<a name="l00749"></a>00749         <span class="keywordtype">long</span> totalActiveSize = 0;
<a name="l00750"></a>00750         <span class="keywordtype">long</span> totalInactiveSize = 0;
<a name="l00751"></a>00751         <span class="keywordflow">for</span> (<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a> foundNode : learningNodes) {
<a name="l00752"></a>00752             <span class="keywordflow">if</span> (foundNode.node instanceof <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a>) {
<a name="l00753"></a>00753                 totalActiveSize += <a class="code" href="classmoa_1_1core_1_1SizeOf.html" title="Helper class for Maxim Zakharenkov&amp;#39;s SizeOf agent.">SizeOf</a>.fullSizeOf(foundNode.node);
<a name="l00754"></a>00754             } <span class="keywordflow">else</span> {
<a name="l00755"></a>00755                 totalInactiveSize += <a class="code" href="classmoa_1_1core_1_1SizeOf.html" title="Helper class for Maxim Zakharenkov&amp;#39;s SizeOf agent.">SizeOf</a>.fullSizeOf(foundNode.node);
<a name="l00756"></a>00756             }
<a name="l00757"></a>00757         }
<a name="l00758"></a>00758         <span class="keywordflow">if</span> (totalActiveSize &gt; 0) {
<a name="l00759"></a>00759             this.activeLeafByteSizeEstimate = (double) totalActiveSize
<a name="l00760"></a>00760                     / this.activeLeafNodeCount;
<a name="l00761"></a>00761         }
<a name="l00762"></a>00762         <span class="keywordflow">if</span> (totalInactiveSize &gt; 0) {
<a name="l00763"></a>00763             this.inactiveLeafByteSizeEstimate = (double) totalInactiveSize
<a name="l00764"></a>00764                     / this.inactiveLeafNodeCount;
<a name="l00765"></a>00765         }
<a name="l00766"></a>00766         <span class="keywordtype">int</span> actualModelSize = this.measureByteSize();
<a name="l00767"></a>00767         <span class="keywordtype">double</span> estimatedModelSize = (this.activeLeafNodeCount
<a name="l00768"></a>00768                 * this.activeLeafByteSizeEstimate + this.inactiveLeafNodeCount
<a name="l00769"></a>00769                 * this.inactiveLeafByteSizeEstimate);
<a name="l00770"></a>00770         this.byteSizeEstimateOverheadFraction = actualModelSize
<a name="l00771"></a>00771                 / estimatedModelSize;
<a name="l00772"></a>00772         <span class="keywordflow">if</span> (actualModelSize &gt; this.maxByteSizeOption.getValue()) {
<a name="l00773"></a>00773             enforceTrackerLimit();
<a name="l00774"></a>00774         }
<a name="l00775"></a>00775     }
<a name="l00776"></a>00776 
<a name="l00777"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#aeb158b73da65b2184d87f09896b66308">00777</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#aeb158b73da65b2184d87f09896b66308">deactivateAllLeaves</a>() {
<a name="l00778"></a>00778         <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>[] learningNodes = findLearningNodes();
<a name="l00779"></a>00779         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; learningNodes.length; i++) {
<a name="l00780"></a>00780             <span class="keywordflow">if</span> (learningNodes[i].node instanceof <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a>) {
<a name="l00781"></a>00781                 deactivateLearningNode(
<a name="l00782"></a>00782                         (ActiveLearningNode) learningNodes[i].node,
<a name="l00783"></a>00783                         learningNodes[i].parent, learningNodes[i].parentBranch);
<a name="l00784"></a>00784             }
<a name="l00785"></a>00785         }
<a name="l00786"></a>00786     }
<a name="l00787"></a>00787 
<a name="l00788"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#aa2bf9fba6c0b3e4b76158001680c5327">00788</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> deactivateLearningNode(<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a> toDeactivate,
<a name="l00789"></a>00789             <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> parent, <span class="keywordtype">int</span> parentBranch) {
<a name="l00790"></a>00790         <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> newLeaf = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html">InactiveLearningNode</a>(toDeactivate.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a3f834197e0bfe00ec042eb9bdab674fe">getObservedClassDistribution</a>());
<a name="l00791"></a>00791         <span class="keywordflow">if</span> (parent == null) {
<a name="l00792"></a>00792             this.treeRoot = newLeaf;
<a name="l00793"></a>00793         } <span class="keywordflow">else</span> {
<a name="l00794"></a>00794             parent.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a096ddc519733df2bfbf4f4f7890d2c66">setChild</a>(parentBranch, newLeaf);
<a name="l00795"></a>00795         }
<a name="l00796"></a>00796         this.activeLeafNodeCount--;
<a name="l00797"></a>00797         this.inactiveLeafNodeCount++;
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799 
<a name="l00800"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a0fb3d76800bd3b5a39f3e8c3324187b8">00800</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> activateLearningNode(<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1InactiveLearningNode.html">InactiveLearningNode</a> toActivate,
<a name="l00801"></a>00801             <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> parent, <span class="keywordtype">int</span> parentBranch) {
<a name="l00802"></a>00802         <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> newLeaf = newLearningNode(toActivate.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html#a3f834197e0bfe00ec042eb9bdab674fe">getObservedClassDistribution</a>());
<a name="l00803"></a>00803         <span class="keywordflow">if</span> (parent == null) {
<a name="l00804"></a>00804             this.treeRoot = newLeaf;
<a name="l00805"></a>00805         } <span class="keywordflow">else</span> {
<a name="l00806"></a>00806             parent.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a096ddc519733df2bfbf4f4f7890d2c66">setChild</a>(parentBranch, newLeaf);
<a name="l00807"></a>00807         }
<a name="l00808"></a>00808         this.activeLeafNodeCount++;
<a name="l00809"></a>00809         this.inactiveLeafNodeCount--;
<a name="l00810"></a>00810     }
<a name="l00811"></a>00811 
<a name="l00812"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ad056309d625aeda1975b850885fe15b6">00812</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>[] <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#ad056309d625aeda1975b850885fe15b6">findLearningNodes</a>() {
<a name="l00813"></a>00813         List&lt;FoundNode&gt; foundList = <span class="keyword">new</span> LinkedList&lt;FoundNode&gt;();
<a name="l00814"></a>00814         findLearningNodes(this.treeRoot, null, -1, foundList);
<a name="l00815"></a>00815         <span class="keywordflow">return</span> foundList.toArray(<span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>[foundList.size()]);
<a name="l00816"></a>00816     }
<a name="l00817"></a>00817 
<a name="l00818"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#aebce11aac82747ff58a9375b11b7c857">00818</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> findLearningNodes(<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1Node.html">Node</a> node, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a> parent,
<a name="l00819"></a>00819             <span class="keywordtype">int</span> parentBranch, List&lt;FoundNode&gt; found) {
<a name="l00820"></a>00820         <span class="keywordflow">if</span> (node != null) {
<a name="l00821"></a>00821             <span class="keywordflow">if</span> (node instanceof <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">LearningNode</a>) {
<a name="l00822"></a>00822                 found.add(<span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1FoundNode.html">FoundNode</a>(node, parent, parentBranch));
<a name="l00823"></a>00823             }
<a name="l00824"></a>00824             <span class="keywordflow">if</span> (node instanceof <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html">SplitNode</a>) {
<a name="l00825"></a>00825                 SplitNode splitNode = (SplitNode) node;
<a name="l00826"></a>00826                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; splitNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#a9edff82f8eceedb3baae2395c959f259">numChildren</a>(); i++) {
<a name="l00827"></a>00827                     findLearningNodes(splitNode.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1SplitNode.html#ad22dc2cda35c63546ea4d810e793fd99">getChild</a>(i), splitNode, i,
<a name="l00828"></a>00828                             found);
<a name="l00829"></a>00829                 }
<a name="l00830"></a>00830             }
<a name="l00831"></a>00831         }
<a name="l00832"></a>00832     }
<a name="l00833"></a>00833 
<a name="l00834"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a348416ff8a5c2444e5e815191e15f63f">00834</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1MultiChoiceOption.html" title="Multi choice option.">MultiChoiceOption</a> leafpredictionOption = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1MultiChoiceOption.html" title="Multi choice option.">MultiChoiceOption</a>(
<a name="l00835"></a>00835             <span class="stringliteral">&quot;leafprediction&quot;</span>, <span class="charliteral">&apos;l&apos;</span>, <span class="stringliteral">&quot;Leaf prediction to use.&quot;</span>, <span class="keyword">new</span> String[]{
<a name="l00836"></a>00836                 <span class="stringliteral">&quot;MC&quot;</span>, <span class="stringliteral">&quot;NB&quot;</span>, <span class="stringliteral">&quot;NBAdaptive&quot;</span>}, <span class="keyword">new</span> String[]{
<a name="l00837"></a>00837                 <span class="stringliteral">&quot;Majority class&quot;</span>,
<a name="l00838"></a>00838                 <span class="stringliteral">&quot;Naive Bayes&quot;</span>,
<a name="l00839"></a>00839                 <span class="stringliteral">&quot;Naive Bayes Adaptive&quot;</span>}, 2);
<a name="l00840"></a>00840 
<a name="l00841"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a53e901c48cc00ed10742189b76b850ca">00841</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> nbThresholdOption = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(
<a name="l00842"></a>00842             <span class="stringliteral">&quot;nbThreshold&quot;</span>,
<a name="l00843"></a>00843             <span class="charliteral">&apos;q&apos;</span>,
<a name="l00844"></a>00844             <span class="stringliteral">&quot;The number of instances a leaf should observe before permitting Naive Bayes.&quot;</span>,
<a name="l00845"></a>00845             0, 0, Integer.MAX_VALUE);
<a name="l00846"></a>00846 
<a name="l00847"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html">00847</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html">LearningNodeNB</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a> {
<a name="l00848"></a>00848 
<a name="l00849"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html#ab76257112cb5a678cdab125c17476e37">00849</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> serialVersionUID = 1L;
<a name="l00850"></a>00850 
<a name="l00851"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html#aa8b8c6ee2df0e3a5cc039458dcc8552f">00851</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html#aa8b8c6ee2df0e3a5cc039458dcc8552f">LearningNodeNB</a>(<span class="keywordtype">double</span>[] initialClassObservations) {
<a name="l00852"></a>00852             super(initialClassObservations);
<a name="l00853"></a>00853         }
<a name="l00854"></a>00854 
<a name="l00855"></a>00855         @Override
<a name="l00856"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html#a7d8bc661d29e6f46ad02993ae34161fa">00856</a>         <span class="keyword">public</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html#a7d8bc661d29e6f46ad02993ae34161fa">getClassVotes</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht) {
<a name="l00857"></a>00857             <span class="keywordflow">if</span> (getWeightSeen() &gt;= ht.<a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a53e901c48cc00ed10742189b76b850ca">nbThresholdOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()) {
<a name="l00858"></a>00858                 <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1bayes_1_1NaiveBayes.html" title="Naive Bayes incremental learner.">NaiveBayes</a>.doNaiveBayesPrediction(inst,
<a name="l00859"></a>00859                         this.observedClassDistribution,
<a name="l00860"></a>00860                         this.attributeObservers);
<a name="l00861"></a>00861             }
<a name="l00862"></a>00862             <span class="keywordflow">return</span> super.getClassVotes(inst, ht);
<a name="l00863"></a>00863         }
<a name="l00864"></a>00864 
<a name="l00865"></a>00865         @Override
<a name="l00866"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html#a513a9f114dc193394859e306829e0b2b">00866</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html#a513a9f114dc193394859e306829e0b2b">disableAttribute</a>(<span class="keywordtype">int</span> attIndex) {
<a name="l00867"></a>00867             <span class="comment">// should not disable poor atts - they are used in NB calc</span>
<a name="l00868"></a>00868         }
<a name="l00869"></a>00869     }
<a name="l00870"></a>00870 
<a name="l00871"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html">00871</a>     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html">LearningNodeNBAdaptive</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html">LearningNodeNB</a> {
<a name="l00872"></a>00872 
<a name="l00873"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#ac2ddce0b3fb710bbc398154a6970e892">00873</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> serialVersionUID = 1L;
<a name="l00874"></a>00874 
<a name="l00875"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#ae56c6ed53e7f2efca6a9293511a8d369">00875</a>         <span class="keyword">protected</span> <span class="keywordtype">double</span> mcCorrectWeight = 0.0;
<a name="l00876"></a>00876 
<a name="l00877"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#ad5ec0af5636985d65bc90e4352d8753c">00877</a>         <span class="keyword">protected</span> <span class="keywordtype">double</span> nbCorrectWeight = 0.0;
<a name="l00878"></a>00878 
<a name="l00879"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#ad61f906fd107d50685dfb39b5481c4c5">00879</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#ad61f906fd107d50685dfb39b5481c4c5">LearningNodeNBAdaptive</a>(<span class="keywordtype">double</span>[] initialClassObservations) {
<a name="l00880"></a>00880             super(initialClassObservations);
<a name="l00881"></a>00881         }
<a name="l00882"></a>00882 
<a name="l00883"></a>00883         @Override
<a name="l00884"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#aa9e11d746f67528b398fe65e5ba8fb61">00884</a>         <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#aa9e11d746f67528b398fe65e5ba8fb61">learnFromInstance</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht) {
<a name="l00885"></a>00885             <span class="keywordtype">int</span> trueClass = (int) inst.classValue();
<a name="l00886"></a>00886             <span class="keywordflow">if</span> (this.observedClassDistribution.maxIndex() == trueClass) {
<a name="l00887"></a>00887                 this.mcCorrectWeight += inst.weight();
<a name="l00888"></a>00888             }
<a name="l00889"></a>00889             <span class="keywordflow">if</span> (Utils.maxIndex(<a class="code" href="classmoa_1_1classifiers_1_1bayes_1_1NaiveBayes.html" title="Naive Bayes incremental learner.">NaiveBayes</a>.doNaiveBayesPrediction(inst,
<a name="l00890"></a>00890                     <span class="keyword">this</span>.observedClassDistribution, <span class="keyword">this</span>.attributeObservers)) == trueClass) {
<a name="l00891"></a>00891                 this.nbCorrectWeight += inst.weight();
<a name="l00892"></a>00892             }
<a name="l00893"></a>00893             super.learnFromInstance(inst, ht);
<a name="l00894"></a>00894         }
<a name="l00895"></a>00895 
<a name="l00896"></a>00896         @Override
<a name="l00897"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#a356b323286aa88a68678951279cd4dd0">00897</a>         <span class="keyword">public</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html#a356b323286aa88a68678951279cd4dd0">getClassVotes</a>(Instance inst, <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html" title="Hoeffding Tree or VFDT.">HoeffdingTree</a> ht) {
<a name="l00898"></a>00898             <span class="keywordflow">if</span> (this.mcCorrectWeight &gt; this.nbCorrectWeight) {
<a name="l00899"></a>00899                 <span class="keywordflow">return</span> this.observedClassDistribution.getArrayCopy();
<a name="l00900"></a>00900             }
<a name="l00901"></a>00901             <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1bayes_1_1NaiveBayes.html" title="Naive Bayes incremental learner.">NaiveBayes</a>.doNaiveBayesPrediction(inst,
<a name="l00902"></a>00902                     this.observedClassDistribution, this.attributeObservers);
<a name="l00903"></a>00903         }
<a name="l00904"></a>00904     }
<a name="l00905"></a>00905 
<a name="l00906"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#af20989c02f545ac313c9544b526ad8f5">00906</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">LearningNode</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#af20989c02f545ac313c9544b526ad8f5">newLearningNode</a>() {
<a name="l00907"></a>00907         <span class="keywordflow">return</span> newLearningNode(<span class="keyword">new</span> <span class="keywordtype">double</span>[0]);
<a name="l00908"></a>00908     }
<a name="l00909"></a>00909 
<a name="l00910"></a><a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a0ea016216fd20d78d3b4ed89f62c2f11">00910</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">LearningNode</a> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree.html#a0ea016216fd20d78d3b4ed89f62c2f11">newLearningNode</a>(<span class="keywordtype">double</span>[] initialClassObservations) {
<a name="l00911"></a>00911         <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNode.html">LearningNode</a> ret;
<a name="l00912"></a>00912         <span class="keywordtype">int</span> predictionOption = this.leafpredictionOption.getChosenIndex();
<a name="l00913"></a>00913         <span class="keywordflow">if</span> (predictionOption == 0) { <span class="comment">//MC</span>
<a name="l00914"></a>00914             ret = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1ActiveLearningNode.html">ActiveLearningNode</a>(initialClassObservations);
<a name="l00915"></a>00915         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (predictionOption == 1) { <span class="comment">//NB</span>
<a name="l00916"></a>00916             ret = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNB.html">LearningNodeNB</a>(initialClassObservations);
<a name="l00917"></a>00917         } <span class="keywordflow">else</span> { <span class="comment">//NBAdaptive</span>
<a name="l00918"></a>00918             ret = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1trees_1_1HoeffdingTree_1_1LearningNodeNBAdaptive.html">LearningNodeNBAdaptive</a>(initialClassObservations);
<a name="l00919"></a>00919         }
<a name="l00920"></a>00920         <span class="keywordflow">return</span> ret;
<a name="l00921"></a>00921     }
<a name="l00922"></a>00922 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 26 Nov 2014 for MOA by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
