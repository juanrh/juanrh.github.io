<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MOA: main/java/moa/classifiers/lazy/neighboursearch/NearestNeighbourSearch.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>main/java/moa/classifiers/lazy/neighboursearch/NearestNeighbourSearch.java</h1><a href="NearestNeighbourSearch_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *   This program is free software: you can redistribute it and/or modify</span>
<a name="l00003"></a>00003 <span class="comment"> *   it under the terms of the GNU General Public License as published by</span>
<a name="l00004"></a>00004 <span class="comment"> *   the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00005"></a>00005 <span class="comment"> *   (at your option) any later version.</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> *   This program is distributed in the hope that it will be useful,</span>
<a name="l00008"></a>00008 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00009"></a>00009 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00010"></a>00010 <span class="comment"> *   GNU General Public License for more details.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *   You should have received a copy of the GNU General Public License</span>
<a name="l00013"></a>00013 <span class="comment"> *   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00014"></a>00014 <span class="comment"> */</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">/*</span>
<a name="l00017"></a>00017 <span class="comment"> *    NearestNeighbourSearch.java</span>
<a name="l00018"></a>00018 <span class="comment"> *    Copyright (C) 1999-2012 University of Waikato</span>
<a name="l00019"></a>00019 <span class="comment"> */</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="keyword">package </span>moa.classifiers.lazy.neighboursearch;
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="keyword">import</span> java.io.Serializable;
<a name="l00024"></a>00024 <span class="keyword">import</span> weka.core.Instance;
<a name="l00025"></a>00025 <span class="keyword">import</span> weka.core.Instances;
<a name="l00026"></a>00026 
<a name="l00034"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html">00034</a> <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html" title="Abstract class for nearest neighbour search.">NearestNeighbourSearch</a>
<a name="l00035"></a>00035   <span class="keyword">implements</span> Serializable{
<a name="l00036"></a>00036 
<a name="l00046"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html">00046</a>   <span class="keyword">protected</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html" title="A class for a heap to store the nearest k neighbours to an instance.">MyHeap</a>{
<a name="l00047"></a>00047     
<a name="l00049"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb">00049</a>     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[] = null;
<a name="l00050"></a>00050     
<a name="l00056"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a755609eb4f6385ef457005b3ef29b87a">00056</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a755609eb4f6385ef457005b3ef29b87a" title="constructor.">MyHeap</a>(<span class="keywordtype">int</span> maxSize) {
<a name="l00057"></a>00057       <span class="keywordflow">if</span>((maxSize%2)==0)
<a name="l00058"></a>00058         maxSize++;
<a name="l00059"></a>00059       
<a name="l00060"></a>00060       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a>[maxSize+1];
<a name="l00061"></a>00061       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0] = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a>(0, 0);
<a name="l00062"></a>00062     }
<a name="l00063"></a>00063     
<a name="l00069"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44">00069</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44" title="returns the size of the heap.">size</a>() {
<a name="l00070"></a>00070       <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>;
<a name="l00071"></a>00071     }
<a name="l00072"></a>00072     
<a name="l00078"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#aa3280d69fcf91e98c280c8e77843fcff">00078</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#aa3280d69fcf91e98c280c8e77843fcff" title="peeks at the first element.">peek</a>() {
<a name="l00079"></a>00079       <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[1];
<a name="l00080"></a>00080     }
<a name="l00081"></a>00081     
<a name="l00088"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a19758f98f6ae1f6144884dcdbfbe10d9">00088</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> <span class="keyword">get</span>() <span class="keywordflow">throws</span> Exception  {
<a name="l00089"></a>00089       <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].index==0)
<a name="l00090"></a>00090         <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;No elements present in the heap&quot;</span>);
<a name="l00091"></a>00091       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> r = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[1];
<a name="l00092"></a>00092       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[1] = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>];
<a name="l00093"></a>00093       m_heap[0].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>--;
<a name="l00094"></a>00094       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a1c0ce6fc344856e596eecd1aa711817c" title="performs downheap operation for the heap to maintian its properties.">downheap</a>();
<a name="l00095"></a>00095       <span class="keywordflow">return</span> r;
<a name="l00096"></a>00096     }
<a name="l00097"></a>00097     
<a name="l00105"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0c36c44e6651e71b1c82b32200c78d06">00105</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0c36c44e6651e71b1c82b32200c78d06" title="adds the value to the heap.">put</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">double</span> d) <span class="keywordflow">throws</span> Exception {
<a name="l00106"></a>00106       <span class="keywordflow">if</span>((<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].index+1)&gt;(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>.length-1))
<a name="l00107"></a>00107         <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;the number of elements cannot exceed the &quot;</span>+
<a name="l00108"></a>00108         <span class="stringliteral">&quot;initially set maximum limit&quot;</span>);
<a name="l00109"></a>00109       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>++;
<a name="l00110"></a>00110       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>] = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a>(i, d);
<a name="l00111"></a>00111       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ad88c01990eee35c64c5acc6113dc3aa4" title="performs upheap operation for the heap to maintian its properties.">upheap</a>();
<a name="l00112"></a>00112     }
<a name="l00113"></a>00113     
<a name="l00123"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a3868c19d0a061d4a74089d640216e84c">00123</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a3868c19d0a061d4a74089d640216e84c" title="Puts an element by substituting it in place of the top most element.">putBySubstitute</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">double</span> d) <span class="keywordflow">throws</span> Exception {
<a name="l00124"></a>00124       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> head = <span class="keyword">get</span>();
<a name="l00125"></a>00125       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0c36c44e6651e71b1c82b32200c78d06" title="adds the value to the heap.">put</a>(i, d);
<a name="l00126"></a>00126       <span class="comment">//      System.out.println(&quot;previous: &quot;+head.distance+&quot; current: &quot;+m_heap[1].distance);</span>
<a name="l00127"></a>00127       <span class="keywordflow">if</span>(head.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a> == <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[1].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>) { <span class="comment">//Utils.eq(head.distance, m_heap[1].distance)) {</span>
<a name="l00128"></a>00128         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a1dbdd504b8b5333acd68f107ecc9ef72" title="Stores kth nearest elements (if there are more than one).">putKthNearest</a>(head.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>, head.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>);
<a name="l00129"></a>00129       }
<a name="l00130"></a>00130       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(head.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a> &gt; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[1].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>) { <span class="comment">//Utils.gr(head.distance, m_heap[1].distance)) {</span>
<a name="l00131"></a>00131         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a> = null;
<a name="l00132"></a>00132         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529" title="The number of kth nearest elements.">m_KthNearestSize</a> = 0;
<a name="l00133"></a>00133         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab015a6465e197effb9b673f812d87054" title="the initial size of the heap.">initSize</a> = 10;
<a name="l00134"></a>00134       }
<a name="l00135"></a>00135       <span class="keywordflow">else</span> <span class="keywordflow">if</span>(head.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a> &lt; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[1].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>) {
<a name="l00136"></a>00136         <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;The substituted element is smaller than the &quot;</span>+
<a name="l00137"></a>00137         <span class="stringliteral">&quot;head element. put() should have been called &quot;</span>+
<a name="l00138"></a>00138         <span class="stringliteral">&quot;in place of putBySubstitute()&quot;</span>);
<a name="l00139"></a>00139       }
<a name="l00140"></a>00140     }
<a name="l00141"></a>00141     
<a name="l00143"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915">00143</a>     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a>[] = null;
<a name="l00144"></a>00144     
<a name="l00146"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529">00146</a>     <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529" title="The number of kth nearest elements.">m_KthNearestSize</a> = 0;
<a name="l00147"></a>00147     
<a name="l00149"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab015a6465e197effb9b673f812d87054">00149</a>     <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab015a6465e197effb9b673f812d87054" title="the initial size of the heap.">initSize</a>=10;
<a name="l00150"></a>00150 
<a name="l00157"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd">00157</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd" title="returns the number of k nearest.">noOfKthNearest</a>() {
<a name="l00158"></a>00158       <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529" title="The number of kth nearest elements.">m_KthNearestSize</a>;
<a name="l00159"></a>00159     }
<a name="l00160"></a>00160     
<a name="l00167"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a1dbdd504b8b5333acd68f107ecc9ef72">00167</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a1dbdd504b8b5333acd68f107ecc9ef72" title="Stores kth nearest elements (if there are more than one).">putKthNearest</a>(<span class="keywordtype">int</span> i,  <span class="keywordtype">double</span> d) {
<a name="l00168"></a>00168       <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a>==null) {
<a name="l00169"></a>00169         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a>[<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab015a6465e197effb9b673f812d87054" title="the initial size of the heap.">initSize</a>];
<a name="l00170"></a>00170       }
<a name="l00171"></a>00171       <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529" title="The number of kth nearest elements.">m_KthNearestSize</a>&gt;=<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a>.length) {
<a name="l00172"></a>00172         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab015a6465e197effb9b673f812d87054" title="the initial size of the heap.">initSize</a> += <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab015a6465e197effb9b673f812d87054" title="the initial size of the heap.">initSize</a>;
<a name="l00173"></a>00173         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> temp[] = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a>[<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab015a6465e197effb9b673f812d87054" title="the initial size of the heap.">initSize</a>];
<a name="l00174"></a>00174         System.arraycopy(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a>, 0, temp, 0, <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a>.length);
<a name="l00175"></a>00175         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a> = temp;
<a name="l00176"></a>00176       }
<a name="l00177"></a>00177       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a>[<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529" title="The number of kth nearest elements.">m_KthNearestSize</a>++] = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a>(i, d);
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179     
<a name="l00185"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a5923f7607c4a6fb5d756dd503d51eab9">00185</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a5923f7607c4a6fb5d756dd503d51eab9" title="returns the kth nearest element or null if none there.">getKthNearest</a>() {
<a name="l00186"></a>00186       <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529" title="The number of kth nearest elements.">m_KthNearestSize</a>==0)
<a name="l00187"></a>00187         <span class="keywordflow">return</span> null;
<a name="l00188"></a>00188       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529" title="The number of kth nearest elements.">m_KthNearestSize</a>--;
<a name="l00189"></a>00189       <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#addfefe266d12f62fdb7d5d7c359c7915" title="the kth nearest ones.">m_KthNearest</a>[<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0a6786094cb4bacc7417254858f57529" title="The number of kth nearest elements.">m_KthNearestSize</a>];
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191     
<a name="l00196"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ad88c01990eee35c64c5acc6113dc3aa4">00196</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ad88c01990eee35c64c5acc6113dc3aa4" title="performs upheap operation for the heap to maintian its properties.">upheap</a>() {
<a name="l00197"></a>00197       <span class="keywordtype">int</span> i = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>;
<a name="l00198"></a>00198       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> temp;
<a name="l00199"></a>00199       <span class="keywordflow">while</span>( i &gt; 1  &amp;&amp; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i].distance&gt;<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i/2].distance) {
<a name="l00200"></a>00200         temp = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i];
<a name="l00201"></a>00201         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i] = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i/2];
<a name="l00202"></a>00202         i = i/2;
<a name="l00203"></a>00203         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i] = temp; <span class="comment">//this is i/2 done here to avoid another division.</span>
<a name="l00204"></a>00204       }
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206     
<a name="l00211"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a1c0ce6fc344856e596eecd1aa711817c">00211</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a1c0ce6fc344856e596eecd1aa711817c" title="performs downheap operation for the heap to maintian its properties.">downheap</a>() {
<a name="l00212"></a>00212       <span class="keywordtype">int</span> i = 1;
<a name="l00213"></a>00213       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> temp;
<a name="l00214"></a>00214       <span class="keywordflow">while</span>( ( (2*i) &lt;= <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].index &amp;&amp;
<a name="l00215"></a>00215       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i].distance &lt; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[2*i].distance )
<a name="l00216"></a>00216       ||
<a name="l00217"></a>00217       ( (2*i+1) &lt;= <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].index &amp;&amp;
<a name="l00218"></a>00218       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i].distance &lt; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[2*i+1].distance) ) {
<a name="l00219"></a>00219         <span class="keywordflow">if</span>((2*i+1)&lt;=<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[0].index) {
<a name="l00220"></a>00220           <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[2*i].distance&gt;<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[2*i+1].distance) {
<a name="l00221"></a>00221             temp = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i];
<a name="l00222"></a>00222             <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i] = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[2*i];
<a name="l00223"></a>00223             i = 2*i;
<a name="l00224"></a>00224             <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i] = temp;
<a name="l00225"></a>00225           }
<a name="l00226"></a>00226           <span class="keywordflow">else</span> {
<a name="l00227"></a>00227             temp = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i];
<a name="l00228"></a>00228             <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i] = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[2*i+1];
<a name="l00229"></a>00229             i = 2*i+1;
<a name="l00230"></a>00230             <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i] = temp;
<a name="l00231"></a>00231           }
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233         <span class="keywordflow">else</span> {
<a name="l00234"></a>00234           temp = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i];
<a name="l00235"></a>00235           <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i] = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[2*i];
<a name="l00236"></a>00236           i = 2*i;
<a name="l00237"></a>00237           <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#adc2c1997caff18f35a34f8b117ea2bbb" title="the heap.">m_heap</a>[i] = temp;
<a name="l00238"></a>00238         }
<a name="l00239"></a>00239       }
<a name="l00240"></a>00240     }
<a name="l00241"></a>00241     
<a name="l00247"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab9455f58a9f1e6b20f71b62536c3030b">00247</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ab9455f58a9f1e6b20f71b62536c3030b" title="returns the total size.">totalSize</a>() {
<a name="l00248"></a>00248       <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44" title="returns the size of the heap.">size</a>()+<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd" title="returns the number of k nearest.">noOfKthNearest</a>();
<a name="l00249"></a>00249     }
<a name="l00250"></a>00250     
<a name="l00251"></a>00251   }
<a name="l00252"></a>00252   
<a name="l00259"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html">00259</a>   <span class="keyword">protected</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a>{
<a name="l00260"></a>00260     
<a name="l00262"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f">00262</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>;
<a name="l00263"></a>00263     
<a name="l00265"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5">00265</a>     <span class="keyword">public</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>;
<a name="l00266"></a>00266     
<a name="l00273"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a51dea0d8aa0d052c52f32a721aac66d3">00273</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a51dea0d8aa0d052c52f32a721aac66d3" title="constructor.">MyHeapElement</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">double</span> d) {
<a name="l00274"></a>00274       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a> = d;
<a name="l00275"></a>00275       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a> = i;
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277     
<a name="l00278"></a>00278   }
<a name="l00279"></a>00279    <span class="comment">//better to change this into a heap element</span>
<a name="l00286"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html">00286</a>   <span class="keyword">protected</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> {
<a name="l00287"></a>00287 
<a name="l00289"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#ab6ed5abaf011cde195026b36f7f0bd7a">00289</a>     <span class="keyword">public</span> Instance <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#ab6ed5abaf011cde195026b36f7f0bd7a" title="The neighbor instance.">m_Instance</a>;
<a name="l00290"></a>00290 
<a name="l00292"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8">00292</a>     <span class="keyword">public</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a>;
<a name="l00293"></a>00293 
<a name="l00295"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6">00295</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>;
<a name="l00296"></a>00296     
<a name="l00304"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a934afc9cb3225c25f6d158376a45a70a">00304</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a934afc9cb3225c25f6d158376a45a70a" title="Create a new neighbor node.">NeighborNode</a>(<span class="keywordtype">double</span> distance, Instance instance, <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> next) {
<a name="l00305"></a>00305       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a> = distance;
<a name="l00306"></a>00306       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#ab6ed5abaf011cde195026b36f7f0bd7a" title="The neighbor instance.">m_Instance</a> = instance;
<a name="l00307"></a>00307       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a> = next;
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309 
<a name="l00316"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a03ab7652b8be67d770d1caa906f47c09">00316</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a03ab7652b8be67d770d1caa906f47c09" title="Create a new neighbor node that doesn&amp;#39;t link to any other nodes.">NeighborNode</a>(<span class="keywordtype">double</span> distance, Instance instance) {
<a name="l00317"></a>00317 
<a name="l00318"></a>00318       <span class="keyword">this</span>(distance, instance, null);
<a name="l00319"></a>00319     }
<a name="l00320"></a>00320     
<a name="l00321"></a>00321   } 
<a name="l00322"></a>00322  <span class="comment">//better to change this into a heap</span>
<a name="l00332"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html">00332</a>   <span class="keyword">protected</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html" title="A class for a linked list to store the nearest k neighbours to an instance.">NeighborList</a>{
<a name="l00333"></a>00333 
<a name="l00335"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8">00335</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>;
<a name="l00336"></a>00336 
<a name="l00338"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a52e832ec82f1dcc446ceec3b60dcb232">00338</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a52e832ec82f1dcc446ceec3b60dcb232" title="The last node in the list.">m_Last</a>;
<a name="l00339"></a>00339 
<a name="l00341"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a74f7b0743fb84bb1e2bdc5335567cd6c">00341</a>     <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a74f7b0743fb84bb1e2bdc5335567cd6c" title="The number of nodes to attempt to maintain in the list.">m_Length</a> = 1;
<a name="l00342"></a>00342         
<a name="l00348"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a4ab2d09d40b8861d4c3ba67ffa11b32c">00348</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a4ab2d09d40b8861d4c3ba67ffa11b32c" title="Creates the neighborlist with a desired length.">NeighborList</a>(<span class="keywordtype">int</span> length) {
<a name="l00349"></a>00349       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a74f7b0743fb84bb1e2bdc5335567cd6c" title="The number of nodes to attempt to maintain in the list.">m_Length</a> = length;
<a name="l00350"></a>00350     }
<a name="l00351"></a>00351 
<a name="l00357"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#ad060b617248d97cad1700e2fc8583322">00357</a>     <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#ad060b617248d97cad1700e2fc8583322" title="Gets whether the list is empty.">isEmpty</a>() {
<a name="l00358"></a>00358       <span class="keywordflow">return</span> (<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a> == null);
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360 
<a name="l00366"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#aaea667bf58e1c13302bd1f94abc23d22">00366</a>     <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#aaea667bf58e1c13302bd1f94abc23d22" title="Gets the current length of the list.">currentLength</a>() {
<a name="l00367"></a>00367       <span class="keywordtype">int</span> i = 0;
<a name="l00368"></a>00368       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> current = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>;
<a name="l00369"></a>00369       <span class="keywordflow">while</span> (current != null) {
<a name="l00370"></a>00370         i++;
<a name="l00371"></a>00371         current = current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>;
<a name="l00372"></a>00372       }
<a name="l00373"></a>00373       <span class="keywordflow">return</span> i;
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375 
<a name="l00383"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a5d731f7cfb2cfb3dda64d21e7f27b4f2">00383</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a5d731f7cfb2cfb3dda64d21e7f27b4f2" title="Inserts an instance neighbor into the list, maintaining the list sorted by distance...">insertSorted</a>(<span class="keywordtype">double</span> distance, Instance instance) {
<a name="l00384"></a>00384       
<a name="l00385"></a>00385       <span class="keywordflow">if</span> (<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#ad060b617248d97cad1700e2fc8583322" title="Gets whether the list is empty.">isEmpty</a>()) {
<a name="l00386"></a>00386         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a> = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a52e832ec82f1dcc446ceec3b60dcb232" title="The last node in the list.">m_Last</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a>(distance, instance);
<a name="l00387"></a>00387       } <span class="keywordflow">else</span> {
<a name="l00388"></a>00388         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> current = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>;
<a name="l00389"></a>00389         <span class="keywordflow">if</span> (distance &lt; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a>) {<span class="comment">// Insert at head</span>
<a name="l00390"></a>00390           <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a>(distance, instance, <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>);
<a name="l00391"></a>00391         } <span class="keywordflow">else</span> { <span class="comment">// Insert further down the list</span>
<a name="l00392"></a>00392           <span class="keywordflow">for</span>( ;(current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a> != null) &amp;&amp;
<a name="l00393"></a>00393           (current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a> &lt; distance);
<a name="l00394"></a>00394           current = current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>);
<a name="l00395"></a>00395           current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a>(distance, instance,
<a name="l00396"></a>00396           current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>);
<a name="l00397"></a>00397           <span class="keywordflow">if</span> (current.equals(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a52e832ec82f1dcc446ceec3b60dcb232" title="The last node in the list.">m_Last</a>)) {
<a name="l00398"></a>00398             <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a52e832ec82f1dcc446ceec3b60dcb232" title="The last node in the list.">m_Last</a> = current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>;
<a name="l00399"></a>00399           }
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401         
<a name="l00402"></a>00402         <span class="comment">// Trip down the list until we&apos;ve got k list elements (or more if the</span>
<a name="l00403"></a>00403         <span class="comment">// distance to the last elements is the same).</span>
<a name="l00404"></a>00404         <span class="keywordtype">int</span> valcount = 0;
<a name="l00405"></a>00405         <span class="keywordflow">for</span>(current = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>; current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a> != null;
<a name="l00406"></a>00406         current = current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>) {
<a name="l00407"></a>00407           valcount++;
<a name="l00408"></a>00408           <span class="keywordflow">if</span> ((valcount &gt;= <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a74f7b0743fb84bb1e2bdc5335567cd6c" title="The number of nodes to attempt to maintain in the list.">m_Length</a>) &amp;&amp; (current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a> !=
<a name="l00409"></a>00409           current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a>)) {
<a name="l00410"></a>00410             <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a52e832ec82f1dcc446ceec3b60dcb232" title="The last node in the list.">m_Last</a> = current;
<a name="l00411"></a>00411             current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a> = null;
<a name="l00412"></a>00412             <span class="keywordflow">break</span>;
<a name="l00413"></a>00413           }
<a name="l00414"></a>00414         }
<a name="l00415"></a>00415       }
<a name="l00416"></a>00416     }
<a name="l00417"></a>00417 
<a name="l00424"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a277868d1d384c512c1165aabd51e5a7d">00424</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a277868d1d384c512c1165aabd51e5a7d" title="Prunes the list to contain the k nearest neighbors.">pruneToK</a>(<span class="keywordtype">int</span> k) {
<a name="l00425"></a>00425       
<a name="l00426"></a>00426       <span class="keywordflow">if</span> (<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#ad060b617248d97cad1700e2fc8583322" title="Gets whether the list is empty.">isEmpty</a>()) {
<a name="l00427"></a>00427         <span class="keywordflow">return</span>;
<a name="l00428"></a>00428       }
<a name="l00429"></a>00429       <span class="keywordflow">if</span> (k &lt; 1) {
<a name="l00430"></a>00430         k = 1;
<a name="l00431"></a>00431       }
<a name="l00432"></a>00432       <span class="keywordtype">int</span> currentK = 0;
<a name="l00433"></a>00433       <span class="keywordtype">double</span> currentDist = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a>;
<a name="l00434"></a>00434       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> current = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>;
<a name="l00435"></a>00435       <span class="keywordflow">for</span>(; current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a> != null; current = current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>) {
<a name="l00436"></a>00436         currentK++;
<a name="l00437"></a>00437         currentDist = current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a>;
<a name="l00438"></a>00438         <span class="keywordflow">if</span> ((currentK &gt;= k) &amp;&amp; (currentDist != current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a>)) {
<a name="l00439"></a>00439           <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a52e832ec82f1dcc446ceec3b60dcb232" title="The last node in the list.">m_Last</a> = current;
<a name="l00440"></a>00440           current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a> = null;
<a name="l00441"></a>00441           <span class="keywordflow">break</span>;
<a name="l00442"></a>00442         }
<a name="l00443"></a>00443       }
<a name="l00444"></a>00444     }
<a name="l00445"></a>00445     
<a name="l00449"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a8844f0baa4670a6d17d90c2775804995">00449</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a8844f0baa4670a6d17d90c2775804995" title="Prints out the contents of the neighborlist.">printList</a>() {
<a name="l00450"></a>00450       
<a name="l00451"></a>00451       <span class="keywordflow">if</span> (<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#ad060b617248d97cad1700e2fc8583322" title="Gets whether the list is empty.">isEmpty</a>()) {
<a name="l00452"></a>00452         System.out.println(<span class="stringliteral">&quot;Empty list&quot;</span>);
<a name="l00453"></a>00453       } <span class="keywordflow">else</span> {
<a name="l00454"></a>00454         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> current = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>;
<a name="l00455"></a>00455         <span class="keywordflow">while</span> (current != null) {
<a name="l00456"></a>00456           System.out.println(<span class="stringliteral">&quot;Node: instance &quot;</span> + current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#ab6ed5abaf011cde195026b36f7f0bd7a" title="The neighbor instance.">m_Instance</a>
<a name="l00457"></a>00457           + <span class="stringliteral">&quot;, distance &quot;</span> + current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#a9f8f63dd560ac8bcd5866b8979422fa8" title="The distance from the current instance to this neighbor.">m_Distance</a>);
<a name="l00458"></a>00458           current = current.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html#aabd7301e928121b40430d7dddf353fb6" title="A link to the next neighbor instance.">m_Next</a>;
<a name="l00459"></a>00459         }
<a name="l00460"></a>00460         System.out.println();
<a name="l00461"></a>00461       }
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463     
<a name="l00469"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a6fc2aafbc1a22753240628468aaffe4e">00469</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a6fc2aafbc1a22753240628468aaffe4e" title="returns the first element in the list.">getFirst</a>() {
<a name="l00470"></a>00470       <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a3da6602e50e438370a0c7a1c2f0048b8" title="The first node in the list.">m_First</a>;
<a name="l00471"></a>00471     }
<a name="l00472"></a>00472     
<a name="l00478"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#af3247680eeb129e9645cef9a09b746bb">00478</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborNode.html" title="A class for storing data about a neighboring instance.">NeighborNode</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#af3247680eeb129e9645cef9a09b746bb" title="returns the last element in the list.">getLast</a>() {
<a name="l00479"></a>00479       <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1NeighborList.html#a52e832ec82f1dcc446ceec3b60dcb232" title="The last node in the list.">m_Last</a>;
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481     
<a name="l00482"></a>00482   }
<a name="l00483"></a>00483   
<a name="l00485"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4">00485</a>   <span class="keyword">protected</span> Instances <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>;
<a name="l00486"></a>00486   
<a name="l00488"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a3e407052388f9e45075f0dfb709b0633">00488</a>   <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a3e407052388f9e45075f0dfb709b0633" title="The number of neighbours to find.">m_kNN</a>;
<a name="l00489"></a>00489 
<a name="l00491"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274">00491</a>   <span class="keyword">protected</span> <a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html" title="Interface for any class that can compute and return distances between two instances...">DistanceFunction</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1EuclideanDistance.html" title="Implementing Euclidean distance (or similarity) function.">EuclideanDistance</a>();
<a name="l00492"></a>00492   
<a name="l00494"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a937014d32cb706d1b4020d46f692ea81">00494</a>   <span class="keyword">protected</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a937014d32cb706d1b4020d46f692ea81" title="Should we measure Performance.">m_MeasurePerformance</a> = <span class="keyword">false</span>;
<a name="l00495"></a>00495   
<a name="l00499"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a12205b509f8847cfa75f956250d9dbd9">00499</a>   <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a12205b509f8847cfa75f956250d9dbd9" title="Constructor.">NearestNeighbourSearch</a>() {
<a name="l00500"></a>00500   }
<a name="l00501"></a>00501   
<a name="l00507"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a84e06c9f7b1707015f76ad78bfc36b5e">00507</a>   <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a84e06c9f7b1707015f76ad78bfc36b5e" title="Constructor.">NearestNeighbourSearch</a>(Instances insts) {
<a name="l00508"></a>00508     <span class="keyword">this</span>();
<a name="l00509"></a>00509     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a> = insts;
<a name="l00510"></a>00510   }
<a name="l00511"></a>00511   
<a name="l00518"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ad5966ef1c5735ec8dbe1b6054e87dc0e">00518</a>   <span class="keyword">public</span> String <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ad5966ef1c5735ec8dbe1b6054e87dc0e" title="Returns a string describing this nearest neighbour search algorithm.">globalInfo</a>() {
<a name="l00519"></a>00519     <span class="keywordflow">return</span> 
<a name="l00520"></a>00520         <span class="stringliteral">&quot;Abstract class for nearest neighbour search. All algorithms (classes) that &quot;</span>
<a name="l00521"></a>00521       + <span class="stringliteral">&quot;do nearest neighbour search should extend this class.&quot;</span>;
<a name="l00522"></a>00522   }
<a name="l00523"></a>00523   
<a name="l00524"></a>00524 
<a name="l00531"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a303bd8ddbb6497b14a50d19571878c9d">00531</a>   <span class="keyword">public</span> String <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a303bd8ddbb6497b14a50d19571878c9d" title="Returns the tip text for this property.">distanceFunctionTipText</a>() {
<a name="l00532"></a>00532     <span class="keywordflow">return</span> <span class="stringliteral">&quot;The distance function to use for finding neighbours &quot;</span> +
<a name="l00533"></a>00533            <span class="stringliteral">&quot;(default: weka.core.EuclideanDistance). &quot;</span>;
<a name="l00534"></a>00534   }
<a name="l00535"></a>00535   
<a name="l00541"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a3c067c6996919e7625834f3124092aec">00541</a>   <span class="keyword">public</span> <a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html" title="Interface for any class that can compute and return distances between two instances...">DistanceFunction</a> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a3c067c6996919e7625834f3124092aec" title="returns the distance function currently in use.">getDistanceFunction</a>() {
<a name="l00542"></a>00542     <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a>;
<a name="l00543"></a>00543   }
<a name="l00544"></a>00544   
<a name="l00551"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a3de72de2aea534a3ee3068b330541ab1">00551</a>   <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a3de72de2aea534a3ee3068b330541ab1" title="sets the distance function to use for nearest neighbour search.">setDistanceFunction</a>(<a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html" title="Interface for any class that can compute and return distances between two instances...">DistanceFunction</a> df) <span class="keywordflow">throws</span> Exception {
<a name="l00552"></a>00552     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a> = df;
<a name="l00553"></a>00553   }
<a name="l00554"></a>00554 
<a name="l00561"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2d6f8a51c2221f9fa2881fdbd4d3551f">00561</a>   <span class="keyword">public</span> String <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2d6f8a51c2221f9fa2881fdbd4d3551f" title="Returns the tip text for this property.">measurePerformanceTipText</a>() {
<a name="l00562"></a>00562     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Whether to calculate performance statistics &quot;</span> +
<a name="l00563"></a>00563            <span class="stringliteral">&quot;for the NN search or not&quot;</span>;
<a name="l00564"></a>00564   }
<a name="l00565"></a>00565   
<a name="l00571"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a1240473cc915203796d20c067ce3c35d">00571</a>   <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a1240473cc915203796d20c067ce3c35d" title="Gets whether performance statistics are being calculated or not.">getMeasurePerformance</a>() {
<a name="l00572"></a>00572     <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a937014d32cb706d1b4020d46f692ea81" title="Should we measure Performance.">m_MeasurePerformance</a>;
<a name="l00573"></a>00573   }
<a name="l00574"></a>00574   
<a name="l00575"></a>00575     
<a name="l00584"></a>00584   <span class="keyword">public</span> <span class="keyword">abstract</span> Instance <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a38f59f9f2aee4a6f5f0a6bca5bb34753" title="Returns the nearest instance in the current neighbourhood to the supplied instance...">nearestNeighbour</a>(Instance target) <span class="keywordflow">throws</span> Exception;
<a name="l00585"></a>00585   
<a name="l00595"></a>00595   <span class="keyword">public</span> <span class="keyword">abstract</span> Instances <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a9ca1f8804dd5a2eb7801c047a3443b79" title="Returns k nearest instances in the current neighbourhood to the supplied instance...">kNearestNeighbours</a>(Instance target, <span class="keywordtype">int</span> k) <span class="keywordflow">throws</span> Exception;
<a name="l00596"></a>00596  
<a name="l00605"></a>00605   <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#aa4fe73ce92e71de65e6c67d962cfa1c3" title="Returns the distances of the k nearest neighbours.">getDistances</a>() throws Exception;
<a name="l00606"></a>00606   
<a name="l00615"></a>00615   public abstract <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ae2f8a1fccb75bfd9a7b5fd4cfa350aa7" title="Updates the NearNeighbourSearch algorithm for the new added instance.">update</a>(Instance ins) throws Exception;
<a name="l00616"></a>00616 
<a name="l00623"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ab35339bffce0fb95d66b9ca16100eed9">00623</a>   public <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ab35339bffce0fb95d66b9ca16100eed9" title="Adds information from the given instance without modifying the datastructure a lot...">addInstanceInfo</a>(Instance ins) {
<a name="l00624"></a>00624   }
<a name="l00625"></a>00625   
<a name="l00632"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a38f12c2ac927d05908700f3106de9c27">00632</a>   <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a38f12c2ac927d05908700f3106de9c27" title="Sets the instances.">setInstances</a>(Instances insts) <span class="keywordflow">throws</span> Exception {
<a name="l00633"></a>00633     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a> = insts;
<a name="l00634"></a>00634   }
<a name="l00635"></a>00635   
<a name="l00641"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ac54036810acd4b868a80ed30416bc461">00641</a>   <span class="keyword">public</span> Instances <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ac54036810acd4b868a80ed30416bc461" title="returns the instances currently set.">getInstances</a>() {
<a name="l00642"></a>00642     <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>;
<a name="l00643"></a>00643   }
<a name="l00644"></a>00644 
<a name="l00645"></a>00645 
<a name="l00653"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#add41a1dd6c2bd2b9c6b7e38fdced368b">00653</a>   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#add41a1dd6c2bd2b9c6b7e38fdced368b" title="sorts the two given arrays.">combSort11</a>(<span class="keywordtype">double</span> arrayToSort[], <span class="keywordtype">int</span> linkedArray[]) {
<a name="l00654"></a>00654     <span class="keywordtype">int</span> switches, j, top, gap;
<a name="l00655"></a>00655     <span class="keywordtype">double</span> hold1; <span class="keywordtype">int</span> hold2;
<a name="l00656"></a>00656     gap = arrayToSort.length;
<a name="l00657"></a>00657     <span class="keywordflow">do</span> {
<a name="l00658"></a>00658       gap=(int)(gap/1.3);
<a name="l00659"></a>00659       <span class="keywordflow">switch</span>(gap) {
<a name="l00660"></a>00660         <span class="keywordflow">case</span> 0:
<a name="l00661"></a>00661           gap = 1;
<a name="l00662"></a>00662           <span class="keywordflow">break</span>;
<a name="l00663"></a>00663         <span class="keywordflow">case</span> 9:
<a name="l00664"></a>00664         <span class="keywordflow">case</span> 10:
<a name="l00665"></a>00665           gap=11;
<a name="l00666"></a>00666           <span class="keywordflow">break</span>;
<a name="l00667"></a>00667         <span class="keywordflow">default</span>:
<a name="l00668"></a>00668           <span class="keywordflow">break</span>;
<a name="l00669"></a>00669       }
<a name="l00670"></a>00670       switches=0;
<a name="l00671"></a>00671       top = arrayToSort.length-gap;
<a name="l00672"></a>00672       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;top; i++) {
<a name="l00673"></a>00673         j=i+gap;
<a name="l00674"></a>00674         <span class="keywordflow">if</span>(arrayToSort[i] &gt; arrayToSort[j]) {
<a name="l00675"></a>00675           hold1=arrayToSort[i];
<a name="l00676"></a>00676           hold2=linkedArray[i];
<a name="l00677"></a>00677           arrayToSort[i]=arrayToSort[j];
<a name="l00678"></a>00678           linkedArray[i]=linkedArray[j];
<a name="l00679"></a>00679           arrayToSort[j]=hold1;
<a name="l00680"></a>00680           linkedArray[j]=hold2;
<a name="l00681"></a>00681           switches++;
<a name="l00682"></a>00682         }<span class="comment">//endif</span>
<a name="l00683"></a>00683       }<span class="comment">//endfor</span>
<a name="l00684"></a>00684     } <span class="keywordflow">while</span>(switches&gt;0 || gap&gt;1);
<a name="l00685"></a>00685   }
<a name="l00686"></a>00686    
<a name="l00697"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ac779174103b5b4f669f2706b829469b4">00697</a>   <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ac779174103b5b4f669f2706b829469b4" title="Partitions the instances around a pivot.">partition</a>(<span class="keywordtype">double</span>[] arrayToSort, <span class="keywordtype">double</span>[] linkedArray, <span class="keywordtype">int</span> l, <span class="keywordtype">int</span> r) {
<a name="l00698"></a>00698     <span class="keywordtype">double</span> pivot = arrayToSort[(l + r) / 2];
<a name="l00699"></a>00699     <span class="keywordtype">double</span> help;
<a name="l00700"></a>00700 
<a name="l00701"></a>00701     <span class="keywordflow">while</span> (l &lt; r) {
<a name="l00702"></a>00702       <span class="keywordflow">while</span> ((arrayToSort[l] &lt; pivot) &amp;&amp; (l &lt; r)) {
<a name="l00703"></a>00703         l++;
<a name="l00704"></a>00704       }
<a name="l00705"></a>00705       <span class="keywordflow">while</span> ((arrayToSort[r] &gt; pivot) &amp;&amp; (l &lt; r)) {
<a name="l00706"></a>00706         r--;
<a name="l00707"></a>00707       }
<a name="l00708"></a>00708       <span class="keywordflow">if</span> (l &lt; r) {
<a name="l00709"></a>00709         help = arrayToSort[l];
<a name="l00710"></a>00710         arrayToSort[l] = arrayToSort[r];
<a name="l00711"></a>00711         arrayToSort[r] = help;
<a name="l00712"></a>00712         help = linkedArray[l];
<a name="l00713"></a>00713         linkedArray[l] = linkedArray[r];
<a name="l00714"></a>00714         linkedArray[r] = help;
<a name="l00715"></a>00715         l++;
<a name="l00716"></a>00716         r--;
<a name="l00717"></a>00717       }
<a name="l00718"></a>00718     }
<a name="l00719"></a>00719     <span class="keywordflow">if</span> ((l == r) &amp;&amp; (arrayToSort[r] &gt; pivot)) {
<a name="l00720"></a>00720       r--;
<a name="l00721"></a>00721     } 
<a name="l00722"></a>00722 
<a name="l00723"></a>00723     <span class="keywordflow">return</span> r;
<a name="l00724"></a>00724   }
<a name="l00725"></a>00725   
<a name="l00734"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#af3cfc2eb23dfa46014aa6329a4f1fccd">00734</a>   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#af3cfc2eb23dfa46014aa6329a4f1fccd" title="performs quicksort.">quickSort</a>(<span class="keywordtype">double</span>[] arrayToSort, <span class="keywordtype">double</span>[] linkedArray, <span class="keywordtype">int</span> left, <span class="keywordtype">int</span> right) {
<a name="l00735"></a>00735     <span class="keywordflow">if</span> (left &lt; right) {
<a name="l00736"></a>00736       <span class="keywordtype">int</span> middle = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#ac779174103b5b4f669f2706b829469b4" title="Partitions the instances around a pivot.">partition</a>(arrayToSort, linkedArray, left, right);
<a name="l00737"></a>00737       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#af3cfc2eb23dfa46014aa6329a4f1fccd" title="performs quicksort.">quickSort</a>(arrayToSort, linkedArray, left, middle);
<a name="l00738"></a>00738       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#af3cfc2eb23dfa46014aa6329a4f1fccd" title="performs quicksort.">quickSort</a>(arrayToSort, linkedArray, middle + 1, right);
<a name="l00739"></a>00739     }
<a name="l00740"></a>00740   }
<a name="l00741"></a>00741 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 26 Nov 2014 for MOA by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
