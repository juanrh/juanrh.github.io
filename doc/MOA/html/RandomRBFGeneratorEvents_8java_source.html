<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MOA: main/java/moa/streams/clustering/RandomRBFGeneratorEvents.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>main/java/moa/streams/clustering/RandomRBFGeneratorEvents.java</h1><a href="RandomRBFGeneratorEvents_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00024"></a>00024 <span class="keyword">package </span>moa.streams.clustering;
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="keyword">import</span> java.util.ArrayList;
<a name="l00027"></a>00027 <span class="keyword">import</span> java.util.Arrays;
<a name="l00028"></a>00028 <span class="keyword">import</span> java.util.Enumeration;
<a name="l00029"></a>00029 <span class="keyword">import</span> java.util.LinkedList;
<a name="l00030"></a>00030 <span class="keyword">import</span> java.util.Random;
<a name="l00031"></a>00031 <span class="keyword">import</span> java.util.Vector;
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="keyword">import</span> moa.cluster.Clustering;
<a name="l00034"></a>00034 <span class="keyword">import</span> moa.cluster.SphereCluster;
<a name="l00035"></a>00035 <span class="keyword">import</span> moa.core.AutoExpandVector;
<a name="l00036"></a>00036 <span class="keyword">import</span> moa.core.InstancesHeader;
<a name="l00037"></a>00037 <span class="keyword">import</span> moa.core.ObjectRepository;
<a name="l00038"></a>00038 <span class="keyword">import</span> moa.gui.visualization.DataPoint;
<a name="l00039"></a>00039 <span class="keyword">import</span> moa.options.FlagOption;
<a name="l00040"></a>00040 <span class="keyword">import</span> moa.options.FloatOption;
<a name="l00041"></a>00041 <span class="keyword">import</span> moa.options.IntOption;
<a name="l00042"></a>00042 <span class="keyword">import</span> moa.streams.InstanceStream;
<a name="l00043"></a>00043 <span class="keyword">import</span> moa.tasks.TaskMonitor;
<a name="l00044"></a>00044 <span class="keyword">import</span> weka.core.Attribute;
<a name="l00045"></a>00045 <span class="keyword">import</span> weka.core.DenseInstance;
<a name="l00046"></a>00046 <span class="keyword">import</span> weka.core.Instance;
<a name="l00047"></a>00047 <span class="keyword">import</span> weka.core.Instances;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 
<a name="l00050"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html">00050</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html">RandomRBFGeneratorEvents</a> <span class="keyword">extends</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html">ClusteringStream</a> {
<a name="l00051"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">00051</a>     <span class="keyword">private</span> <span class="keyword">transient</span> Vector <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a>;
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a667b187067249fcb3c89a73add4df02b">00053</a>     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a667b187067249fcb3c89a73add4df02b">serialVersionUID</a> = 1L;
<a name="l00054"></a>00054 
<a name="l00055"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#adacb9d5dec0bfbdf62e2a96a41dc4d4d">00055</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#adacb9d5dec0bfbdf62e2a96a41dc4d4d">modelRandomSeedOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(<span class="stringliteral">&quot;modelRandomSeed&quot;</span>,
<a name="l00056"></a>00056                     <span class="charliteral">&apos;m&apos;</span>, <span class="stringliteral">&quot;Seed for random generation of model.&quot;</span>, 1);
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#af68d5a2c7a096939029f262aa2e5597e">00058</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#af68d5a2c7a096939029f262aa2e5597e">instanceRandomSeedOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(
<a name="l00059"></a>00059                     <span class="stringliteral">&quot;instanceRandomSeed&quot;</span>, <span class="charliteral">&apos;i&apos;</span>,
<a name="l00060"></a>00060                     <span class="stringliteral">&quot;Seed for random generation of instances.&quot;</span>, 5);
<a name="l00061"></a>00061 
<a name="l00062"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">00062</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(<span class="stringliteral">&quot;numCluster&quot;</span>, <span class="charliteral">&apos;K&apos;</span>,
<a name="l00063"></a>00063                     <span class="stringliteral">&quot;The average number of centroids in the model.&quot;</span>, 5, 1, Integer.MAX_VALUE);
<a name="l00064"></a>00064 
<a name="l00065"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8237b185244b804e112e46cdb1002069">00065</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8237b185244b804e112e46cdb1002069">numClusterRangeOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(<span class="stringliteral">&quot;numClusterRange&quot;</span>, <span class="charliteral">&apos;k&apos;</span>,
<a name="l00066"></a>00066                     <span class="stringliteral">&quot;Deviation of the number of centroids in the model.&quot;</span>, 3, 0, Integer.MAX_VALUE);
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7881cc6b083a70813eaef5ccfbf97d89">00068</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7881cc6b083a70813eaef5ccfbf97d89">kernelRadiiOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a>(<span class="stringliteral">&quot;kernelRadius&quot;</span>, <span class="charliteral">&apos;R&apos;</span>,
<a name="l00069"></a>00069                     <span class="stringliteral">&quot;The average radii of the centroids in the model.&quot;</span>, 0.07, 0, 1);
<a name="l00070"></a>00070 
<a name="l00071"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a162d4665082fb32fb4c370f5f983630d">00071</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a162d4665082fb32fb4c370f5f983630d">kernelRadiiRangeOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a>(<span class="stringliteral">&quot;kernelRadiusRange&quot;</span>, <span class="charliteral">&apos;r&apos;</span>,
<a name="l00072"></a>00072                     <span class="stringliteral">&quot;Deviation of average radii of the centroids in the model.&quot;</span>, 0, 0, 1);
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac60a9c0413097677565b79b6eef47135">00074</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac60a9c0413097677565b79b6eef47135">densityRangeOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a>(<span class="stringliteral">&quot;densityRange&quot;</span>, <span class="charliteral">&apos;d&apos;</span>,
<a name="l00075"></a>00075                     <span class="stringliteral">&quot;Offset of the average weight a cluster has. Value of 0 means all cluster &quot;</span> +
<a name="l00076"></a>00076                     <span class="stringliteral">&quot;contain the same amount of points.&quot;</span>, 0, 0, 1);
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a411cded0fe9e526592259c51d48b2452">00078</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a411cded0fe9e526592259c51d48b2452">speedOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(<span class="stringliteral">&quot;speed&quot;</span>, <span class="charliteral">&apos;V&apos;</span>,
<a name="l00079"></a>00079                     <span class="stringliteral">&quot;Kernels move a predefined distance of 0.01 every X points&quot;</span>, 500, 1, Integer.MAX_VALUE);
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae3711ff4d379a60277616ff7cb573159">00081</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae3711ff4d379a60277616ff7cb573159">speedRangeOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(<span class="stringliteral">&quot;speedRange&quot;</span>, <span class="charliteral">&apos;v&apos;</span>,
<a name="l00082"></a>00082                     <span class="stringliteral">&quot;Speed/Velocity point offset&quot;</span>, 0, 0, Integer.MAX_VALUE);
<a name="l00083"></a>00083 
<a name="l00084"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a79aad251ca1134439388dcbf9a83a64f">00084</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a79aad251ca1134439388dcbf9a83a64f">noiseLevelOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FloatOption.html" title="Float option.">FloatOption</a>(<span class="stringliteral">&quot;noiseLevel&quot;</span>, <span class="charliteral">&apos;N&apos;</span>,
<a name="l00085"></a>00085                     <span class="stringliteral">&quot;Noise level&quot;</span>, 0.1, 0, 1);
<a name="l00086"></a>00086 
<a name="l00087"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a639c8a416631f7c224b57b7ce0b29585">00087</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a639c8a416631f7c224b57b7ce0b29585">noiseInClusterOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a>(<span class="stringliteral">&quot;noiseInCluster&quot;</span>, <span class="charliteral">&apos;n&apos;</span>,
<a name="l00088"></a>00088                     <span class="stringliteral">&quot;Allow noise to be placed within a cluster&quot;</span>);
<a name="l00089"></a>00089 
<a name="l00090"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1f5c53b7d0015b52369f798d6bbaaf1c">00090</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1f5c53b7d0015b52369f798d6bbaaf1c">eventFrequencyOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1IntOption.html" title="Int option.">IntOption</a>(<span class="stringliteral">&quot;eventFrequency&quot;</span>, <span class="charliteral">&apos;E&apos;</span>,
<a name="l00091"></a>00091                     <span class="stringliteral">&quot;Event frequency. Enable at least one of the events below and set numClusterRange!&quot;</span>, 30000, 0, Integer.MAX_VALUE);
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acedd07735102ed654fdef633c12e2f86">00093</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acedd07735102ed654fdef633c12e2f86">eventMergeSplitOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a>(<span class="stringliteral">&quot;eventMergeSplitOption&quot;</span>, <span class="charliteral">&apos;M&apos;</span>,
<a name="l00094"></a>00094                     <span class="stringliteral">&quot;Enable merging and splitting of clusters. Set eventFrequency and numClusterRange!&quot;</span>);
<a name="l00095"></a>00095 
<a name="l00096"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acbeb41d913949c2d3ac969f639ca162c">00096</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acbeb41d913949c2d3ac969f639ca162c">eventDeleteCreateOption</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1options_1_1FlagOption.html" title="Flag option.">FlagOption</a>(<span class="stringliteral">&quot;eventDeleteCreate&quot;</span>, <span class="charliteral">&apos;C&apos;</span>,
<a name="l00097"></a>00097                     <span class="stringliteral">&quot;Enable emering and disapperaing of clusters. Set eventFrequency and numClusterRange!&quot;</span>);
<a name="l00098"></a>00098 
<a name="l00099"></a>00099     
<a name="l00100"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a82813680f70aafaf65df214c7e170ced">00100</a>     <span class="keyword">private</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a82813680f70aafaf65df214c7e170ced">merge_threshold</a> = 0.7;
<a name="l00101"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a70521d0480f1dd4a463eb245355753a9">00101</a>     <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a70521d0480f1dd4a463eb245355753a9">kernelMovePointFrequency</a> = 10;
<a name="l00102"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a05babb7e12e5716f386cecb68880e137">00102</a>     <span class="keyword">private</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a05babb7e12e5716f386cecb68880e137">maxDistanceMoveThresholdByStep</a> = 0.01;
<a name="l00103"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad5e01a74f2e42c12d351512bbcfd78bd">00103</a>     <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad5e01a74f2e42c12d351512bbcfd78bd">maxOverlapFitRuns</a> = 50;
<a name="l00104"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afe718836f498fb6e3b0ccbe5143299f4">00104</a>     <span class="keyword">private</span> <span class="keywordtype">double</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afe718836f498fb6e3b0ccbe5143299f4">eventFrequencyRange</a> = 0;
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a306ba140d964a08400c90ffa8683ce51">00106</a>     <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a306ba140d964a08400c90ffa8683ce51">debug</a> = <span class="keyword">false</span>;
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">00108</a>     <span class="keyword">private</span> AutoExpandVector&lt;GeneratorCluster&gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>;
<a name="l00109"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">00109</a>     <span class="keyword">protected</span> Random <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>;
<a name="l00110"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0962105a90e3f49e6d59ee841a50a3d1">00110</a>     <span class="keyword">protected</span> <a class="code" href="classmoa_1_1core_1_1InstancesHeader.html" title="Class for storing the header or context of a data stream.">InstancesHeader</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0962105a90e3f49e6d59ee841a50a3d1">streamHeader</a>;
<a name="l00111"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">00111</a>     <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>;
<a name="l00112"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">00112</a>     <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a>;
<a name="l00113"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">00113</a>     <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a>;
<a name="l00114"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a9e3b2c7cd78f134a8d361f58c00419da">00114</a>     <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a9e3b2c7cd78f134a8d361f58c00419da">nextEventChoice</a> = -1;
<a name="l00115"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae8f127f64eff7db0ad9f0c564c14e9be">00115</a>     <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae8f127f64eff7db0ad9f0c564c14e9be">clusterIdCounter</a>;
<a name="l00116"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">00116</a>     <span class="keyword">private</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">GeneratorCluster</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>;
<a name="l00117"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">00117</a>     <span class="keyword">private</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">GeneratorCluster</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>;
<a name="l00118"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a3d5301060a75221ad08ba5877719275a">00118</a>     <span class="keyword">private</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a3d5301060a75221ad08ba5877719275a">mergeKernelsOverlapping</a> = <span class="keyword">false</span>;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 
<a name="l00122"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">00122</a>     <span class="keyword">private</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">GeneratorCluster</a>{
<a name="l00123"></a>00123         <span class="comment">//TODO: points is redundant to microclusterpoints, we need to come </span>
<a name="l00124"></a>00124         <span class="comment">//up with a good strategy that microclusters get updated and </span>
<a name="l00125"></a>00125         <span class="comment">//rebuild if needed. Idea: Sort microclusterpoints by timestamp and let </span>
<a name="l00126"></a>00126         <span class="comment">// microclusterdecay hold the timestamp for when the last point in a </span>
<a name="l00127"></a>00127         <span class="comment">//microcluster gets kicked, then we rebuild... or maybe not... could be</span>
<a name="l00128"></a>00128         <span class="comment">//same as searching for point to be kicked. more likely is we rebuild </span>
<a name="l00129"></a>00129         <span class="comment">//fewer times then insert.</span>
<a name="l00130"></a>00130         
<a name="l00131"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">00131</a>         <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>;
<a name="l00132"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac255697e0de7e90d277f2bd63eaf0c79">00132</a>         <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac255697e0de7e90d277f2bd63eaf0c79">kill</a> = -1;
<a name="l00133"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a3f408dd63fc5cbeca2fc2bba7b69356f">00133</a>         <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a3f408dd63fc5cbeca2fc2bba7b69356f">merging</a> = <span class="keyword">false</span>;
<a name="l00134"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a122169f27bdd641da2d77abf55fa12bb">00134</a>         <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a122169f27bdd641da2d77abf55fa12bb">moveVector</a>;
<a name="l00135"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ad66897dd4778e5a8bc7341495f0f9c7f">00135</a>         <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ad66897dd4778e5a8bc7341495f0f9c7f">totalMovementSteps</a>;
<a name="l00136"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a53c5a4ed7a69b6f1bbc20f5ff8620c0c">00136</a>         <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a53c5a4ed7a69b6f1bbc20f5ff8620c0c">currentMovementSteps</a>;
<a name="l00137"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a088d3e5e123d56875670a3439f123611">00137</a>         <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a088d3e5e123d56875670a3439f123611">isSplitting</a> = <span class="keyword">false</span>;
<a name="l00138"></a>00138 
<a name="l00139"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aea27bdcd99d239e1ee01a7958b7d9143">00139</a>         LinkedList&lt;DataPoint&gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aea27bdcd99d239e1ee01a7958b7d9143">points</a> = <span class="keyword">new</span> LinkedList&lt;DataPoint&gt;();
<a name="l00140"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac372bf18c3186813bc04d23d6001e00d">00140</a>         ArrayList&lt;SphereCluster&gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac372bf18c3186813bc04d23d6001e00d">microClusters</a> = <span class="keyword">new</span> ArrayList&lt;SphereCluster&gt;();
<a name="l00141"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">00141</a>         ArrayList&lt;ArrayList&lt;DataPoint&gt;&gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">microClustersPoints</a> = <span class="keyword">new</span> ArrayList();
<a name="l00142"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a54fc45506e38071373b20364a27fc938">00142</a>         ArrayList&lt;Integer&gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a54fc45506e38071373b20364a27fc938">microClustersDecay</a> = <span class="keyword">new</span> ArrayList();
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 
<a name="l00145"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#af623b202b5a1cca064fbf77537b721f0">00145</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#af623b202b5a1cca064fbf77537b721f0">GeneratorCluster</a>(<span class="keywordtype">int</span> label) {
<a name="l00146"></a>00146             <span class="keywordtype">boolean</span> outofbounds = <span class="keyword">true</span>;
<a name="l00147"></a>00147             <span class="keywordtype">int</span> tryCounter = 0;
<a name="l00148"></a>00148             <span class="keywordflow">while</span>(outofbounds &amp;&amp; tryCounter &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad5e01a74f2e42c12d351512bbcfd78bd">maxOverlapFitRuns</a>){
<a name="l00149"></a>00149                 tryCounter++;
<a name="l00150"></a>00150                 outofbounds = <span class="keyword">false</span>;
<a name="l00151"></a>00151                 <span class="keywordtype">double</span>[] center = <span class="keyword">new</span> <span class="keywordtype">double</span> [<a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()];
<a name="l00152"></a>00152                 <span class="keywordtype">double</span> radius = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7881cc6b083a70813eaef5ccfbf97d89">kernelRadiiOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>()+(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextBoolean()?-1:1)*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a162d4665082fb32fb4c370f5f983630d">kernelRadiiRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>()*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble();
<a name="l00153"></a>00153                 <span class="keywordflow">while</span>(radius &lt;= 0){
<a name="l00154"></a>00154                     radius = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7881cc6b083a70813eaef5ccfbf97d89">kernelRadiiOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>()+(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextBoolean()?-1:1)*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a162d4665082fb32fb4c370f5f983630d">kernelRadiiRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>()*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble();
<a name="l00155"></a>00155                 }
<a name="l00156"></a>00156                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>(); j++) {
<a name="l00157"></a>00157                      center[j] = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble();
<a name="l00158"></a>00158                      <span class="keywordflow">if</span>(center[j]- radius &lt; 0 || center[j] + radius &gt; 1){
<a name="l00159"></a>00159                         outofbounds = <span class="keyword">true</span>;
<a name="l00160"></a>00160                         <span class="keywordflow">break</span>;
<a name="l00161"></a>00161                      }
<a name="l00162"></a>00162                 }
<a name="l00163"></a>00163                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a>(center, radius);
<a name="l00164"></a>00164             }
<a name="l00165"></a>00165             <span class="keywordflow">if</span>(tryCounter &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad5e01a74f2e42c12d351512bbcfd78bd">maxOverlapFitRuns</a>){
<a name="l00166"></a>00166                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#ab2150fa98345a6891ed070c12f9ff809">setId</a>(label);
<a name="l00167"></a>00167                 <span class="keywordtype">double</span> avgWeight = 1.0/<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00168"></a>00168                 <span class="keywordtype">double</span> weight = avgWeight + (<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextBoolean()?-1:1)*avgWeight*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac60a9c0413097677565b79b6eef47135">densityRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>()*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble();
<a name="l00169"></a>00169                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a24a9881c0a95e5e83db7a3319032a6b7">setWeight</a>(weight);
<a name="l00170"></a>00170                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a07210af7e2d58616d53d8d84952aa9a3">setDesitnation</a>(null);
<a name="l00171"></a>00171             }
<a name="l00172"></a>00172             <span class="keywordflow">else</span>{
<a name="l00173"></a>00173                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a> = null;
<a name="l00174"></a>00174                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac255697e0de7e90d277f2bd63eaf0c79">kill</a> = 0;
<a name="l00175"></a>00175                 System.out.println(<span class="stringliteral">&quot;Tried &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad5e01a74f2e42c12d351512bbcfd78bd">maxOverlapFitRuns</a>+<span class="stringliteral">&quot; times to create kernel. Reduce average radii.&quot;</span> );
<a name="l00176"></a>00176             }
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178 
<a name="l00179"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aabc9a66563399409a9745200115808f1">00179</a>         <span class="keyword">public</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aabc9a66563399409a9745200115808f1">GeneratorCluster</a>(<span class="keywordtype">int</span> label, <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a> cluster) {
<a name="l00180"></a>00180             this.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a> = cluster;
<a name="l00181"></a>00181             cluster.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#ab2150fa98345a6891ed070c12f9ff809">setId</a>(label);
<a name="l00182"></a>00182             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a07210af7e2d58616d53d8d84952aa9a3">setDesitnation</a>(null);
<a name="l00183"></a>00183         }
<a name="l00184"></a>00184 
<a name="l00185"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ae0cdb0d49d038a89c5a31bd4c7b7ef22">00185</a>         <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ae0cdb0d49d038a89c5a31bd4c7b7ef22">getWorkID</a>(){
<a name="l00186"></a>00186             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); c++){
<a name="l00187"></a>00187                 <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).equals(<span class="keyword">this</span>))
<a name="l00188"></a>00188                     <span class="keywordflow">return</span> c;
<a name="l00189"></a>00189             }
<a name="l00190"></a>00190             <span class="keywordflow">return</span> -1;
<a name="l00191"></a>00191         }
<a name="l00192"></a>00192 
<a name="l00193"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a6b2e4f946385a47ad95ccff335b6a4d4">00193</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a6b2e4f946385a47ad95ccff335b6a4d4">updateKernel</a>(){
<a name="l00194"></a>00194             <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac255697e0de7e90d277f2bd63eaf0c79">kill</a> == 0){
<a name="l00195"></a>00195                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.remove(<span class="keyword">this</span>);
<a name="l00196"></a>00196             }
<a name="l00197"></a>00197             <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac255697e0de7e90d277f2bd63eaf0c79">kill</a> &gt; 0){
<a name="l00198"></a>00198                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac255697e0de7e90d277f2bd63eaf0c79">kill</a>--;
<a name="l00199"></a>00199             }
<a name="l00200"></a>00200             <span class="comment">//we could be lot more precise if we would keep track of timestamps of points</span>
<a name="l00201"></a>00201             <span class="comment">//then we could remove all old points and rebuild the cluster on up to date point base</span>
<a name="l00202"></a>00202             <span class="comment">//BUT worse the effort??? so far we just want to avoid overlap with this, so its more</span>
<a name="l00203"></a>00203             <span class="comment">//konservative as needed. Only needs to change when we need a thighter representation</span>
<a name="l00204"></a>00204             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = 0; m &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac372bf18c3186813bc04d23d6001e00d">microClusters</a>.size(); m++) {
<a name="l00205"></a>00205                 <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>-<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a54fc45506e38071373b20364a27fc938">microClustersDecay</a>.get(m) &gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a487f8919b43dc557a7207203eebf9fbb">decayHorizonOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()){
<a name="l00206"></a>00206                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac372bf18c3186813bc04d23d6001e00d">microClusters</a>.remove(m);
<a name="l00207"></a>00207                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">microClustersPoints</a>.remove(m);
<a name="l00208"></a>00208                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a54fc45506e38071373b20364a27fc938">microClustersDecay</a>.remove(m);
<a name="l00209"></a>00209                 }
<a name="l00210"></a>00210             }
<a name="l00211"></a>00211 
<a name="l00212"></a>00212             <span class="keywordflow">if</span>(!<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aea27bdcd99d239e1ee01a7958b7d9143">points</a>.isEmpty() &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>-<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aea27bdcd99d239e1ee01a7958b7d9143">points</a>.getFirst().getTimestamp() &gt;= <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a487f8919b43dc557a7207203eebf9fbb">decayHorizonOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()){
<a name="l00213"></a>00213 <span class="comment">//                if(debug)</span>
<a name="l00214"></a>00214 <span class="comment">//                    System.out.println(&quot;Cleaning up macro cluster &quot;+generator.getId());</span>
<a name="l00215"></a>00215                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aea27bdcd99d239e1ee01a7958b7d9143">points</a>.removeFirst();
<a name="l00216"></a>00216             }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218         }
<a name="l00219"></a>00219 
<a name="l00220"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a0c0b5246f6ba26f168e35c3f009a73b8">00220</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a0c0b5246f6ba26f168e35c3f009a73b8">addInstance</a>(Instance instance){
<a name="l00221"></a>00221             <a class="code" href="classmoa_1_1gui_1_1visualization_1_1DataPoint.html">DataPoint</a> point = <span class="keyword">new</span> <a class="code" href="classmoa_1_1gui_1_1visualization_1_1DataPoint.html">DataPoint</a>(instance, <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>);
<a name="l00222"></a>00222             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aea27bdcd99d239e1ee01a7958b7d9143">points</a>.add(point);
<a name="l00223"></a>00223             
<a name="l00224"></a>00224             <span class="keywordtype">int</span> minMicroIndex = -1;
<a name="l00225"></a>00225             <span class="keywordtype">double</span> minHullDist = Double.MAX_VALUE;
<a name="l00226"></a>00226             <span class="keywordtype">boolean</span> inserted = <span class="keyword">false</span>;
<a name="l00227"></a>00227             <span class="comment">//we favour more recently build clusters so we can remove earlier cluster sooner</span>
<a name="l00228"></a>00228             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac372bf18c3186813bc04d23d6001e00d">microClusters</a>.size()-1; m &gt;=0 ; m--) {
<a name="l00229"></a>00229                 <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a> micro = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac372bf18c3186813bc04d23d6001e00d">microClusters</a>.get(m);
<a name="l00230"></a>00230                 <span class="keywordtype">double</span> hulldist = micro.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a75cf15cd8d99c51a04135e8bcd1329af">getCenterDistance</a>(point)-micro.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a1d2dc0db89728370066bf8bd46a06bed">getRadius</a>();
<a name="l00231"></a>00231                 <span class="comment">//point fits into existing cluster</span>
<a name="l00232"></a>00232                 <span class="keywordflow">if</span>(hulldist &lt;= 0){
<a name="l00233"></a>00233                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">microClustersPoints</a>.get(m).add(point);
<a name="l00234"></a>00234                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a54fc45506e38071373b20364a27fc938">microClustersDecay</a>.set(m, <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>);
<a name="l00235"></a>00235                     inserted = <span class="keyword">true</span>;
<a name="l00236"></a>00236                     <span class="keywordflow">break</span>;
<a name="l00237"></a>00237                 }
<a name="l00238"></a>00238                 <span class="comment">//if not, check if its at least the closest cluster</span>
<a name="l00239"></a>00239                 <span class="keywordflow">else</span>{
<a name="l00240"></a>00240                     <span class="keywordflow">if</span>(hulldist &lt; minHullDist){
<a name="l00241"></a>00241                         minMicroIndex = m;
<a name="l00242"></a>00242                         minHullDist = hulldist;
<a name="l00243"></a>00243                     }
<a name="l00244"></a>00244                 }
<a name="l00245"></a>00245             }
<a name="l00246"></a>00246             <span class="comment">//Reseting index choice for alternative cluster building</span>
<a name="l00247"></a>00247             <span class="keywordtype">int</span> alt = 1;
<a name="l00248"></a>00248             <span class="keywordflow">if</span>(alt == 1)
<a name="l00249"></a>00249                 minMicroIndex = -1;
<a name="l00250"></a>00250             <span class="keywordflow">if</span>(!inserted){
<a name="l00251"></a>00251                 <span class="comment">//add to closest cluster and expand cluster</span>
<a name="l00252"></a>00252                 <span class="keywordflow">if</span>(minMicroIndex!=-1){
<a name="l00253"></a>00253                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">microClustersPoints</a>.get(minMicroIndex).add(point);
<a name="l00254"></a>00254                     <span class="comment">//we should keep the miniball instances and just check in</span>
<a name="l00255"></a>00255                     <span class="comment">//new points instead of rebuilding the whole thing</span>
<a name="l00256"></a>00256                     <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a> s = <span class="keyword">new</span> <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">microClustersPoints</a>.get(minMicroIndex),<a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>());
<a name="l00257"></a>00257                     <span class="comment">//check if current microcluster is bigger then generating cluster</span>
<a name="l00258"></a>00258                     <span class="keywordflow">if</span>(s.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a1d2dc0db89728370066bf8bd46a06bed">getRadius</a>() &gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a1d2dc0db89728370066bf8bd46a06bed">getRadius</a>()){
<a name="l00259"></a>00259                         <span class="comment">//remove previously added point</span>
<a name="l00260"></a>00260                         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">microClustersPoints</a>.get(minMicroIndex).remove(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">microClustersPoints</a>.get(minMicroIndex).size()-1);
<a name="l00261"></a>00261                         minMicroIndex = -1;
<a name="l00262"></a>00262                     }
<a name="l00263"></a>00263                     <span class="keywordflow">else</span>{
<a name="l00264"></a>00264                         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac372bf18c3186813bc04d23d6001e00d">microClusters</a>.set(minMicroIndex, s);
<a name="l00265"></a>00265                         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a54fc45506e38071373b20364a27fc938">microClustersDecay</a>.set(minMicroIndex, <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>);
<a name="l00266"></a>00266                     }
<a name="l00267"></a>00267                 }
<a name="l00268"></a>00268                 <span class="comment">//minMicroIndex might have been reset above</span>
<a name="l00269"></a>00269                 <span class="comment">//create new micro cluster</span>
<a name="l00270"></a>00270                 <span class="keywordflow">if</span>(minMicroIndex == -1){
<a name="l00271"></a>00271                     ArrayList&lt;DataPoint&gt; microPoints = <span class="keyword">new</span> ArrayList&lt;DataPoint&gt;();
<a name="l00272"></a>00272                     microPoints.add(point);
<a name="l00273"></a>00273                     <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a> s;
<a name="l00274"></a>00274                     <span class="keywordflow">if</span>(alt == 0)
<a name="l00275"></a>00275                         s = <span class="keyword">new</span> <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a>(microPoints,<a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>());
<a name="l00276"></a>00276                     <span class="keywordflow">else</span>
<a name="l00277"></a>00277                         s = <span class="keyword">new</span> <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#aefb8b36adf18a65827154d4b617e867d">getCenter</a>(),<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a1d2dc0db89728370066bf8bd46a06bed">getRadius</a>(),1);
<a name="l00278"></a>00278 
<a name="l00279"></a>00279                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac372bf18c3186813bc04d23d6001e00d">microClusters</a>.add(s);
<a name="l00280"></a>00280                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac0745deb8044b2a1db15143459d939cd">microClustersPoints</a>.add(microPoints);
<a name="l00281"></a>00281                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a54fc45506e38071373b20364a27fc938">microClustersDecay</a>.add(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>);
<a name="l00282"></a>00282                     <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0;
<a name="l00283"></a>00283                     <span class="keywordflow">while</span>(<span class="keywordtype">id</span> &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size()){
<a name="l00284"></a>00284                         <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>) == <span class="keyword">this</span>)
<a name="l00285"></a>00285                             <span class="keywordflow">break</span>;
<a name="l00286"></a>00286                         <span class="keywordtype">id</span>++;
<a name="l00287"></a>00287                     }
<a name="l00288"></a>00288                     s.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#ada31184ce2ef51b9563b4e2339834768">setGroundTruth</a>(<span class="keywordtype">id</span>);
<a name="l00289"></a>00289                 }
<a name="l00290"></a>00290             }
<a name="l00291"></a>00291 
<a name="l00292"></a>00292         }
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 
<a name="l00295"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aa03b65994a79111055c9736c62cc1880">00295</a>         <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aa03b65994a79111055c9736c62cc1880">move</a>(){
<a name="l00296"></a>00296             <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a53c5a4ed7a69b6f1bbc20f5ff8620c0c">currentMovementSteps</a> &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ad66897dd4778e5a8bc7341495f0f9c7f">totalMovementSteps</a>){
<a name="l00297"></a>00297                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a53c5a4ed7a69b6f1bbc20f5ff8620c0c">currentMovementSteps</a>++;
<a name="l00298"></a>00298                 <span class="keywordflow">if</span>( <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a122169f27bdd641da2d77abf55fa12bb">moveVector</a> == null){
<a name="l00299"></a>00299                     <span class="keywordflow">return</span>;
<a name="l00300"></a>00300                 }
<a name="l00301"></a>00301                 <span class="keywordflow">else</span>{
<a name="l00302"></a>00302                     <span class="keywordtype">double</span>[] center = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#aefb8b36adf18a65827154d4b617e867d">getCenter</a>();
<a name="l00303"></a>00303                     <span class="keywordtype">boolean</span> outofbounds = <span class="keyword">true</span>;
<a name="l00304"></a>00304                     <span class="keywordflow">while</span>(outofbounds){
<a name="l00305"></a>00305                         <span class="keywordtype">double</span> radius = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a1d2dc0db89728370066bf8bd46a06bed">getRadius</a>();
<a name="l00306"></a>00306                         outofbounds = <span class="keyword">false</span>;
<a name="l00307"></a>00307                         center = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#aefb8b36adf18a65827154d4b617e867d">getCenter</a>();
<a name="l00308"></a>00308                         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> d = 0; d &lt; center.length; d++ ) {
<a name="l00309"></a>00309                             center[d]+= <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a122169f27bdd641da2d77abf55fa12bb">moveVector</a>[d];
<a name="l00310"></a>00310                             <span class="keywordflow">if</span>(center[d]- radius &lt; 0 || center[d] + radius &gt; 1){
<a name="l00311"></a>00311                                 outofbounds = <span class="keyword">true</span>;
<a name="l00312"></a>00312                                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a07210af7e2d58616d53d8d84952aa9a3">setDesitnation</a>(null);
<a name="l00313"></a>00313                                 <span class="keywordflow">break</span>;
<a name="l00314"></a>00314                             }
<a name="l00315"></a>00315                         }
<a name="l00316"></a>00316                     }
<a name="l00317"></a>00317                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a23bc373d05cea24ad1b64d0aa532352e">setCenter</a>(center);
<a name="l00318"></a>00318                 }
<a name="l00319"></a>00319             }
<a name="l00320"></a>00320             <span class="keywordflow">else</span>{
<a name="l00321"></a>00321                 <span class="keywordflow">if</span>(!<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a3f408dd63fc5cbeca2fc2bba7b69356f">merging</a>){
<a name="l00322"></a>00322                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a07210af7e2d58616d53d8d84952aa9a3">setDesitnation</a>(null);
<a name="l00323"></a>00323                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a088d3e5e123d56875670a3439f123611">isSplitting</a> = <span class="keyword">false</span>;
<a name="l00324"></a>00324                 }
<a name="l00325"></a>00325             }
<a name="l00326"></a>00326         }
<a name="l00327"></a>00327 
<a name="l00328"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a07210af7e2d58616d53d8d84952aa9a3">00328</a>         <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a07210af7e2d58616d53d8d84952aa9a3">setDesitnation</a>(<span class="keywordtype">double</span>[] destination){
<a name="l00329"></a>00329 
<a name="l00330"></a>00330             <span class="keywordflow">if</span>(destination == null){
<a name="l00331"></a>00331                 destination = <span class="keyword">new</span> <span class="keywordtype">double</span> [<a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()];
<a name="l00332"></a>00332                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>(); j++) {
<a name="l00333"></a>00333                      destination[j] = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble();
<a name="l00334"></a>00334                 }
<a name="l00335"></a>00335             }
<a name="l00336"></a>00336             <span class="keywordtype">double</span>[] center = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#aefb8b36adf18a65827154d4b617e867d">getCenter</a>();
<a name="l00337"></a>00337             <span class="keywordtype">int</span> dim = center.length;
<a name="l00338"></a>00338 
<a name="l00339"></a>00339             <span class="keywordtype">double</span>[] v = <span class="keyword">new</span> <span class="keywordtype">double</span>[dim];
<a name="l00340"></a>00340 
<a name="l00341"></a>00341             <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> d = 0; d &lt; dim; d++ ) {
<a name="l00342"></a>00342                 v[d]=destination[d]-center[d];
<a name="l00343"></a>00343             }
<a name="l00344"></a>00344             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aa08cb223ff38cd1d550e3e7f28c11d98">setMoveVector</a>(v);
<a name="l00345"></a>00345         }
<a name="l00346"></a>00346 
<a name="l00347"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aa08cb223ff38cd1d550e3e7f28c11d98">00347</a>         <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aa08cb223ff38cd1d550e3e7f28c11d98">setMoveVector</a>(<span class="keywordtype">double</span>[] vector){
<a name="l00348"></a>00348             <span class="comment">//we are ignoring the steps, otherwise we have to change </span>
<a name="l00349"></a>00349             <span class="comment">//speed of the kernels, do we want that?</span>
<a name="l00350"></a>00350             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a122169f27bdd641da2d77abf55fa12bb">moveVector</a> = vector;
<a name="l00351"></a>00351             <span class="keywordtype">int</span> speedInPoints  = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a411cded0fe9e526592259c51d48b2452">speedOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00352"></a>00352             <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae3711ff4d379a60277616ff7cb573159">speedRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() &gt; 0)
<a name="l00353"></a>00353                     speedInPoints +=(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextBoolean()?-1:1)*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae3711ff4d379a60277616ff7cb573159">speedRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>());
<a name="l00354"></a>00354             <span class="keywordflow">if</span>(speedInPoints  &lt; 1) speedInPoints  = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a411cded0fe9e526592259c51d48b2452">speedOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 
<a name="l00357"></a>00357             <span class="keywordtype">double</span> length = 0;
<a name="l00358"></a>00358             <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> d = 0; d &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a122169f27bdd641da2d77abf55fa12bb">moveVector</a>.length; d++ ) {
<a name="l00359"></a>00359                 length+=Math.pow(vector[d],2);
<a name="l00360"></a>00360             }
<a name="l00361"></a>00361             length = Math.sqrt(length);
<a name="l00362"></a>00362 
<a name="l00363"></a>00363             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ad66897dd4778e5a8bc7341495f0f9c7f">totalMovementSteps</a> = (int)(length/(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a05babb7e12e5716f386cecb68880e137">maxDistanceMoveThresholdByStep</a>*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a70521d0480f1dd4a463eb245355753a9">kernelMovePointFrequency</a>)*speedInPoints);
<a name="l00364"></a>00364             <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> d = 0; d &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a122169f27bdd641da2d77abf55fa12bb">moveVector</a>.length; d++ ) {
<a name="l00365"></a>00365                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a122169f27bdd641da2d77abf55fa12bb">moveVector</a>[d]/=(double)<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ad66897dd4778e5a8bc7341495f0f9c7f">totalMovementSteps</a>;
<a name="l00366"></a>00366             }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 
<a name="l00369"></a>00369             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a53c5a4ed7a69b6f1bbc20f5ff8620c0c">currentMovementSteps</a> = 0;
<a name="l00370"></a>00370 <span class="comment">//            if(debug){</span>
<a name="l00371"></a>00371 <span class="comment">//                System.out.println(&quot;Setting new direction for C&quot;+generator.getId()+&quot;: distance &quot;</span>
<a name="l00372"></a>00372 <span class="comment">//                        +length+&quot; in &quot;+totalMovementSteps+&quot; steps&quot;);</span>
<a name="l00373"></a>00373 <span class="comment">//            }</span>
<a name="l00374"></a>00374         }
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac1318060ca75dcc3c5d25bc8d931ee42">00376</a>         <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac1318060ca75dcc3c5d25bc8d931ee42">tryMerging</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">GeneratorCluster</a> merge){
<a name="l00377"></a>00377            String message = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00378"></a>00378            <span class="keywordtype">double</span> overlapDegree = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#adeeff60ba7e54d6dcebc9eec14e6d583" title="Checks whether two SphereCluster overlap based on radius NOTE: overlapRadiusDegree...">overlapRadiusDegree</a>(merge.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>);
<a name="l00379"></a>00379            <span class="keywordflow">if</span>(overlapDegree &gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a82813680f70aafaf65df214c7e170ced">merge_threshold</a>){
<a name="l00380"></a>00380                 <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a> mcluster = merge.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>;
<a name="l00381"></a>00381                 <span class="keywordtype">double</span> radius = Math.max(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a1d2dc0db89728370066bf8bd46a06bed">getRadius</a>(), mcluster.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a1d2dc0db89728370066bf8bd46a06bed">getRadius</a>());
<a name="l00382"></a>00382                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#affd101cf094c61a400cbda0b901430aa">combine</a>(mcluster);
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 <span class="comment">//                //adjust radius, get bigger and bigger with high dim data</span>
<a name="l00385"></a>00385                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#ac02c29ac788d108bb509bc8822b99a70">setRadius</a>(radius);
<a name="l00386"></a>00386 <span class="comment">//                double[] center = generator.getCenter();</span>
<a name="l00387"></a>00387 <span class="comment">//                double[] mcenter = mcluster.getCenter();</span>
<a name="l00388"></a>00388 <span class="comment">//                double weight = generator.getWeight();</span>
<a name="l00389"></a>00389 <span class="comment">//                double mweight = generator.getWeight();</span>
<a name="l00393"></a>00393 <span class="comment"></span><span class="comment">//                generator.setWeight(weight + mweight);</span>
<a name="l00394"></a>00394                 message  = <span class="stringliteral">&quot;Clusters merging: &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#aec009f106ed5a6940f956a07af28ffd2">getId</a>()+<span class="stringliteral">&quot; into &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#aec009f106ed5a6940f956a07af28ffd2">getId</a>();
<a name="l00395"></a>00395 
<a name="l00396"></a>00396                 <span class="comment">//clean up and restet merging stuff</span>
<a name="l00397"></a>00397                 <span class="comment">//mark kernel so it gets killed when it doesn&apos;t contain any more instances</span>
<a name="l00398"></a>00398                 merge.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac255697e0de7e90d277f2bd63eaf0c79">kill</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a487f8919b43dc557a7207203eebf9fbb">decayHorizonOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00399"></a>00399                 <span class="comment">//set weight to 0 so no new instances will be created in the cluster</span>
<a name="l00400"></a>00400                 mcluster.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a24a9881c0a95e5e83db7a3319032a6b7">setWeight</a>(0.0);
<a name="l00401"></a>00401                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad109e0499b7f03a6db383dd7433d8514">normalizeWeights</a>();
<a name="l00402"></a>00402                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a>--;
<a name="l00403"></a>00403                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a> = null;
<a name="l00404"></a>00404                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a3f408dd63fc5cbeca2fc2bba7b69356f">merging</a> = <span class="keyword">false</span>;
<a name="l00405"></a>00405                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a3d5301060a75221ad08ba5877719275a">mergeKernelsOverlapping</a> = <span class="keyword">false</span>;
<a name="l00406"></a>00406             }
<a name="l00407"></a>00407            <span class="keywordflow">else</span>{
<a name="l00408"></a>00408                <span class="keywordflow">if</span>(overlapDegree &gt; 0 &amp;&amp; !<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a3d5301060a75221ad08ba5877719275a">mergeKernelsOverlapping</a>){
<a name="l00409"></a>00409                    <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a3d5301060a75221ad08ba5877719275a">mergeKernelsOverlapping</a> = <span class="keyword">true</span>;
<a name="l00410"></a>00410                    message = <span class="stringliteral">&quot;Merge overlapping started&quot;</span>;
<a name="l00411"></a>00411                }
<a name="l00412"></a>00412            }
<a name="l00413"></a>00413            <span class="keywordflow">return</span> message;
<a name="l00414"></a>00414         }
<a name="l00415"></a>00415 
<a name="l00416"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aad80ea4a2a0099cd53f912a2a0b2bce1">00416</a>         <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#aad80ea4a2a0099cd53f912a2a0b2bce1">splitKernel</a>(){
<a name="l00417"></a>00417             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a088d3e5e123d56875670a3439f123611">isSplitting</a> = <span class="keyword">true</span>;
<a name="l00418"></a>00418             <span class="comment">//todo radius range</span>
<a name="l00419"></a>00419             <span class="keywordtype">double</span> radius = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7881cc6b083a70813eaef5ccfbf97d89">kernelRadiiOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>();
<a name="l00420"></a>00420             <span class="keywordtype">double</span> avgWeight = 1.0/<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00421"></a>00421             <span class="keywordtype">double</span> weight = avgWeight + avgWeight*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac60a9c0413097677565b79b6eef47135">densityRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>()*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble();
<a name="l00422"></a>00422             <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a> spcluster = null;
<a name="l00423"></a>00423 
<a name="l00424"></a>00424             <span class="keywordtype">double</span>[] center = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#aefb8b36adf18a65827154d4b617e867d">getCenter</a>();
<a name="l00425"></a>00425             spcluster = <span class="keyword">new</span> <a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html" title="A simple implementation of the Cluster interface representing spherical clusters...">SphereCluster</a>(center, radius, weight);
<a name="l00426"></a>00426 
<a name="l00427"></a>00427             <span class="keywordflow">if</span>(spcluster !=null){
<a name="l00428"></a>00428                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">GeneratorCluster</a> gc = <span class="keyword">new</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#af623b202b5a1cca064fbf77537b721f0">GeneratorCluster</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae8f127f64eff7db0ad9f0c564c14e9be">clusterIdCounter</a>++, spcluster);
<a name="l00429"></a>00429                 gc.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a088d3e5e123d56875670a3439f123611">isSplitting</a> = <span class="keyword">true</span>;
<a name="l00430"></a>00430                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.add(gc);
<a name="l00431"></a>00431                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad109e0499b7f03a6db383dd7433d8514">normalizeWeights</a>();
<a name="l00432"></a>00432                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a>++;
<a name="l00433"></a>00433                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;Split from Kernel &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#aec009f106ed5a6940f956a07af28ffd2">getId</a>();
<a name="l00434"></a>00434             }
<a name="l00435"></a>00435             <span class="keywordflow">else</span>{
<a name="l00436"></a>00436                 System.out.println(<span class="stringliteral">&quot;Tried to split new kernel from C&quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#aec009f106ed5a6940f956a07af28ffd2">getId</a>()+
<a name="l00437"></a>00437                         <span class="stringliteral">&quot;. Not enough room for new cluster, decrease average radii, number of clusters or enable overlap.&quot;</span>);
<a name="l00438"></a>00438                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00439"></a>00439             }
<a name="l00440"></a>00440         }
<a name="l00441"></a>00441         
<a name="l00442"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a06812e3355eaa2f0f5005d04b4e1eb17">00442</a>         <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a06812e3355eaa2f0f5005d04b4e1eb17">fadeOut</a>(){
<a name="l00443"></a>00443             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac255697e0de7e90d277f2bd63eaf0c79">kill</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a487f8919b43dc557a7207203eebf9fbb">decayHorizonOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00444"></a>00444             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a24a9881c0a95e5e83db7a3319032a6b7">setWeight</a>(0.0);
<a name="l00445"></a>00445             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a>--;
<a name="l00446"></a>00446             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad109e0499b7f03a6db383dd7433d8514">normalizeWeights</a>();
<a name="l00447"></a>00447             <span class="keywordflow">return</span> <span class="stringliteral">&quot;Fading out C&quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#aec009f106ed5a6940f956a07af28ffd2">getId</a>();
<a name="l00448"></a>00448         }
<a name="l00449"></a>00449         
<a name="l00450"></a>00450         
<a name="l00451"></a>00451     }
<a name="l00452"></a>00452 
<a name="l00453"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acf3273994179c2b7889bf888307df3c0">00453</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acf3273994179c2b7889bf888307df3c0">RandomRBFGeneratorEvents</a>() {
<a name="l00454"></a>00454         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a639c8a416631f7c224b57b7ce0b29585">noiseInClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1FlagOption.html#afe2e1ab3621a60bb7dbc9acb56f893f2">set</a>();
<a name="l00455"></a>00455 <span class="comment">//        eventDeleteCreateOption.set();</span>
<a name="l00456"></a>00456 <span class="comment">//        eventMergeSplitOption.set();</span>
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458 
<a name="l00459"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a87b9455eb1783588cec6879a8aa54f05">00459</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1core_1_1InstancesHeader.html" title="Class for storing the header or context of a data stream.">InstancesHeader</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a87b9455eb1783588cec6879a8aa54f05" title="Gets the header of this stream.">getHeader</a>() {
<a name="l00460"></a>00460             <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0962105a90e3f49e6d59ee841a50a3d1">streamHeader</a>;
<a name="l00461"></a>00461     }
<a name="l00462"></a>00462 
<a name="l00463"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad3b92258bad83b7fc1ae9240ac06457e">00463</a>     <span class="keyword">public</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad3b92258bad83b7fc1ae9240ac06457e" title="Gets the estimated number of remaining instances in this stream.">estimatedRemainingInstances</a>() {
<a name="l00464"></a>00464             <span class="keywordflow">return</span> -1;
<a name="l00465"></a>00465     }
<a name="l00466"></a>00466 
<a name="l00467"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad507eaca8153fa9001295f2e620cf602">00467</a>     <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad507eaca8153fa9001295f2e620cf602" title="Gets whether this stream has more instances to output.">hasMoreInstances</a>() {
<a name="l00468"></a>00468             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00469"></a>00469     }
<a name="l00470"></a>00470 
<a name="l00471"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5759d778c9c158297414a73646b3c132">00471</a>     <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5759d778c9c158297414a73646b3c132" title="Gets whether this stream can restart.">isRestartable</a>() {
<a name="l00472"></a>00472             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00473"></a>00473     }
<a name="l00474"></a>00474 
<a name="l00475"></a>00475     @Override
<a name="l00476"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a845ee7397f8e9674cf1e404a4e512652">00476</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a845ee7397f8e9674cf1e404a4e512652" title="This method describes the implementation of how to prepare this object for use.">prepareForUseImpl</a>(<a class="code" href="interfacemoa_1_1tasks_1_1TaskMonitor.html" title="Interface representing a task monitor.">TaskMonitor</a> monitor, <a class="code" href="interfacemoa_1_1core_1_1ObjectRepository.html" title="Interface for object repositories.">ObjectRepository</a> repository) {
<a name="l00477"></a>00477         monitor.<a class="code" href="interfacemoa_1_1tasks_1_1TaskMonitor.html#aa5eff409d63bfacd92fe2f062d373781" title="Sets the description and the percentage done of the current activity.">setCurrentActivity</a>(<span class="stringliteral">&quot;Preparing random RBF...&quot;</span>, -1.0);
<a name="l00478"></a>00478         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5f12d1770b44325e0292c23d5a12868e">generateHeader</a>();
<a name="l00479"></a>00479         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a828a51e66351b96c0161b5bc65d0dbbc" title="Restarts this stream.">restart</a>();
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481 
<a name="l00482"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a828a51e66351b96c0161b5bc65d0dbbc">00482</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a828a51e66351b96c0161b5bc65d0dbbc" title="Restarts this stream.">restart</a>() {
<a name="l00483"></a>00483             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a> = <span class="keyword">new</span> Random(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#af68d5a2c7a096939029f262aa2e5597e">instanceRandomSeedOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>());
<a name="l00484"></a>00484             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1f5c53b7d0015b52369f798d6bbaaf1c">eventFrequencyOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00485"></a>00485             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a9e3b2c7cd78f134a8d361f58c00419da">nextEventChoice</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae9b6d148afc4523f069b8de0fb838818">getNextEvent</a>();
<a name="l00486"></a>00486             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> = 0;
<a name="l00487"></a>00487             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a> = 0;
<a name="l00488"></a>00488             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae8f127f64eff7db0ad9f0c564c14e9be">clusterIdCounter</a> = 0;
<a name="l00489"></a>00489             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a> = null;
<a name="l00490"></a>00490             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a> = <span class="keyword">new</span> AutoExpandVector&lt;GeneratorCluster&gt;();
<a name="l00491"></a>00491 
<a name="l00492"></a>00492             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#aca8bd815a0c400a053a12f016dba9a4e">initKernels</a>();
<a name="l00493"></a>00493     }
<a name="l00494"></a>00494     
<a name="l00495"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5f12d1770b44325e0292c23d5a12868e">00495</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5f12d1770b44325e0292c23d5a12868e">generateHeader</a>() {   <span class="comment">// 2013/06/02: Noise label</span>
<a name="l00496"></a>00496         ArrayList&lt;Attribute&gt; attributes = <span class="keyword">new</span> ArrayList&lt;Attribute&gt;();
<a name="l00497"></a>00497         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; this.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>(); i++) {
<a name="l00498"></a>00498             attributes.add(<span class="keyword">new</span> Attribute(<span class="stringliteral">&quot;att&quot;</span> + (i + 1)));
<a name="l00499"></a>00499         }
<a name="l00500"></a>00500         
<a name="l00501"></a>00501         ArrayList&lt;String&gt; classLabels = <span class="keyword">new</span> ArrayList&lt;String&gt;();
<a name="l00502"></a>00502         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; this.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>(); i++) {
<a name="l00503"></a>00503             classLabels.add(<span class="stringliteral">&quot;class&quot;</span> + (i + 1));
<a name="l00504"></a>00504         }
<a name="l00505"></a>00505         <span class="keywordflow">if</span> (<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a79aad251ca1134439388dcbf9a83a64f">noiseLevelOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>() &gt; 0) classLabels.add(<span class="stringliteral">&quot;noise&quot;</span>);  <span class="comment">// The last label = &quot;noise&quot;</span>
<a name="l00506"></a>00506         
<a name="l00507"></a>00507         attributes.add(<span class="keyword">new</span> Attribute(<span class="stringliteral">&quot;class&quot;</span>, classLabels));
<a name="l00508"></a>00508         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0962105a90e3f49e6d59ee841a50a3d1">streamHeader</a> = <span class="keyword">new</span> <a class="code" href="classmoa_1_1core_1_1InstancesHeader.html" title="Class for storing the header or context of a data stream.">InstancesHeader</a>(<span class="keyword">new</span> Instances(<a class="code" href="classmoa_1_1options_1_1AbstractOptionHandler.html#aeaeb9c80ecb2664eff34245d98464890" title="Gets the Command Line Interface text to create the object.">getCLICreationString</a>(<a class="code" href="interfacemoa_1_1streams_1_1InstanceStream.html" title="Interface representing a data stream of instances.">InstanceStream</a>.class), attributes, 0));
<a name="l00509"></a>00509         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0962105a90e3f49e6d59ee841a50a3d1">streamHeader</a>.setClassIndex(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0962105a90e3f49e6d59ee841a50a3d1">streamHeader</a>.numAttributes() - 1);
<a name="l00510"></a>00510     }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512         
<a name="l00513"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#aca8bd815a0c400a053a12f016dba9a4e">00513</a>     <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#aca8bd815a0c400a053a12f016dba9a4e">initKernels</a>() {
<a name="l00514"></a>00514         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>(); i++) {
<a name="l00515"></a>00515             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.add(<span class="keyword">new</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">GeneratorCluster</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae8f127f64eff7db0ad9f0c564c14e9be">clusterIdCounter</a>));
<a name="l00516"></a>00516             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a>++;
<a name="l00517"></a>00517             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae8f127f64eff7db0ad9f0c564c14e9be">clusterIdCounter</a>++;
<a name="l00518"></a>00518         }
<a name="l00519"></a>00519         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad109e0499b7f03a6db383dd7433d8514">normalizeWeights</a>();
<a name="l00520"></a>00520     }
<a name="l00521"></a>00521 
<a name="l00522"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1a923c68c7cce9ec5cf03676b4354e36">00522</a>     <span class="keyword">public</span> Instance <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1a923c68c7cce9ec5cf03676b4354e36" title="Gets the next instance from this stream.">nextInstance</a>() {
<a name="l00523"></a>00523         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>++;
<a name="l00524"></a>00524         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a42cb7d06400b71575d82b10ebbbc84fd">eventScheduler</a>();
<a name="l00525"></a>00525 
<a name="l00526"></a>00526         <span class="comment">//make room for the classlabel</span>
<a name="l00527"></a>00527         <span class="keywordtype">double</span>[] values_new = <span class="keyword">new</span> <span class="keywordtype">double</span> [<a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()+1];
<a name="l00528"></a>00528         <span class="keywordtype">double</span>[] values = null;
<a name="l00529"></a>00529         <span class="keywordtype">int</span> clusterChoice = -1;
<a name="l00530"></a>00530 
<a name="l00531"></a>00531         <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble() &gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a79aad251ca1134439388dcbf9a83a64f">noiseLevelOption</a>.<a class="code" href="classmoa_1_1options_1_1FloatOption.html#a0e606a62f4ece232aa8f8cb04bb7f1cf">getValue</a>()){
<a name="l00532"></a>00532             clusterChoice = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7a5708d326ffb6bb132ddad952060ab">chooseWeightedElement</a>();
<a name="l00533"></a>00533             values = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(clusterChoice).generator.sample(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>).toDoubleArray();
<a name="l00534"></a>00534         }
<a name="l00535"></a>00535         <span class="keywordflow">else</span>{
<a name="l00536"></a>00536             <span class="comment">//get ranodm noise point</span>
<a name="l00537"></a>00537             values = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae4912b176a37d28c7b9df26a5be93855">getNoisePoint</a>();
<a name="l00538"></a>00538         }
<a name="l00539"></a>00539 
<a name="l00540"></a>00540         <span class="keywordflow">if</span>(Double.isNaN(values[0])){
<a name="l00541"></a>00541             System.out.println(<span class="stringliteral">&quot;Instance corrupted:&quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>);
<a name="l00542"></a>00542         }
<a name="l00543"></a>00543         System.arraycopy(values, 0, values_new, 0, values.length);
<a name="l00544"></a>00544 
<a name="l00545"></a>00545         Instance inst = <span class="keyword">new</span> DenseInstance(1.0, values_new);
<a name="l00546"></a>00546         inst.setDataset(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a87b9455eb1783588cec6879a8aa54f05" title="Gets the header of this stream.">getHeader</a>());
<a name="l00547"></a>00547         <span class="keywordflow">if</span>(clusterChoice == -1){
<a name="l00548"></a>00548             <span class="comment">// 2013/06/02 (Yunsu Kim)</span>
<a name="l00549"></a>00549             <span class="comment">// Noise instance has the last class value instead of &quot;-1&quot;</span>
<a name="l00550"></a>00550             <span class="comment">// Preventing ArrayIndexOutOfBoundsException in WriteStreamToARFFFile</span>
<a name="l00551"></a>00551             inst.setClassValue(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>());
<a name="l00552"></a>00552         }
<a name="l00553"></a>00553         <span class="keywordflow">else</span>{
<a name="l00554"></a>00554             inst.setClassValue(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(clusterChoice).generator.getId());
<a name="l00555"></a>00555             <span class="comment">//Do we need micro cluster representation if have overlapping clusters?</span>
<a name="l00556"></a>00556             <span class="comment">//if(!overlappingOption.isSet())</span>
<a name="l00557"></a>00557                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(clusterChoice).addInstance(inst);
<a name="l00558"></a>00558         }
<a name="l00559"></a>00559 <span class="comment">//        System.out.println(numGeneratedInstances+&quot;: Overlap is&quot;+updateOverlaps());</span>
<a name="l00560"></a>00560         
<a name="l00561"></a>00561         <span class="keywordflow">return</span> inst;
<a name="l00562"></a>00562     }
<a name="l00563"></a>00563 
<a name="l00564"></a>00564 
<a name="l00565"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acc6a8c030baa5cd65e6832c7f435d125">00565</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1cluster_1_1Clustering.html">Clustering</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acc6a8c030baa5cd65e6832c7f435d125">getGeneratingClusters</a>(){
<a name="l00566"></a>00566         <a class="code" href="classmoa_1_1cluster_1_1Clustering.html">Clustering</a> clustering = <span class="keyword">new</span> <a class="code" href="classmoa_1_1cluster_1_1Clustering.html">Clustering</a>();
<a name="l00567"></a>00567         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); c++) {
<a name="l00568"></a>00568             clustering.<a class="code" href="classmoa_1_1cluster_1_1Clustering.html#a7b39cc3d6666cb758b8954ecbe0ce2e9" title="add a cluster to the clustering">add</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).generator);
<a name="l00569"></a>00569         }
<a name="l00570"></a>00570         <span class="keywordflow">return</span> clustering;
<a name="l00571"></a>00571     }
<a name="l00572"></a>00572 
<a name="l00573"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1123a06a51796ea7cd9f960cc2cf282e">00573</a>     <span class="keyword">public</span> <a class="code" href="classmoa_1_1cluster_1_1Clustering.html">Clustering</a> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1123a06a51796ea7cd9f960cc2cf282e">getMicroClustering</a>(){
<a name="l00574"></a>00574         <a class="code" href="classmoa_1_1cluster_1_1Clustering.html">Clustering</a> clustering = <span class="keyword">new</span> <a class="code" href="classmoa_1_1cluster_1_1Clustering.html">Clustering</a>();
<a name="l00575"></a>00575         <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0;
<a name="l00576"></a>00576 
<a name="l00577"></a>00577             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); c++) {
<a name="l00578"></a>00578                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = 0; m &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).microClusters.size(); m++) {
<a name="l00579"></a>00579                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).microClusters.get(m).setId(<span class="keywordtype">id</span>);
<a name="l00580"></a>00580                     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).microClusters.get(m).setGroundTruth(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).generator.getId());
<a name="l00581"></a>00581                     clustering.<a class="code" href="classmoa_1_1cluster_1_1Clustering.html#a7b39cc3d6666cb758b8954ecbe0ce2e9" title="add a cluster to the clustering">add</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).microClusters.get(m));
<a name="l00582"></a>00582                     <span class="keywordtype">id</span>++;
<a name="l00583"></a>00583                 }
<a name="l00584"></a>00584             }
<a name="l00585"></a>00585 
<a name="l00586"></a>00586         <span class="comment">//System.out.println(&quot;numMicroKernels &quot;+clustering.size());</span>
<a name="l00587"></a>00587         <span class="keywordflow">return</span> clustering;
<a name="l00588"></a>00588     }
<a name="l00589"></a>00589 
<a name="l00590"></a>00590 <span class="comment">/**************************** EVENTS ******************************************/</span>
<a name="l00591"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a42cb7d06400b71575d82b10ebbbc84fd">00591</a>     <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a42cb7d06400b71575d82b10ebbbc84fd">eventScheduler</a>(){
<a name="l00592"></a>00592 
<a name="l00593"></a>00593         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); i++ ) {
<a name="l00594"></a>00594             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i).updateKernel();
<a name="l00595"></a>00595         }
<a name="l00596"></a>00596         
<a name="l00597"></a>00597         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a>--;
<a name="l00598"></a>00598         <span class="comment">//only move kernels every 10 points, performance reasons????</span>
<a name="l00599"></a>00599         <span class="comment">//should this be randomized as well???</span>
<a name="l00600"></a>00600         <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a>%<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a70521d0480f1dd4a463eb245355753a9">kernelMovePointFrequency</a> == 0){
<a name="l00601"></a>00601             <span class="comment">//move kernels</span>
<a name="l00602"></a>00602             <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); i++ ) {
<a name="l00603"></a>00603                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i).move();
<a name="l00604"></a>00604                 <span class="comment">//overlapControl();</span>
<a name="l00605"></a>00605             }
<a name="l00606"></a>00606         }
<a name="l00607"></a>00607 
<a name="l00608"></a>00608 
<a name="l00609"></a>00609         <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1f5c53b7d0015b52369f798d6bbaaf1c">eventFrequencyOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() == 0){
<a name="l00610"></a>00610             <span class="keywordflow">return</span>;
<a name="l00611"></a>00611         }
<a name="l00612"></a>00612 
<a name="l00613"></a>00613         String type =<span class="stringliteral">&quot;&quot;</span>;
<a name="l00614"></a>00614         String message =<span class="stringliteral">&quot;&quot;</span>;
<a name="l00615"></a>00615         <span class="keywordtype">boolean</span> eventFinished = <span class="keyword">false</span>;
<a name="l00616"></a>00616         <span class="keywordflow">switch</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a9e3b2c7cd78f134a8d361f58c00419da">nextEventChoice</a>){
<a name="l00617"></a>00617             <span class="keywordflow">case</span> 0:
<a name="l00618"></a>00618                 <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &gt; 1 &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() - <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8237b185244b804e112e46cdb1002069">numClusterRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()){
<a name="l00619"></a>00619                     message = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a43d4a83ac9736735a8404c1e9c86efe6">mergeKernels</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a>);
<a name="l00620"></a>00620                     type = <span class="stringliteral">&quot;Merge&quot;</span>;
<a name="l00621"></a>00621                 }
<a name="l00622"></a>00622                 <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>==null &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>==null &amp;&amp; message.startsWith(<span class="stringliteral">&quot;Clusters merging&quot;</span>)){
<a name="l00623"></a>00623                     eventFinished = <span class="keyword">true</span>;
<a name="l00624"></a>00624                 }                
<a name="l00625"></a>00625             <span class="keywordflow">break</span>;
<a name="l00626"></a>00626             <span class="keywordflow">case</span> 1:
<a name="l00627"></a>00627                 <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a>&lt;=0){
<a name="l00628"></a>00628                     <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() + <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8237b185244b804e112e46cdb1002069">numClusterRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()){
<a name="l00629"></a>00629                         type = <span class="stringliteral">&quot;Split&quot;</span>;
<a name="l00630"></a>00630                         message = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1d74e04fabe1e90aa365d10e6577b4a1">splitKernel</a>();
<a name="l00631"></a>00631                     }
<a name="l00632"></a>00632                     eventFinished = <span class="keyword">true</span>;
<a name="l00633"></a>00633                 }
<a name="l00634"></a>00634             <span class="keywordflow">break</span>;
<a name="l00635"></a>00635             <span class="keywordflow">case</span> 2:
<a name="l00636"></a>00636                 <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a>&lt;=0){
<a name="l00637"></a>00637                     <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &gt; 1 &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &gt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() - <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8237b185244b804e112e46cdb1002069">numClusterRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()){
<a name="l00638"></a>00638                         message = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae0fedd0d1cb9222ee24bd383bfb1fc61">fadeOut</a>();
<a name="l00639"></a>00639                         type = <span class="stringliteral">&quot;Delete&quot;</span>;
<a name="l00640"></a>00640                     }
<a name="l00641"></a>00641                     eventFinished = <span class="keyword">true</span>;
<a name="l00642"></a>00642                 }
<a name="l00643"></a>00643             <span class="keywordflow">break</span>;
<a name="l00644"></a>00644             <span class="keywordflow">case</span> 3:
<a name="l00645"></a>00645                 <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a>&lt;=0){
<a name="l00646"></a>00646                     <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() + <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8237b185244b804e112e46cdb1002069">numClusterRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()){
<a name="l00647"></a>00647                         message = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a2c3fcf7791f3386135214536850081c2">fadeIn</a>();
<a name="l00648"></a>00648                         type = <span class="stringliteral">&quot;Create&quot;</span>;
<a name="l00649"></a>00649                     }
<a name="l00650"></a>00650                     eventFinished = <span class="keyword">true</span>;           
<a name="l00651"></a>00651                 }
<a name="l00652"></a>00652             <span class="keywordflow">break</span>;
<a name="l00653"></a>00653 
<a name="l00654"></a>00654         }
<a name="l00655"></a>00655         <span class="keywordflow">if</span> (eventFinished){
<a name="l00656"></a>00656                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5b74414605c2f2a24822192b12f17d70">nextEventCounter</a> = (int)(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1f5c53b7d0015b52369f798d6bbaaf1c">eventFrequencyOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()+(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextBoolean()?-1:1)*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1f5c53b7d0015b52369f798d6bbaaf1c">eventFrequencyOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afe718836f498fb6e3b0ccbe5143299f4">eventFrequencyRange</a>*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble());
<a name="l00657"></a>00657                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a9e3b2c7cd78f134a8d361f58c00419da">nextEventChoice</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae9b6d148afc4523f069b8de0fb838818">getNextEvent</a>();
<a name="l00658"></a>00658                 <span class="comment">//System.out.println(&quot;Next event choice: &quot;+nextEventChoice);</span>
<a name="l00659"></a>00659         }
<a name="l00660"></a>00660         <span class="keywordflow">if</span>(!message.isEmpty()){
<a name="l00661"></a>00661             message+=<span class="stringliteral">&quot; (numKernels = &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a>+<span class="stringliteral">&quot; at &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>+<span class="stringliteral">&quot;)&quot;</span>;
<a name="l00662"></a>00662             <span class="keywordflow">if</span>(!type.equals(<span class="stringliteral">&quot;Merge&quot;</span>) || message.startsWith(<span class="stringliteral">&quot;Clusters merging&quot;</span>))
<a name="l00663"></a>00663                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae777af3b0d3018314199f12e8410acbe" title="Fire a ClusterChangeEvent to all registered listeners.">fireClusterChange</a>(numGeneratedInstances, type, message);
<a name="l00664"></a>00664         }
<a name="l00665"></a>00665     }
<a name="l00666"></a>00666     
<a name="l00667"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae9b6d148afc4523f069b8de0fb838818">00667</a>     <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae9b6d148afc4523f069b8de0fb838818">getNextEvent</a>() {
<a name="l00668"></a>00668         <span class="keywordtype">int</span> choice = -1;
<a name="l00669"></a>00669         <span class="keywordtype">boolean</span> lowerLimit = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &lt;= <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() - <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8237b185244b804e112e46cdb1002069">numClusterRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00670"></a>00670         <span class="keywordtype">boolean</span> upperLimit = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &gt;= <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8ffa158daea1a8b58d234f179187bec6">numClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() + <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8237b185244b804e112e46cdb1002069">numClusterRangeOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>();
<a name="l00671"></a>00671 
<a name="l00672"></a>00672         <span class="keywordflow">if</span>(!lowerLimit || !upperLimit){
<a name="l00673"></a>00673             <span class="keywordtype">int</span> mode = -1;
<a name="l00674"></a>00674             <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acbeb41d913949c2d3ac969f639ca162c">eventDeleteCreateOption</a>.<a class="code" href="classmoa_1_1options_1_1FlagOption.html#ab37cb6ed4d9a2e393b460594f075b0a2">isSet</a>() &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acedd07735102ed654fdef633c12e2f86">eventMergeSplitOption</a>.<a class="code" href="classmoa_1_1options_1_1FlagOption.html#ab37cb6ed4d9a2e393b460594f075b0a2">isSet</a>()){
<a name="l00675"></a>00675                 mode = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(2);
<a name="l00676"></a>00676             }
<a name="l00677"></a>00677             
<a name="l00678"></a>00678             <span class="keywordflow">if</span>(mode==0 || (mode==-1 &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acedd07735102ed654fdef633c12e2f86">eventMergeSplitOption</a>.<a class="code" href="classmoa_1_1options_1_1FlagOption.html#ab37cb6ed4d9a2e393b460594f075b0a2">isSet</a>())){
<a name="l00679"></a>00679                 <span class="comment">//have we reached a limit? if not free choice</span>
<a name="l00680"></a>00680                 <span class="keywordflow">if</span>(!lowerLimit &amp;&amp; !upperLimit) 
<a name="l00681"></a>00681                     choice = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(2);
<a name="l00682"></a>00682                 <span class="keywordflow">else</span>
<a name="l00683"></a>00683                     <span class="comment">//we have a limit. if lower limit, choose split</span>
<a name="l00684"></a>00684                     <span class="keywordflow">if</span>(lowerLimit)
<a name="l00685"></a>00685                         choice = 1;
<a name="l00686"></a>00686                     <span class="comment">//otherwise we reached upper level, choose merge</span>
<a name="l00687"></a>00687                     <span class="keywordflow">else</span>
<a name="l00688"></a>00688                         choice = 0;
<a name="l00689"></a>00689             }
<a name="l00690"></a>00690             
<a name="l00691"></a>00691             <span class="keywordflow">if</span>(mode==1 || (mode==-1 &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#acbeb41d913949c2d3ac969f639ca162c">eventDeleteCreateOption</a>.<a class="code" href="classmoa_1_1options_1_1FlagOption.html#ab37cb6ed4d9a2e393b460594f075b0a2">isSet</a>())){
<a name="l00692"></a>00692                 <span class="comment">//have we reached a limit? if not free choice</span>
<a name="l00693"></a>00693                 <span class="keywordflow">if</span>(!lowerLimit &amp;&amp; !upperLimit) 
<a name="l00694"></a>00694                     choice = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(2)+2;
<a name="l00695"></a>00695                 <span class="keywordflow">else</span>
<a name="l00696"></a>00696                     <span class="comment">//we have a limit. if lower limit, choose create</span>
<a name="l00697"></a>00697                     <span class="keywordflow">if</span>(lowerLimit)
<a name="l00698"></a>00698                         choice = 3;
<a name="l00699"></a>00699                     <span class="comment">//otherwise we reached upper level, choose delete</span>
<a name="l00700"></a>00700                     <span class="keywordflow">else</span>
<a name="l00701"></a>00701                         choice = 2;
<a name="l00702"></a>00702             }
<a name="l00703"></a>00703         }
<a name="l00704"></a>00704 
<a name="l00705"></a>00705         
<a name="l00706"></a>00706         <span class="keywordflow">return</span> choice;
<a name="l00707"></a>00707     }
<a name="l00708"></a>00708 
<a name="l00709"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae0fedd0d1cb9222ee24bd383bfb1fc61">00709</a>     <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae0fedd0d1cb9222ee24bd383bfb1fc61">fadeOut</a>(){
<a name="l00710"></a>00710         <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size());
<a name="l00711"></a>00711         <span class="keywordflow">while</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).kill!=-1)
<a name="l00712"></a>00712             <span class="keywordtype">id</span> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size());
<a name="l00713"></a>00713     
<a name="l00714"></a>00714         String message = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).fadeOut();
<a name="l00715"></a>00715         <span class="keywordflow">return</span> message;
<a name="l00716"></a>00716     }
<a name="l00717"></a>00717     
<a name="l00718"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a2c3fcf7791f3386135214536850081c2">00718</a>     <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a2c3fcf7791f3386135214536850081c2">fadeIn</a>(){
<a name="l00719"></a>00719             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">GeneratorCluster</a> gc = <span class="keyword">new</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html">GeneratorCluster</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae8f127f64eff7db0ad9f0c564c14e9be">clusterIdCounter</a>++);
<a name="l00720"></a>00720             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.add(gc);
<a name="l00721"></a>00721             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a>++;
<a name="l00722"></a>00722             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad109e0499b7f03a6db383dd7433d8514">normalizeWeights</a>();
<a name="l00723"></a>00723         <span class="keywordflow">return</span> <span class="stringliteral">&quot;Creating new cluster&quot;</span>;
<a name="l00724"></a>00724     }
<a name="l00725"></a>00725     
<a name="l00726"></a>00726     
<a name="l00727"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8eb6555fc9fa7ccecf56f11f241eba0c">00727</a>     <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a8eb6555fc9fa7ccecf56f11f241eba0c">changeWeight</a>(<span class="keywordtype">boolean</span> increase){
<a name="l00728"></a>00728         <span class="keywordtype">double</span> changeRate = 0.1;
<a name="l00729"></a>00729         <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size());
<a name="l00730"></a>00730         <span class="keywordflow">while</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).kill!=-1)
<a name="l00731"></a>00731             <span class="keywordtype">id</span> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size());
<a name="l00732"></a>00732 
<a name="l00733"></a>00733         <span class="keywordtype">int</span> sign = 1;
<a name="l00734"></a>00734         <span class="keywordflow">if</span>(!increase)
<a name="l00735"></a>00735             sign = -1;
<a name="l00736"></a>00736         <span class="keywordtype">double</span> weight_old = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).generator.getWeight();
<a name="l00737"></a>00737         <span class="keywordtype">double</span> delta = sign*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a>*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble()*changeRate;
<a name="l00738"></a>00738         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).generator.setWeight(weight_old+delta);
<a name="l00739"></a>00739 
<a name="l00740"></a>00740         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad109e0499b7f03a6db383dd7433d8514">normalizeWeights</a>();
<a name="l00741"></a>00741 
<a name="l00742"></a>00742         String message;
<a name="l00743"></a>00743         <span class="keywordflow">if</span>(increase)
<a name="l00744"></a>00744             message = <span class="stringliteral">&quot;Increase &quot;</span>;
<a name="l00745"></a>00745         <span class="keywordflow">else</span>
<a name="l00746"></a>00746             message = <span class="stringliteral">&quot;Decrease &quot;</span>;
<a name="l00747"></a>00747         message+=<span class="stringliteral">&quot; weight on Cluster &quot;</span>+<span class="keywordtype">id</span>+<span class="stringliteral">&quot; from &quot;</span>+weight_old+<span class="stringliteral">&quot; to &quot;</span>+(weight_old+delta);
<a name="l00748"></a>00748         <span class="keywordflow">return</span> message;
<a name="l00749"></a>00749 
<a name="l00750"></a>00750 
<a name="l00751"></a>00751     }
<a name="l00752"></a>00752 
<a name="l00753"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1b1594cdfec33dcc87a63cb855af50f1">00753</a>     <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1b1594cdfec33dcc87a63cb855af50f1">changeRadius</a>(<span class="keywordtype">boolean</span> increase){
<a name="l00754"></a>00754         <span class="keywordtype">double</span> maxChangeRate = 0.1;
<a name="l00755"></a>00755         <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size());
<a name="l00756"></a>00756         <span class="keywordflow">while</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).kill!=-1)
<a name="l00757"></a>00757             <span class="keywordtype">id</span> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size());
<a name="l00758"></a>00758 
<a name="l00759"></a>00759         <span class="keywordtype">int</span> sign = 1;
<a name="l00760"></a>00760         <span class="keywordflow">if</span>(!increase)
<a name="l00761"></a>00761             sign = -1;
<a name="l00762"></a>00762 
<a name="l00763"></a>00763         <span class="keywordtype">double</span> r_old = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).generator.getRadius();
<a name="l00764"></a>00764         <span class="keywordtype">double</span> r_new =r_old+sign*r_old*<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble()*maxChangeRate;
<a name="l00765"></a>00765         <span class="keywordflow">if</span>(r_new &gt;= 0.5) <span class="keywordflow">return</span> <span class="stringliteral">&quot;Radius to big&quot;</span>;
<a name="l00766"></a>00766         <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).generator.setRadius(r_new);
<a name="l00767"></a>00767         
<a name="l00768"></a>00768         String message;
<a name="l00769"></a>00769         <span class="keywordflow">if</span>(increase)
<a name="l00770"></a>00770             message = <span class="stringliteral">&quot;Increase &quot;</span>;
<a name="l00771"></a>00771         <span class="keywordflow">else</span>
<a name="l00772"></a>00772             message = <span class="stringliteral">&quot;Decrease &quot;</span>;
<a name="l00773"></a>00773         message+=<span class="stringliteral">&quot; radius on Cluster &quot;</span>+<span class="keywordtype">id</span>+<span class="stringliteral">&quot; from &quot;</span>+r_old+<span class="stringliteral">&quot; to &quot;</span>+r_new;
<a name="l00774"></a>00774         <span class="keywordflow">return</span> message;
<a name="l00775"></a>00775     }
<a name="l00776"></a>00776 
<a name="l00777"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1d74e04fabe1e90aa365d10e6577b4a1">00777</a>     <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a1d74e04fabe1e90aa365d10e6577b4a1">splitKernel</a>(){
<a name="l00778"></a>00778         <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size());
<a name="l00779"></a>00779         <span class="keywordflow">while</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).kill!=-1)
<a name="l00780"></a>00780             <span class="keywordtype">id</span> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextInt(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size());
<a name="l00781"></a>00781 
<a name="l00782"></a>00782         String message = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(<span class="keywordtype">id</span>).splitKernel();
<a name="l00783"></a>00783 
<a name="l00784"></a>00784         <span class="keywordflow">return</span> message;
<a name="l00785"></a>00785     }
<a name="l00786"></a>00786 
<a name="l00787"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a43d4a83ac9736735a8404c1e9c86efe6">00787</a>     <span class="keyword">private</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a43d4a83ac9736735a8404c1e9c86efe6">mergeKernels</a>(<span class="keywordtype">int</span> steps){
<a name="l00788"></a>00788         <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a5e48542b852080ab2431e5753730d086">numActiveKernels</a> &gt;1 &amp;&amp; ((<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a> == null &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a> == null))){
<a name="l00789"></a>00789 
<a name="l00790"></a>00790             <span class="comment">//choose clusters to merge</span>
<a name="l00791"></a>00791             <span class="keywordtype">double</span> diseredDist = steps / <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a411cded0fe9e526592259c51d48b2452">speedOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>() * <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a05babb7e12e5716f386cecb68880e137">maxDistanceMoveThresholdByStep</a>;
<a name="l00792"></a>00792             <span class="keywordtype">double</span> minDist = Double.MAX_VALUE;
<a name="l00793"></a>00793 <span class="comment">//          System.out.println(&quot;DisredDist:&quot;+(2*diseredDist));</span>
<a name="l00794"></a>00794             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); i++){
<a name="l00795"></a>00795                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; i; j++){
<a name="l00796"></a>00796                     <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i).kill!=-1 || <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(j).kill!=-1){
<a name="l00797"></a>00797                         <span class="keywordflow">continue</span>;
<a name="l00798"></a>00798                     }
<a name="l00799"></a>00799                     <span class="keywordflow">else</span>{
<a name="l00800"></a>00800                         <span class="keywordtype">double</span> kernelDist = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i).generator.getCenterDistance(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(j).generator);
<a name="l00801"></a>00801                         <span class="keywordtype">double</span> d = kernelDist-2*diseredDist;
<a name="l00802"></a>00802 <span class="comment">//                      System.out.println(&quot;Dist:&quot;+i+&quot; / &quot;+j+&quot; &quot;+d);</span>
<a name="l00803"></a>00803                         <span class="keywordflow">if</span>(Math.abs(d) &lt; minDist &amp;&amp; 
<a name="l00804"></a>00804                                 (minDist != Double.MAX_VALUE || d&gt;0 || Math.abs(d) &lt; 0.001)){
<a name="l00805"></a>00805                             minDist = Math.abs(d);
<a name="l00806"></a>00806                             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i);
<a name="l00807"></a>00807                             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a> = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(j);
<a name="l00808"></a>00808                         }
<a name="l00809"></a>00809                     }
<a name="l00810"></a>00810                 }
<a name="l00811"></a>00811             }
<a name="l00812"></a>00812             
<a name="l00813"></a>00813             <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>!=null &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>!=null){
<a name="l00814"></a>00814                 <span class="keywordtype">double</span>[] merge_point = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#aefb8b36adf18a65827154d4b617e867d">getCenter</a>();
<a name="l00815"></a>00815                 <span class="keywordtype">double</span>[] v = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#a15a795abc625d2160c0803512594969d">getDistanceVector</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>);
<a name="l00816"></a>00816                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; v.length; i++) {
<a name="l00817"></a>00817                     merge_point[i]= merge_point[i]+v[i]*0.5;
<a name="l00818"></a>00818                 }
<a name="l00819"></a>00819     
<a name="l00820"></a>00820                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a3f408dd63fc5cbeca2fc2bba7b69356f">merging</a> = <span class="keyword">true</span>;
<a name="l00821"></a>00821                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a3f408dd63fc5cbeca2fc2bba7b69356f">merging</a> = <span class="keyword">true</span>;
<a name="l00822"></a>00822                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a07210af7e2d58616d53d8d84952aa9a3">setDesitnation</a>(merge_point);
<a name="l00823"></a>00823                 <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a07210af7e2d58616d53d8d84952aa9a3">setDesitnation</a>(merge_point);
<a name="l00824"></a>00824                 
<a name="l00825"></a>00825                 <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a306ba140d964a08400c90ffa8683ce51">debug</a>){
<a name="l00826"></a>00826                     System.out.println(<span class="stringliteral">&quot;Center1&quot;</span>+Arrays.toString(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#aefb8b36adf18a65827154d4b617e867d">getCenter</a>()));
<a name="l00827"></a>00827                     System.out.println(<span class="stringliteral">&quot;Center2&quot;</span>+Arrays.toString(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1SphereCluster.html#aefb8b36adf18a65827154d4b617e867d">getCenter</a>()));
<a name="l00828"></a>00828                     System.out.println(<span class="stringliteral">&quot;Vector&quot;</span>+Arrays.toString(v));            
<a name="l00829"></a>00829                     
<a name="l00830"></a>00830                     System.out.println(<span class="stringliteral">&quot;Try to merge cluster &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#aec009f106ed5a6940f956a07af28ffd2">getId</a>()+
<a name="l00831"></a>00831                             <span class="stringliteral">&quot; into &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#a69219becc4603f398bfa74f502df3dbd">generator</a>.<a class="code" href="classmoa_1_1cluster_1_1Cluster.html#aec009f106ed5a6940f956a07af28ffd2">getId</a>()+
<a name="l00832"></a>00832                             <span class="stringliteral">&quot; at &quot;</span>+Arrays.toString(merge_point)+
<a name="l00833"></a>00833                             <span class="stringliteral">&quot; time &quot;</span>+<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a0d7cc8f196e85b23f606c5f2ac5df1ca">numGeneratedInstances</a>);
<a name="l00834"></a>00834                 }
<a name="l00835"></a>00835                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;Init merge&quot;</span>;
<a name="l00836"></a>00836             }
<a name="l00837"></a>00837         }
<a name="l00838"></a>00838 
<a name="l00839"></a>00839         <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a> != null &amp;&amp; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a> != null){
<a name="l00840"></a>00840 
<a name="l00841"></a>00841             <span class="comment">//movekernels will move the kernels close to each other,</span>
<a name="l00842"></a>00842             <span class="comment">//we just need to check and merge here if they are close enough</span>
<a name="l00843"></a>00843             <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ac76ffe63d98073f16a7c6a2ea640855a">mergeClusterA</a>.<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents_1_1GeneratorCluster.html#ac1318060ca75dcc3c5d25bc8d931ee42">tryMerging</a>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7bbe1323c883fc88b0ebc44cddfe54f">mergeClusterB</a>);
<a name="l00844"></a>00844         }
<a name="l00845"></a>00845 
<a name="l00846"></a>00846         <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00847"></a>00847     }
<a name="l00848"></a>00848 
<a name="l00849"></a>00849 
<a name="l00850"></a>00850 
<a name="l00851"></a>00851 
<a name="l00852"></a>00852 <span class="comment">/************************* TOOLS **************************************/</span>
<a name="l00853"></a>00853 
<a name="l00854"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7b64199e1492bf6d876fc3fa98a4e0ac">00854</a>     <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7b64199e1492bf6d876fc3fa98a4e0ac" title="Returns a string representation of this object.">getDescription</a>(StringBuilder sb, <span class="keywordtype">int</span> indent) {
<a name="l00855"></a>00855 
<a name="l00856"></a>00856     }
<a name="l00857"></a>00857 
<a name="l00858"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae4912b176a37d28c7b9df26a5be93855">00858</a>     <span class="keyword">private</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae4912b176a37d28c7b9df26a5be93855">getNoisePoint</a>(){
<a name="l00859"></a>00859         <span class="keywordtype">double</span> [] sample = <span class="keyword">new</span> <span class="keywordtype">double</span> [<a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>()];
<a name="l00860"></a>00860         <span class="keywordtype">boolean</span> incluster = <span class="keyword">true</span>;
<a name="l00861"></a>00861         <span class="keywordtype">int</span> counter = 20;
<a name="l00862"></a>00862         <span class="keywordflow">while</span>(incluster){
<a name="l00863"></a>00863             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusteringStream.html#a3685c5b6bc33838628402d3ba6262114">numAttsOption</a>.<a class="code" href="classmoa_1_1options_1_1IntOption.html#affae8787274b44ab7616d46b8d6c831a">getValue</a>(); j++) {
<a name="l00864"></a>00864                  sample[j] = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble();
<a name="l00865"></a>00865             }
<a name="l00866"></a>00866             incluster = <span class="keyword">false</span>;
<a name="l00867"></a>00867             <span class="keywordflow">if</span>(!<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a639c8a416631f7c224b57b7ce0b29585">noiseInClusterOption</a>.<a class="code" href="classmoa_1_1options_1_1FlagOption.html#ab37cb6ed4d9a2e393b460594f075b0a2">isSet</a>() &amp;&amp; counter &gt; 0){
<a name="l00868"></a>00868                 counter--;
<a name="l00869"></a>00869                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); c++){
<a name="l00870"></a>00870                     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> m = 0; m &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).microClusters.size(); m++){
<a name="l00871"></a>00871                         Instance inst = <span class="keyword">new</span> DenseInstance(1, sample);
<a name="l00872"></a>00872                         <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(c).microClusters.get(m).getInclusionProbability(inst) &gt; 0){
<a name="l00873"></a>00873                             incluster = <span class="keyword">true</span>;
<a name="l00874"></a>00874                             <span class="keywordflow">break</span>;
<a name="l00875"></a>00875                         }
<a name="l00876"></a>00876                     }
<a name="l00877"></a>00877                     <span class="keywordflow">if</span>(incluster)
<a name="l00878"></a>00878                         <span class="keywordflow">break</span>;
<a name="l00879"></a>00879                 }
<a name="l00880"></a>00880             }
<a name="l00881"></a>00881         }
<a name="l00882"></a>00882 
<a name="l00883"></a>00883 <span class="comment">//        double [] sample = new double [numAttsOption.getValue()];</span>
<a name="l00884"></a>00884 <span class="comment">//        for (int j = 0; j &lt; numAttsOption.getValue(); j++) {</span>
<a name="l00885"></a>00885 <span class="comment">//             sample[j] = instanceRandom.nextDouble();</span>
<a name="l00886"></a>00886 <span class="comment">//        }</span>
<a name="l00887"></a>00887              
<a name="l00888"></a>00888         <span class="keywordflow">return</span> sample;
<a name="l00889"></a>00889     }
<a name="l00890"></a>00890 
<a name="l00891"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7a5708d326ffb6bb132ddad952060ab">00891</a>      <span class="keyword">private</span> <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ab7a5708d326ffb6bb132ddad952060ab">chooseWeightedElement</a>() {
<a name="l00892"></a>00892         <span class="keywordtype">double</span> r = <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6c8945b11684d23ac15cf87503f4dfff">instanceRandom</a>.nextDouble();
<a name="l00893"></a>00893 
<a name="l00894"></a>00894         <span class="comment">// Determine index of choosen element</span>
<a name="l00895"></a>00895         <span class="keywordtype">int</span> i = 0;
<a name="l00896"></a>00896         <span class="keywordflow">while</span> (r &gt; 0.0) {
<a name="l00897"></a>00897             r -= <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i).generator.getWeight();
<a name="l00898"></a>00898             i++;
<a name="l00899"></a>00899         }
<a name="l00900"></a>00900         --i;    <span class="comment">// Overcounted once</span>
<a name="l00901"></a>00901         <span class="comment">//System.out.println(i);</span>
<a name="l00902"></a>00902         <span class="keywordflow">return</span> i;
<a name="l00903"></a>00903     }
<a name="l00904"></a>00904 
<a name="l00905"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad109e0499b7f03a6db383dd7433d8514">00905</a>     <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ad109e0499b7f03a6db383dd7433d8514">normalizeWeights</a>(){
<a name="l00906"></a>00906         <span class="keywordtype">double</span> sumWeights = 0.0;
<a name="l00907"></a>00907         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); i++) {
<a name="l00908"></a>00908             sumWeights+=<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i).generator.getWeight();
<a name="l00909"></a>00909         }
<a name="l00910"></a>00910         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.size(); i++) {
<a name="l00911"></a>00911             <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i).generator.setWeight(<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#afae36d339240d175de54c2a553a48fb5">kernels</a>.get(i).generator.getWeight()/sumWeights);
<a name="l00912"></a>00912         }
<a name="l00913"></a>00913     }
<a name="l00914"></a>00914 
<a name="l00915"></a>00915 
<a name="l00916"></a>00916 
<a name="l00917"></a>00917  <span class="comment">/*************** EVENT Listener *********************/</span>
<a name="l00918"></a>00918  <span class="comment">// should go into the superclass of the generator, create new one for cluster streams?</span>
<a name="l00919"></a>00919   
<a name="l00921"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a379c1feeea4dc5ddc1e7d2c9926e42ba">00921</a>   <span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a379c1feeea4dc5ddc1e7d2c9926e42ba" title="Add a listener.">addClusterChangeListener</a>(<a class="code" href="interfacemoa_1_1streams_1_1clustering_1_1ClusterEventListener.html">ClusterEventListener</a> l) {
<a name="l00922"></a>00922     <span class="keywordflow">if</span> (<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a> == null)
<a name="l00923"></a>00923       <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a> = <span class="keyword">new</span> Vector();
<a name="l00924"></a>00924     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a>.addElement(l);
<a name="l00925"></a>00925   }
<a name="l00926"></a>00926 
<a name="l00928"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6ef4162471fc63b4483361335a56ec4b">00928</a>   <span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a6ef4162471fc63b4483361335a56ec4b" title="Remove a listener.">removeClusterChangeListener</a>(<a class="code" href="interfacemoa_1_1streams_1_1clustering_1_1ClusterEventListener.html">ClusterEventListener</a> l) {
<a name="l00929"></a>00929     <span class="keywordflow">if</span> (<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a> == null)
<a name="l00930"></a>00930       <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a> = <span class="keyword">new</span> Vector();
<a name="l00931"></a>00931     <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a>.removeElement(l);
<a name="l00932"></a>00932   }
<a name="l00933"></a>00933 
<a name="l00935"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae777af3b0d3018314199f12e8410acbe">00935</a>   <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#ae777af3b0d3018314199f12e8410acbe" title="Fire a ClusterChangeEvent to all registered listeners.">fireClusterChange</a>(<span class="keywordtype">long</span> timestamp, String type, String message) {
<a name="l00936"></a>00936     <span class="comment">// if we have no listeners, do nothing...</span>
<a name="l00937"></a>00937     <span class="keywordflow">if</span> (<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a> != null &amp;&amp; !<a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a>.isEmpty()) {
<a name="l00938"></a>00938       <span class="comment">// create the event object to send</span>
<a name="l00939"></a>00939       <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusterEvent.html">ClusterEvent</a> <span class="keyword">event</span> =
<a name="l00940"></a>00940         <span class="keyword">new</span> <a class="code" href="classmoa_1_1streams_1_1clustering_1_1ClusterEvent.html">ClusterEvent</a>(<span class="keyword">this</span>, timestamp, type , message);
<a name="l00941"></a>00941 
<a name="l00942"></a>00942       <span class="comment">// make a copy of the listener list in case</span>
<a name="l00943"></a>00943       <span class="comment">//   anyone adds/removes listeners</span>
<a name="l00944"></a>00944       Vector targets;
<a name="l00945"></a>00945       <span class="keyword">synchronized</span> (<span class="keyword">this</span>) {
<a name="l00946"></a>00946         targets = (Vector) <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a7fbe2063384d9afbbda62ee948b7e01d">listeners</a>.clone();
<a name="l00947"></a>00947       }
<a name="l00948"></a>00948 
<a name="l00949"></a>00949       <span class="comment">// walk through the listener list and</span>
<a name="l00950"></a>00950       <span class="comment">//   call the sunMoved method in each</span>
<a name="l00951"></a>00951       Enumeration e = targets.elements();
<a name="l00952"></a>00952       <span class="keywordflow">while</span> (e.hasMoreElements()) {
<a name="l00953"></a>00953         <a class="code" href="interfacemoa_1_1streams_1_1clustering_1_1ClusterEventListener.html">ClusterEventListener</a> l = (<a class="code" href="interfacemoa_1_1streams_1_1clustering_1_1ClusterEventListener.html">ClusterEventListener</a>) e.nextElement();
<a name="l00954"></a>00954         l.<a class="code" href="interfacemoa_1_1streams_1_1clustering_1_1ClusterEventListener.html#a05ec84cf382ec68c0144ed2bcbbef7be">changeCluster</a>(event);
<a name="l00955"></a>00955 
<a name="l00956"></a>00956       }
<a name="l00957"></a>00957     }
<a name="l00958"></a>00958   }
<a name="l00959"></a>00959 
<a name="l00960"></a>00960     @Override
<a name="l00961"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a9ca7a77a570e87274e51145a49d39561">00961</a>     <span class="keyword">public</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a9ca7a77a570e87274e51145a49d39561" title="Gets the purpose of this object.">getPurposeString</a>() {
<a name="l00962"></a>00962             <span class="keywordflow">return</span> <span class="stringliteral">&quot;Generates a random radial basis function stream.&quot;</span>;
<a name="l00963"></a>00963     }
<a name="l00964"></a>00964 
<a name="l00965"></a>00965 
<a name="l00966"></a><a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a48089145411f00e35f89502031ffced8">00966</a>     <span class="keyword">public</span> String <a class="code" href="classmoa_1_1streams_1_1clustering_1_1RandomRBFGeneratorEvents.html#a48089145411f00e35f89502031ffced8">getParameterString</a>(){
<a name="l00967"></a>00967         <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00968"></a>00968     }
<a name="l00969"></a>00969 
<a name="l00970"></a>00970 
<a name="l00971"></a>00971 
<a name="l00972"></a>00972 
<a name="l00973"></a>00973 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 26 Nov 2014 for MOA by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
