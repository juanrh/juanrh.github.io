<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MOA: main/java/moa/classifiers/lazy/neighboursearch/LinearNNSearch.java Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>main/java/moa/classifiers/lazy/neighboursearch/LinearNNSearch.java</h1><a href="LinearNNSearch_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *   This program is free software: you can redistribute it and/or modify</span>
<a name="l00003"></a>00003 <span class="comment"> *   it under the terms of the GNU General Public License as published by</span>
<a name="l00004"></a>00004 <span class="comment"> *   the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00005"></a>00005 <span class="comment"> *   (at your option) any later version.</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> *   This program is distributed in the hope that it will be useful,</span>
<a name="l00008"></a>00008 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00009"></a>00009 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00010"></a>00010 <span class="comment"> *   GNU General Public License for more details.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *   You should have received a copy of the GNU General Public License</span>
<a name="l00013"></a>00013 <span class="comment"> *   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00014"></a>00014 <span class="comment"> */</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">/*</span>
<a name="l00017"></a>00017 <span class="comment"> *    LinearNNSearch.java</span>
<a name="l00018"></a>00018 <span class="comment"> *    Copyright (C) 1999-2012 University of Waikato</span>
<a name="l00019"></a>00019 <span class="comment"> */</span>
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="keyword">package </span>moa.classifiers.lazy.neighboursearch;
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">import</span> weka.core.Instance;
<a name="l00025"></a>00025 <span class="keyword">import</span> weka.core.Instances;
<a name="l00026"></a>00026 <span class="comment">//import weka.core.Option;</span>
<a name="l00027"></a>00027 <span class="comment">//import weka.core.RevisionUtils;</span>
<a name="l00028"></a>00028 <span class="comment">//import weka.core.Utils;</span>
<a name="l00029"></a>00029 
<a name="l00048"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html">00048</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html" title="Class implementing the brute force search algorithm for nearest neighbour search...">LinearNNSearch</a>
<a name="l00049"></a>00049   <span class="keyword">extends</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html" title="Abstract class for nearest neighbour search.">NearestNeighbourSearch</a> {
<a name="l00050"></a>00050 
<a name="l00052"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#afbef69bd2c05a657a65f34be0a012a5d">00052</a>   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#afbef69bd2c05a657a65f34be0a012a5d" title="for serialization.">serialVersionUID</a> = 1915484723703917241L;
<a name="l00053"></a>00053 
<a name="l00057"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a967be9c2a44a9bb398d719ee0c15687c">00057</a>   <span class="keyword">protected</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a967be9c2a44a9bb398d719ee0c15687c" title="Array holding the distances of the nearest neighbours.">m_Distances</a>;
<a name="l00058"></a>00058     
<a name="l00060"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a9a98b09105651296b655c480d2f458e8">00060</a>   <span class="keyword">protected</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a9a98b09105651296b655c480d2f458e8" title="Whether to skip instances from the neighbours that are identical to the query instance...">m_SkipIdentical</a> = <span class="keyword">false</span>;
<a name="l00061"></a>00061 
<a name="l00066"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a8fe13a23cbb7647aa1cf5fd0b508c2a2">00066</a>   <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a8fe13a23cbb7647aa1cf5fd0b508c2a2" title="Constructor.">LinearNNSearch</a>() {
<a name="l00067"></a>00067     super();
<a name="l00068"></a>00068   }
<a name="l00069"></a>00069   
<a name="l00076"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#aef8ddbd47bad8a932a36095bc6adc72d">00076</a>   <span class="keyword">public</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#aef8ddbd47bad8a932a36095bc6adc72d" title="Constructor that uses the supplied set of instances.">LinearNNSearch</a>(Instances insts) {
<a name="l00077"></a>00077     super(insts);
<a name="l00078"></a>00078     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a>.<a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html#a37aa9f54773d4690030d25ee3d9185ac" title="Sets the instances.">setInstances</a>(insts);
<a name="l00079"></a>00079   }
<a name="l00080"></a>00080   
<a name="l00087"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a30f8c109818ac3cba13dcf22b68d2754">00087</a>   <span class="keyword">public</span> String <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a30f8c109818ac3cba13dcf22b68d2754" title="Returns a string describing this nearest neighbour search algorithm.">globalInfo</a>() {
<a name="l00088"></a>00088     <span class="keywordflow">return</span> 
<a name="l00089"></a>00089         <span class="stringliteral">&quot;Class implementing the brute force search algorithm for nearest &quot;</span>
<a name="l00090"></a>00090       + <span class="stringliteral">&quot;neighbour search.&quot;</span>;  
<a name="l00091"></a>00091   }
<a name="l00092"></a>00092   
<a name="l00093"></a>00093   
<a name="l00094"></a>00094 
<a name="l00101"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a455caf41f4f340546f085ce0e4cf7648">00101</a>   <span class="keyword">public</span> String <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a455caf41f4f340546f085ce0e4cf7648" title="Returns the tip text for this property.">skipIdenticalTipText</a>() {
<a name="l00102"></a>00102     <span class="keywordflow">return</span> <span class="stringliteral">&quot;Whether to skip identical instances (with distance 0 to the target)&quot;</span>;
<a name="l00103"></a>00103   }
<a name="l00104"></a>00104   
<a name="l00111"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a280e600a63be5dc07de5a478828b1206">00111</a>   <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a280e600a63be5dc07de5a478828b1206" title="Sets the property to skip identical instances (with distance zero from the target)...">setSkipIdentical</a>(<span class="keywordtype">boolean</span> skip) {
<a name="l00112"></a>00112     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a9a98b09105651296b655c480d2f458e8" title="Whether to skip instances from the neighbours that are identical to the query instance...">m_SkipIdentical</a> = skip;
<a name="l00113"></a>00113   }
<a name="l00114"></a>00114   
<a name="l00120"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a4dcdd3348decb929c3f70cc47dc56558">00120</a>   <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a4dcdd3348decb929c3f70cc47dc56558" title="Gets whether if identical instances are skipped from the neighbourhood.">getSkipIdentical</a>() {
<a name="l00121"></a>00121     <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a9a98b09105651296b655c480d2f458e8" title="Whether to skip instances from the neighbours that are identical to the query instance...">m_SkipIdentical</a>;
<a name="l00122"></a>00122   }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124   
<a name="l00133"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a84348ab6a9b63c521931fe6794314895">00133</a>   <span class="keyword">public</span> Instance <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a84348ab6a9b63c521931fe6794314895" title="Returns the nearest instance in the current neighbourhood to the supplied instance...">nearestNeighbour</a>(Instance target) <span class="keywordflow">throws</span> Exception {
<a name="l00134"></a>00134     <span class="keywordflow">return</span> (<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#af60dd2738258760909208275a7f96bef" title="Returns k nearest instances in the current neighbourhood to the supplied instance...">kNearestNeighbours</a>(target, 1)).instance(0);
<a name="l00135"></a>00135   }
<a name="l00136"></a>00136   
<a name="l00146"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#af60dd2738258760909208275a7f96bef">00146</a>   <span class="keyword">public</span> Instances <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#af60dd2738258760909208275a7f96bef" title="Returns k nearest instances in the current neighbourhood to the supplied instance...">kNearestNeighbours</a>(Instance target, <span class="keywordtype">int</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1kNN.html" title="k Nearest Neighbor.">kNN</a>) <span class="keywordflow">throws</span> Exception {
<a name="l00147"></a>00147   
<a name="l00148"></a>00148     <span class="comment">//debug</span>
<a name="l00149"></a>00149     <span class="keywordtype">boolean</span> print=<span class="keyword">false</span>;
<a name="l00150"></a>00150  
<a name="l00151"></a>00151     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html" title="A class for a heap to store the nearest k neighbours to an instance.">MyHeap</a> heap = <span class="keyword">new</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html" title="A class for a heap to store the nearest k neighbours to an instance.">MyHeap</a>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1kNN.html" title="k Nearest Neighbor.">kNN</a>);
<a name="l00152"></a>00152     <span class="keywordtype">double</span> distance; <span class="keywordtype">int</span> firstkNN=0;
<a name="l00153"></a>00153     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>.numInstances(); i++) {
<a name="l00154"></a>00154       <span class="keywordflow">if</span>(target == <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>.instance(i)) <span class="comment">//for hold-one-out cross-validation</span>
<a name="l00155"></a>00155         <span class="keywordflow">continue</span>;
<a name="l00156"></a>00156       <span class="keywordflow">if</span>(firstkNN&lt;<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1kNN.html" title="k Nearest Neighbor.">kNN</a>) {
<a name="l00157"></a>00157         <span class="keywordflow">if</span>(print)
<a name="l00158"></a>00158           System.out.println(<span class="stringliteral">&quot;K(a): &quot;</span>+(heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44" title="returns the size of the heap.">size</a>()+heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd" title="returns the number of k nearest.">noOfKthNearest</a>()));
<a name="l00159"></a>00159         distance = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a>.<a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html#a4a806e7b8470527d015dfb861457cbb0" title="Calculates the distance between two instances.">distance</a>(target, <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>.instance(i), Double.POSITIVE_INFINITY);
<a name="l00160"></a>00160         <span class="keywordflow">if</span>(distance == 0.0 &amp;&amp; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a9a98b09105651296b655c480d2f458e8" title="Whether to skip instances from the neighbours that are identical to the query instance...">m_SkipIdentical</a>)
<a name="l00161"></a>00161           <span class="keywordflow">if</span>(i&lt;<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>.numInstances()-1)
<a name="l00162"></a>00162             <span class="keywordflow">continue</span>;
<a name="l00163"></a>00163           <span class="keywordflow">else</span>
<a name="l00164"></a>00164             heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0c36c44e6651e71b1c82b32200c78d06" title="adds the value to the heap.">put</a>(i, distance);
<a name="l00165"></a>00165         heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a0c36c44e6651e71b1c82b32200c78d06" title="adds the value to the heap.">put</a>(i, distance);
<a name="l00166"></a>00166         firstkNN++;
<a name="l00167"></a>00167       }
<a name="l00168"></a>00168       <span class="keywordflow">else</span> {
<a name="l00169"></a>00169         <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> temp = heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#aa3280d69fcf91e98c280c8e77843fcff" title="peeks at the first element.">peek</a>();
<a name="l00170"></a>00170         <span class="keywordflow">if</span>(print)
<a name="l00171"></a>00171           System.out.println(<span class="stringliteral">&quot;K(b): &quot;</span>+(heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44" title="returns the size of the heap.">size</a>()+heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd" title="returns the number of k nearest.">noOfKthNearest</a>()));
<a name="l00172"></a>00172         distance = <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a>.<a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html#a4a806e7b8470527d015dfb861457cbb0" title="Calculates the distance between two instances.">distance</a>(target, <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>.instance(i), temp.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>);
<a name="l00173"></a>00173         <span class="keywordflow">if</span>(distance == 0.0 &amp;&amp; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a9a98b09105651296b655c480d2f458e8" title="Whether to skip instances from the neighbours that are identical to the query instance...">m_SkipIdentical</a>)
<a name="l00174"></a>00174           <span class="keywordflow">continue</span>;
<a name="l00175"></a>00175         <span class="keywordflow">if</span>(distance &lt; temp.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>) {
<a name="l00176"></a>00176           heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a3868c19d0a061d4a74089d640216e84c" title="Puts an element by substituting it in place of the top most element.">putBySubstitute</a>(i, distance);
<a name="l00177"></a>00177         }
<a name="l00178"></a>00178         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(distance == temp.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>) {
<a name="l00179"></a>00179           heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a1dbdd504b8b5333acd68f107ecc9ef72" title="Stores kth nearest elements (if there are more than one).">putKthNearest</a>(i, distance);
<a name="l00180"></a>00180         }
<a name="l00181"></a>00181 
<a name="l00182"></a>00182       }
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184     
<a name="l00185"></a>00185     Instances neighbours = <span class="keyword">new</span> Instances(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>, (heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44" title="returns the size of the heap.">size</a>()+heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd" title="returns the number of k nearest.">noOfKthNearest</a>()));
<a name="l00186"></a>00186     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a967be9c2a44a9bb398d719ee0c15687c" title="Array holding the distances of the nearest neighbours.">m_Distances</a> = <span class="keyword">new</span> <span class="keywordtype">double</span>[heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44" title="returns the size of the heap.">size</a>()+heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd" title="returns the number of k nearest.">noOfKthNearest</a>()];
<a name="l00187"></a>00187     <span class="keywordtype">int</span> [] indices = <span class="keyword">new</span> <span class="keywordtype">int</span>[heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44" title="returns the size of the heap.">size</a>()+heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd" title="returns the number of k nearest.">noOfKthNearest</a>()];
<a name="l00188"></a>00188     <span class="keywordtype">int</span> i=1; <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html" title="A class for storing data about a neighboring instance.">MyHeapElement</a> h;
<a name="l00189"></a>00189     <span class="keywordflow">while</span>(heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a34366c6deedbe3a9a54b6635757eb3dd" title="returns the number of k nearest.">noOfKthNearest</a>()&gt;0) {
<a name="l00190"></a>00190       h = heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a5923f7607c4a6fb5d756dd503d51eab9" title="returns the kth nearest element or null if none there.">getKthNearest</a>();
<a name="l00191"></a>00191       indices[indices.length-i] = h.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>;
<a name="l00192"></a>00192       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a967be9c2a44a9bb398d719ee0c15687c" title="Array holding the distances of the nearest neighbours.">m_Distances</a>[indices.length-i] = h.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>;
<a name="l00193"></a>00193       i++;
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195     <span class="keywordflow">while</span>(heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#ac9e877c56727dda18be2021c4c99df44" title="returns the size of the heap.">size</a>()&gt;0) {
<a name="l00196"></a>00196       h = heap.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeap.html#a19758f98f6ae1f6144884dcdbfbe10d9" title="returns the first element and removes it from the heap.">get</a>();
<a name="l00197"></a>00197       indices[indices.length-i] = h.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#adec73e64405f537aaaf8264deb0ba30f" title="the index of this element.">index</a>;
<a name="l00198"></a>00198       <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a967be9c2a44a9bb398d719ee0c15687c" title="Array holding the distances of the nearest neighbours.">m_Distances</a>[indices.length-i] = h.<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch_1_1MyHeapElement.html#a2e40c568e1c33b4427c36545aab28cf5" title="the distance of this element.">distance</a>;
<a name="l00199"></a>00199       i++;
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201     
<a name="l00202"></a>00202     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a>.<a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html#a4214e297cf5a570a098018d628ff9ec5" title="Does post processing of the distances (if necessary) returned by distance(distance(Instance...">postProcessDistances</a>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a967be9c2a44a9bb398d719ee0c15687c" title="Array holding the distances of the nearest neighbours.">m_Distances</a>);
<a name="l00203"></a>00203     
<a name="l00204"></a>00204     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0; k&lt;indices.length; k++) {
<a name="l00205"></a>00205       neighbours.add(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>.instance(indices[k]));
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207     
<a name="l00208"></a>00208     <span class="keywordflow">return</span> neighbours;    
<a name="l00209"></a>00209   }
<a name="l00210"></a>00210   
<a name="l00228"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a61a59a1df1f11531053e6503ddfdd78e">00228</a>   <span class="keyword">public</span> <span class="keywordtype">double</span>[] <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a61a59a1df1f11531053e6503ddfdd78e" title="Returns the distances of the k nearest neighbours.">getDistances</a>() throws Exception {
<a name="l00229"></a>00229     <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a967be9c2a44a9bb398d719ee0c15687c" title="Array holding the distances of the nearest neighbours.">m_Distances</a>==null)
<a name="l00230"></a>00230       <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;No distances available. Please call either &quot;</span>+
<a name="l00231"></a>00231                           <span class="stringliteral">&quot;kNearestNeighbours or nearestNeighbours first.&quot;</span>);
<a name="l00232"></a>00232     <span class="keywordflow">return</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a967be9c2a44a9bb398d719ee0c15687c" title="Array holding the distances of the nearest neighbours.">m_Distances</a>;    
<a name="l00233"></a>00233   }
<a name="l00234"></a>00234 
<a name="l00243"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a776e3240935d70dab60ec85358dc977d">00243</a>   <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a776e3240935d70dab60ec85358dc977d" title="Sets the instances comprising the current neighbourhood.">setInstances</a>(Instances insts) <span class="keywordflow">throws</span> Exception {
<a name="l00244"></a>00244     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a> = insts;
<a name="l00245"></a>00245     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a>.<a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html#a37aa9f54773d4690030d25ee3d9185ac" title="Sets the instances.">setInstances</a>(insts);
<a name="l00246"></a>00246   }
<a name="l00247"></a>00247   
<a name="l00259"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#af9858a38247baef4fa7cad9a1254b6a0">00259</a>   <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#af9858a38247baef4fa7cad9a1254b6a0" title="Updates the LinearNNSearch to cater for the new added instance.">update</a>(Instance ins) <span class="keywordflow">throws</span> Exception {
<a name="l00260"></a>00260     <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>==null)
<a name="l00261"></a>00261       <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;No instances supplied yet. Cannot update without&quot;</span>+
<a name="l00262"></a>00262                           <span class="stringliteral">&quot;supplying a set of instances first.&quot;</span>);
<a name="l00263"></a>00263     <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a2dac7a5d55e15226b854449c9804d274" title="the distance function used.">m_DistanceFunction</a>.<a class="code" href="interfacemoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1DistanceFunction.html#a4710c0b5190ba6c5b89a648ac7daccb1" title="Update the distance function (if necessary) for the newly added instance.">update</a>(ins);
<a name="l00264"></a>00264   }
<a name="l00265"></a>00265   
<a name="l00274"></a><a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a6bf8b531815fbaa2bcd7006074533136">00274</a>   <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#a6bf8b531815fbaa2bcd7006074533136" title="Adds the given instance info.">addInstanceInfo</a>(Instance ins) {
<a name="l00275"></a>00275     <span class="keywordflow">if</span>(<a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1NearestNeighbourSearch.html#a4c51e812fad51b3fe3c71d95f54d34a4" title="The neighbourhood of instances to find neighbours in.">m_Instances</a>!=null)
<a name="l00276"></a>00276       <span class="keywordflow">try</span>{ <a class="code" href="classmoa_1_1classifiers_1_1lazy_1_1neighboursearch_1_1LinearNNSearch.html#af9858a38247baef4fa7cad9a1254b6a0" title="Updates the LinearNNSearch to cater for the new added instance.">update</a>(ins); }
<a name="l00277"></a>00277       <span class="keywordflow">catch</span>(Exception ex) { ex.printStackTrace(); }
<a name="l00278"></a>00278   }
<a name="l00279"></a>00279   
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 26 Nov 2014 for MOA by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
